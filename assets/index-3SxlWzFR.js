(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function p1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var m1={exports:{}},qd={},y1={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=Symbol.for("react.element"),BM=Symbol.for("react.portal"),MM=Symbol.for("react.fragment"),kM=Symbol.for("react.strict_mode"),EM=Symbol.for("react.profiler"),DM=Symbol.for("react.provider"),AM=Symbol.for("react.context"),NM=Symbol.for("react.forward_ref"),RM=Symbol.for("react.suspense"),CM=Symbol.for("react.memo"),FM=Symbol.for("react.lazy"),m_=Symbol.iterator;function PM(t){return t===null||typeof t!="object"?null:(t=m_&&t[m_]||t["@@iterator"],typeof t=="function"?t:null)}var g1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_1=Object.assign,b1={};function na(t,e,n){this.props=t,this.context=e,this.refs=b1,this.updater=n||g1}na.prototype.isReactComponent={};na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v1(){}v1.prototype=na.prototype;function Ty(t,e,n){this.props=t,this.context=e,this.refs=b1,this.updater=n||g1}var Iy=Ty.prototype=new v1;Iy.constructor=Ty;_1(Iy,na.prototype);Iy.isPureReactComponent=!0;var y_=Array.isArray,S1=Object.prototype.hasOwnProperty,Oy={current:null},w1={key:!0,ref:!0,__self:!0,__source:!0};function T1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)S1.call(e,r)&&!w1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ql,type:t,key:s,ref:o,props:i,_owner:Oy.current}}function jM(t,e){return{$$typeof:Ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function By(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ql}function LM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var g_=/\/+/g;function ch(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LM(""+t.key):e.toString(36)}function wc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ql:case BM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ch(o,0):r,y_(i)?(n="",t!=null&&(n=t.replace(g_,"$&/")+"/"),wc(i,e,n,"",function(u){return u})):i!=null&&(By(i)&&(i=jM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(g_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",y_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ch(s,a);o+=wc(s,e,n,l,i)}else if(l=PM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ch(s,a++),o+=wc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $u(t,e,n){if(t==null)return t;var r=[],i=0;return wc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function UM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},Tc={transition:null},xM={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:Tc,ReactCurrentOwner:Oy};function I1(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:$u,forEach:function(t,e,n){$u(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $u(t,function(){e++}),e},toArray:function(t){return $u(t,function(e){return e})||[]},only:function(t){if(!By(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=na;se.Fragment=MM;se.Profiler=EM;se.PureComponent=Ty;se.StrictMode=kM;se.Suspense=RM;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xM;se.act=I1;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Oy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)S1.call(e,l)&&!w1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ql,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:AM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DM,_context:t},t.Consumer=t};se.createElement=T1;se.createFactory=function(t){var e=T1.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:NM,render:t}};se.isValidElement=By;se.lazy=function(t){return{$$typeof:FM,_payload:{_status:-1,_result:t},_init:UM}};se.memo=function(t,e){return{$$typeof:CM,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Tc.transition;Tc.transition={};try{t()}finally{Tc.transition=e}};se.unstable_act=I1;se.useCallback=function(t,e){return Bt.current.useCallback(t,e)};se.useContext=function(t){return Bt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};se.useEffect=function(t,e){return Bt.current.useEffect(t,e)};se.useId=function(){return Bt.current.useId()};se.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Bt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};se.useRef=function(t){return Bt.current.useRef(t)};se.useState=function(t){return Bt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Bt.current.useTransition()};se.version="18.3.1";y1.exports=se;var te=y1.exports;const At=p1(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM=te,zM=Symbol.for("react.element"),$M=Symbol.for("react.fragment"),HM=Object.prototype.hasOwnProperty,WM=VM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KM={key:!0,ref:!0,__self:!0,__source:!0};function O1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HM.call(e,r)&&!KM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zM,type:t,key:s,ref:o,props:i,_owner:WM.current}}qd.Fragment=$M;qd.jsx=O1;qd.jsxs=O1;m1.exports=qd;var On=m1.exports,Dp={},B1={exports:{}},Xt={},M1={exports:{}},k1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var q=U.length;U.push(K);e:for(;0<q;){var de=q-1>>>1,pe=U[de];if(0<i(pe,K))U[de]=K,U[q]=pe,q=de;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var K=U[0],q=U.pop();if(q!==K){U[0]=q;e:for(var de=0,pe=U.length,xt=pe>>>1;de<xt;){var lt=2*(de+1)-1,tn=U[lt],gt=lt+1,nn=U[gt];if(0>i(tn,q))gt<pe&&0>i(nn,tn)?(U[de]=nn,U[gt]=q,de=gt):(U[de]=tn,U[lt]=q,de=lt);else if(gt<pe&&0>i(nn,q))U[de]=nn,U[gt]=q,de=gt;else break e}}return K}function i(U,K){var q=U.sortIndex-K.sortIndex;return q!==0?q:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,m=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=U)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(u)}}function S(U){if(b=!1,y(U),!m)if(n(l)!==null)m=!0,ke(T);else{var K=n(u);K!==null&&ge(S,K.startTime-U)}}function T(U,K){m=!1,b&&(b=!1,p(M),M=-1),h=!0;var q=d;try{for(y(K),f=n(l);f!==null&&(!(f.expirationTime>K)||U&&!V());){var de=f.callback;if(typeof de=="function"){f.callback=null,d=f.priorityLevel;var pe=de(f.expirationTime<=K);K=t.unstable_now(),typeof pe=="function"?f.callback=pe:f===n(l)&&r(l),y(K)}else r(l);f=n(l)}if(f!==null)var xt=!0;else{var lt=n(u);lt!==null&&ge(S,lt.startTime-K),xt=!1}return xt}finally{f=null,d=q,h=!1}}var v=!1,w=null,M=-1,F=5,C=-1;function V(){return!(t.unstable_now()-C<F)}function X(){if(w!==null){var U=t.unstable_now();C=U;var K=!0;try{K=w(!0,U)}finally{K?ve():(v=!1,w=null)}}else v=!1}var ve;if(typeof g=="function")ve=function(){g(X)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,ee=Et.port2;Et.port1.onmessage=X,ve=function(){ee.postMessage(null)}}else ve=function(){_(X,0)};function ke(U){w=U,v||(v=!0,ve())}function ge(U,K){M=_(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,ke(T))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(d){case 1:case 2:case 3:var K=3;break;default:K=d}var q=d;d=K;try{return U()}finally{d=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=d;d=U;try{return K()}finally{d=q}},t.unstable_scheduleCallback=function(U,K,q){var de=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?de+q:de):q=de,U){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=q+pe,U={id:c++,callback:K,priorityLevel:U,startTime:q,expirationTime:pe,sortIndex:-1},q>de?(U.sortIndex=q,e(u,U),n(l)===null&&U===n(u)&&(b?(p(M),M=-1):b=!0,ge(S,q-de))):(U.sortIndex=pe,e(l,U),m||h||(m=!0,ke(T))),U},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(U){var K=d;return function(){var q=d;d=K;try{return U.apply(this,arguments)}finally{d=q}}}})(k1);M1.exports=k1;var qM=M1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JM=te,Yt=qM;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E1=new Set,bl={};function As(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(bl[t]=e,t=0;t<e.length;t++)E1.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ap=Object.prototype.hasOwnProperty,GM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,__={},b_={};function YM(t){return Ap.call(b_,t)?!0:Ap.call(__,t)?!1:GM.test(t)?b_[t]=!0:(__[t]=!0,!1)}function QM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XM(t,e,n,r){if(e===null||typeof e>"u"||QM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var My=/[\-:]([a-z])/g;function ky(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(My,ky);at[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(My,ky);at[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(My,ky);at[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ey(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XM(e,n,i,r)&&(n=null),r||i===null?YM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rr=JM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hu=Symbol.for("react.element"),no=Symbol.for("react.portal"),ro=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),Ay=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Cp=Symbol.for("react.suspense_list"),Ny=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),N1=Symbol.for("react.offscreen"),v_=Symbol.iterator;function ka(t){return t===null||typeof t!="object"?null:(t=v_&&t[v_]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,dh;function Ha(t){if(dh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dh=e&&e[1]||""}return`
`+dh+t}var fh=!1;function hh(t,e){if(!t||fh)return"";fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ha(t):""}function ZM(t){switch(t.tag){case 5:return Ha(t.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 2:case 15:return t=hh(t.type,!1),t;case 11:return t=hh(t.type.render,!1),t;case 1:return t=hh(t.type,!0),t;default:return""}}function Fp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ro:return"Fragment";case no:return"Portal";case Np:return"Profiler";case Dy:return"StrictMode";case Rp:return"Suspense";case Cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A1:return(t.displayName||"Context")+".Consumer";case D1:return(t._context.displayName||"Context")+".Provider";case Ay:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ny:return e=t.displayName||null,e!==null?e:Fp(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return Fp(t(e))}catch{}}return null}function ek(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fp(e);case 8:return e===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function R1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tk(t){var e=R1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wu(t){t._valueTracker||(t._valueTracker=tk(t))}function C1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=R1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pp(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function S_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function F1(t,e){e=e.checked,e!=null&&Ey(t,"checked",e,!1)}function jp(t,e){F1(t,e);var n=Bi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lp(t,e.type,Bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function w_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lp(t,e,n){(e!=="number"||$c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wa=Array.isArray;function So(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Up(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Wa(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bi(n)}}function P1(t,e){var n=Bi(e.value),r=Bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function I_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function j1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?j1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ku,L1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ku=Ku||document.createElement("div"),Ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nk=["Webkit","ms","Moz","O"];Object.keys(sl).forEach(function(t){nk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sl[e]=sl[t]})});function U1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sl.hasOwnProperty(t)&&sl[t]?(""+e).trim():e+"px"}function x1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=U1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rk=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(t,e){if(e){if(rk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function zp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=null;function Ry(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hp=null,wo=null,To=null;function O_(t){if(t=eu(t)){if(typeof Hp!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Xd(e),Hp(t.stateNode,t.type,e))}}function V1(t){wo?To?To.push(t):To=[t]:wo=t}function z1(){if(wo){var t=wo,e=To;if(To=wo=null,O_(t),e)for(t=0;t<e.length;t++)O_(e[t])}}function $1(t,e){return t(e)}function H1(){}var ph=!1;function W1(t,e,n){if(ph)return t(e,n);ph=!0;try{return $1(t,e,n)}finally{ph=!1,(wo!==null||To!==null)&&(H1(),z1())}}function Sl(t,e){var n=t.stateNode;if(n===null)return null;var r=Xd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Wp=!1;if(kr)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{Wp=!1}function ik(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ol=!1,Hc=null,Wc=!1,Kp=null,sk={onError:function(t){ol=!0,Hc=t}};function ok(t,e,n,r,i,s,o,a,l){ol=!1,Hc=null,ik.apply(sk,arguments)}function ak(t,e,n,r,i,s,o,a,l){if(ok.apply(this,arguments),ol){if(ol){var u=Hc;ol=!1,Hc=null}else throw Error(j(198));Wc||(Wc=!0,Kp=u)}}function Ns(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B_(t){if(Ns(t)!==t)throw Error(j(188))}function lk(t){var e=t.alternate;if(!e){if(e=Ns(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return B_(i),t;if(s===r)return B_(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function q1(t){return t=lk(t),t!==null?J1(t):null}function J1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=J1(t);if(e!==null)return e;t=t.sibling}return null}var G1=Yt.unstable_scheduleCallback,M_=Yt.unstable_cancelCallback,uk=Yt.unstable_shouldYield,ck=Yt.unstable_requestPaint,Ue=Yt.unstable_now,dk=Yt.unstable_getCurrentPriorityLevel,Cy=Yt.unstable_ImmediatePriority,Y1=Yt.unstable_UserBlockingPriority,Kc=Yt.unstable_NormalPriority,fk=Yt.unstable_LowPriority,Q1=Yt.unstable_IdlePriority,Jd=null,nr=null;function hk(t){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(Jd,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:yk,pk=Math.log,mk=Math.LN2;function yk(t){return t>>>=0,t===0?32:31-(pk(t)/mk|0)|0}var qu=64,Ju=4194304;function Ka(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ka(a):(s&=o,s!==0&&(r=Ka(s)))}else o=n&~i,o!==0?r=Ka(o):s!==0&&(r=Ka(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fn(e),i=1<<n,r|=t[n],e&=~i;return r}function gk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _k(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=gk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function X1(){var t=qu;return qu<<=1,!(qu&4194240)&&(qu=64),t}function mh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Fy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function Z1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eS,Py,tS,nS,rS,Jp=!1,Gu=[],pi=null,mi=null,yi=null,wl=new Map,Tl=new Map,oi=[],vk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k_(t,e){switch(t){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":wl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(e.pointerId)}}function Da(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=eu(e),e!==null&&Py(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Sk(t,e,n,r,i){switch(e){case"focusin":return pi=Da(pi,t,e,n,r,i),!0;case"dragenter":return mi=Da(mi,t,e,n,r,i),!0;case"mouseover":return yi=Da(yi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return wl.set(s,Da(wl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Tl.set(s,Da(Tl.get(s)||null,t,e,n,r,i)),!0}return!1}function iS(t){var e=es(t.target);if(e!==null){var n=Ns(e);if(n!==null){if(e=n.tag,e===13){if(e=K1(n),e!==null){t.blockedOn=e,rS(t.priority,function(){tS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$p=r,n.target.dispatchEvent(r),$p=null}else return e=eu(n),e!==null&&Py(e),t.blockedOn=n,!1;e.shift()}return!0}function E_(t,e,n){Ic(t)&&n.delete(e)}function wk(){Jp=!1,pi!==null&&Ic(pi)&&(pi=null),mi!==null&&Ic(mi)&&(mi=null),yi!==null&&Ic(yi)&&(yi=null),wl.forEach(E_),Tl.forEach(E_)}function Aa(t,e){t.blockedOn===e&&(t.blockedOn=null,Jp||(Jp=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,wk)))}function Il(t){function e(i){return Aa(i,t)}if(0<Gu.length){Aa(Gu[0],t);for(var n=1;n<Gu.length;n++){var r=Gu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(pi!==null&&Aa(pi,t),mi!==null&&Aa(mi,t),yi!==null&&Aa(yi,t),wl.forEach(e),Tl.forEach(e),n=0;n<oi.length;n++)r=oi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<oi.length&&(n=oi[0],n.blockedOn===null);)iS(n),n.blockedOn===null&&oi.shift()}var Io=Rr.ReactCurrentBatchConfig,Jc=!0;function Tk(t,e,n,r){var i=me,s=Io.transition;Io.transition=null;try{me=1,jy(t,e,n,r)}finally{me=i,Io.transition=s}}function Ik(t,e,n,r){var i=me,s=Io.transition;Io.transition=null;try{me=4,jy(t,e,n,r)}finally{me=i,Io.transition=s}}function jy(t,e,n,r){if(Jc){var i=Gp(t,e,n,r);if(i===null)Oh(t,e,r,Gc,n),k_(t,r);else if(Sk(i,t,e,n,r))r.stopPropagation();else if(k_(t,r),e&4&&-1<vk.indexOf(t)){for(;i!==null;){var s=eu(i);if(s!==null&&eS(s),s=Gp(t,e,n,r),s===null&&Oh(t,e,r,Gc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Oh(t,e,r,null,n)}}var Gc=null;function Gp(t,e,n,r){if(Gc=null,t=Ry(r),t=es(t),t!==null)if(e=Ns(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gc=t,null}function sS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dk()){case Cy:return 1;case Y1:return 4;case Kc:case fk:return 16;case Q1:return 536870912;default:return 16}default:return 16}}var ui=null,Ly=null,Oc=null;function oS(){if(Oc)return Oc;var t,e=Ly,n=e.length,r,i="value"in ui?ui.value:ui.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Oc=i.slice(t,1<r?1-r:void 0)}function Bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yu(){return!0}function D_(){return!1}function Zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yu:D_,this.isPropagationStopped=D_,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yu)},persist:function(){},isPersistent:Yu}),e}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uy=Zt(ra),Zl=Ae({},ra,{view:0,detail:0}),Ok=Zt(Zl),yh,gh,Na,Gd=Ae({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Na&&(Na&&t.type==="mousemove"?(yh=t.screenX-Na.screenX,gh=t.screenY-Na.screenY):gh=yh=0,Na=t),yh)},movementY:function(t){return"movementY"in t?t.movementY:gh}}),A_=Zt(Gd),Bk=Ae({},Gd,{dataTransfer:0}),Mk=Zt(Bk),kk=Ae({},Zl,{relatedTarget:0}),_h=Zt(kk),Ek=Ae({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=Zt(Ek),Ak=Ae({},ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nk=Zt(Ak),Rk=Ae({},ra,{data:0}),N_=Zt(Rk),Ck={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Pk[t])?!!e[t]:!1}function xy(){return jk}var Lk=Ae({},Zl,{key:function(t){if(t.key){var e=Ck[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(t){return t.type==="keypress"?Bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uk=Zt(Lk),xk=Ae({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R_=Zt(xk),Vk=Ae({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),zk=Zt(Vk),$k=Ae({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hk=Zt($k),Wk=Ae({},Gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kk=Zt(Wk),qk=[9,13,27,32],Vy=kr&&"CompositionEvent"in window,al=null;kr&&"documentMode"in document&&(al=document.documentMode);var Jk=kr&&"TextEvent"in window&&!al,aS=kr&&(!Vy||al&&8<al&&11>=al),C_=" ",F_=!1;function lS(t,e){switch(t){case"keyup":return qk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function Gk(t,e){switch(t){case"compositionend":return uS(e);case"keypress":return e.which!==32?null:(F_=!0,C_);case"textInput":return t=e.data,t===C_&&F_?null:t;default:return null}}function Yk(t,e){if(io)return t==="compositionend"||!Vy&&lS(t,e)?(t=oS(),Oc=Ly=ui=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aS&&e.locale!=="ko"?null:e.data;default:return null}}var Qk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qk[t.type]:e==="textarea"}function cS(t,e,n,r){V1(r),e=Yc(e,"onChange"),0<e.length&&(n=new Uy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ll=null,Ol=null;function Xk(t){SS(t,0)}function Yd(t){var e=ao(t);if(C1(e))return t}function Zk(t,e){if(t==="change")return e}var dS=!1;if(kr){var bh;if(kr){var vh="oninput"in document;if(!vh){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),vh=typeof j_.oninput=="function"}bh=vh}else bh=!1;dS=bh&&(!document.documentMode||9<document.documentMode)}function L_(){ll&&(ll.detachEvent("onpropertychange",fS),Ol=ll=null)}function fS(t){if(t.propertyName==="value"&&Yd(Ol)){var e=[];cS(e,Ol,t,Ry(t)),W1(Xk,e)}}function eE(t,e,n){t==="focusin"?(L_(),ll=e,Ol=n,ll.attachEvent("onpropertychange",fS)):t==="focusout"&&L_()}function tE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yd(Ol)}function nE(t,e){if(t==="click")return Yd(e)}function rE(t,e){if(t==="input"||t==="change")return Yd(e)}function iE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:iE;function Bl(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ap.call(e,i)||!Un(t[i],e[i]))return!1}return!0}function U_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function x_(t,e){var n=U_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U_(n)}}function hS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pS(){for(var t=window,e=$c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$c(t.document)}return e}function zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sE(t){var e=pS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hS(n.ownerDocument.documentElement,n)){if(r!==null&&zy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=x_(n,s);var o=x_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oE=kr&&"documentMode"in document&&11>=document.documentMode,so=null,Yp=null,ul=null,Qp=!1;function V_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qp||so==null||so!==$c(r)||(r=so,"selectionStart"in r&&zy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ul&&Bl(ul,r)||(ul=r,r=Yc(Yp,"onSelect"),0<r.length&&(e=new Uy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=so)))}function Qu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oo={animationend:Qu("Animation","AnimationEnd"),animationiteration:Qu("Animation","AnimationIteration"),animationstart:Qu("Animation","AnimationStart"),transitionend:Qu("Transition","TransitionEnd")},Sh={},mS={};kr&&(mS=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function Qd(t){if(Sh[t])return Sh[t];if(!oo[t])return t;var e=oo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mS)return Sh[t]=e[n];return t}var yS=Qd("animationend"),gS=Qd("animationiteration"),_S=Qd("animationstart"),bS=Qd("transitionend"),vS=new Map,z_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,e){vS.set(t,e),As(e,[t])}for(var wh=0;wh<z_.length;wh++){var Th=z_[wh],aE=Th.toLowerCase(),lE=Th[0].toUpperCase()+Th.slice(1);Ai(aE,"on"+lE)}Ai(yS,"onAnimationEnd");Ai(gS,"onAnimationIteration");Ai(_S,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(bS,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uE=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function $_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ak(r,e,void 0,t),t.currentTarget=null}function SS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$_(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$_(i,a,u),s=l}}}if(Wc)throw t=Kp,Wc=!1,Kp=null,t}function Te(t,e){var n=e[nm];n===void 0&&(n=e[nm]=new Set);var r=t+"__bubble";n.has(r)||(wS(e,t,2,!1),n.add(r))}function Ih(t,e,n){var r=0;e&&(r|=4),wS(n,t,r,e)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Ml(t){if(!t[Xu]){t[Xu]=!0,E1.forEach(function(n){n!=="selectionchange"&&(uE.has(n)||Ih(n,!1,t),Ih(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xu]||(e[Xu]=!0,Ih("selectionchange",!1,e))}}function wS(t,e,n,r){switch(sS(e)){case 1:var i=Tk;break;case 4:i=Ik;break;default:i=jy}n=i.bind(null,e,n,t),i=void 0,!Wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Oh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=es(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}W1(function(){var u=s,c=Ry(n),f=[];e:{var d=vS.get(t);if(d!==void 0){var h=Uy,m=t;switch(t){case"keypress":if(Bc(n)===0)break e;case"keydown":case"keyup":h=Uk;break;case"focusin":m="focus",h=_h;break;case"focusout":m="blur",h=_h;break;case"beforeblur":case"afterblur":h=_h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=A_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Mk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=zk;break;case yS:case gS:case _S:h=Dk;break;case bS:h=Hk;break;case"scroll":h=Ok;break;case"wheel":h=Kk;break;case"copy":case"cut":case"paste":h=Nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=R_}var b=(e&4)!==0,_=!b&&t==="scroll",p=b?d!==null?d+"Capture":null:d;b=[];for(var g=u,y;g!==null;){y=g;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,p!==null&&(S=Sl(g,p),S!=null&&b.push(kl(g,S,y)))),_)break;g=g.return}0<b.length&&(d=new h(d,m,null,n,c),f.push({event:d,listeners:b}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==$p&&(m=n.relatedTarget||n.fromElement)&&(es(m)||m[Er]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=u,m=m?es(m):null,m!==null&&(_=Ns(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(b=A_,S="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(b=R_,S="onPointerLeave",p="onPointerEnter",g="pointer"),_=h==null?d:ao(h),y=m==null?d:ao(m),d=new b(S,g+"leave",h,n,c),d.target=_,d.relatedTarget=y,S=null,es(c)===u&&(b=new b(p,g+"enter",m,n,c),b.target=y,b.relatedTarget=_,S=b),_=S,h&&m)t:{for(b=h,p=m,g=0,y=b;y;y=zs(y))g++;for(y=0,S=p;S;S=zs(S))y++;for(;0<g-y;)b=zs(b),g--;for(;0<y-g;)p=zs(p),y--;for(;g--;){if(b===p||p!==null&&b===p.alternate)break t;b=zs(b),p=zs(p)}b=null}else b=null;h!==null&&H_(f,d,h,b,!1),m!==null&&_!==null&&H_(f,_,m,b,!0)}}e:{if(d=u?ao(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var T=Zk;else if(P_(d))if(dS)T=rE;else{T=tE;var v=eE}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=nE);if(T&&(T=T(t,u))){cS(f,T,n,c);break e}v&&v(t,d,u),t==="focusout"&&(v=d._wrapperState)&&v.controlled&&d.type==="number"&&Lp(d,"number",d.value)}switch(v=u?ao(u):window,t){case"focusin":(P_(v)||v.contentEditable==="true")&&(so=v,Yp=u,ul=null);break;case"focusout":ul=Yp=so=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,V_(f,n,c);break;case"selectionchange":if(oE)break;case"keydown":case"keyup":V_(f,n,c)}var w;if(Vy)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else io?lS(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(aS&&n.locale!=="ko"&&(io||M!=="onCompositionStart"?M==="onCompositionEnd"&&io&&(w=oS()):(ui=c,Ly="value"in ui?ui.value:ui.textContent,io=!0)),v=Yc(u,M),0<v.length&&(M=new N_(M,t,null,n,c),f.push({event:M,listeners:v}),w?M.data=w:(w=uS(n),w!==null&&(M.data=w)))),(w=Jk?Gk(t,n):Yk(t,n))&&(u=Yc(u,"onBeforeInput"),0<u.length&&(c=new N_("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=w))}SS(f,e)})}function kl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sl(t,n),s!=null&&r.unshift(kl(t,s,i)),s=Sl(t,e),s!=null&&r.push(kl(t,s,i))),t=t.return}return r}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function H_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Sl(n,s),l!=null&&o.unshift(kl(n,l,a))):i||(l=Sl(n,s),l!=null&&o.push(kl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(cE,`
`).replace(dE,"")}function Zu(t,e,n){if(e=W_(e),W_(t)!==e&&n)throw Error(j(425))}function Qc(){}var Xp=null,Zp=null;function em(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,fE=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,hE=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(t){return K_.resolve(null).then(t).catch(pE)}:tm;function pE(t){setTimeout(function(){throw t})}function Bh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Il(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Il(e)}function gi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function q_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),Qn="__reactFiber$"+ia,El="__reactProps$"+ia,Er="__reactContainer$"+ia,nm="__reactEvents$"+ia,mE="__reactListeners$"+ia,yE="__reactHandles$"+ia;function es(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Er]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=q_(t);t!==null;){if(n=t[Qn])return n;t=q_(t)}return e}t=n,n=t.parentNode}return null}function eu(t){return t=t[Qn]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ao(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Xd(t){return t[El]||null}var rm=[],lo=-1;function Ni(t){return{current:t}}function Oe(t){0>lo||(t.current=rm[lo],rm[lo]=null,lo--)}function we(t,e){lo++,rm[lo]=t.current,t.current=e}var Mi={},ht=Ni(Mi),Ct=Ni(!1),gs=Mi;function Ro(t,e){var n=t.type.contextTypes;if(!n)return Mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function Xc(){Oe(Ct),Oe(ht)}function J_(t,e,n){if(ht.current!==Mi)throw Error(j(168));we(ht,e),we(Ct,n)}function TS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,ek(t)||"Unknown",i));return Ae({},n,r)}function Zc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,gs=ht.current,we(ht,t),we(Ct,Ct.current),!0}function G_(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=TS(t,e,gs),r.__reactInternalMemoizedMergedChildContext=t,Oe(Ct),Oe(ht),we(ht,t)):Oe(Ct),we(Ct,n)}var _r=null,Zd=!1,Mh=!1;function IS(t){_r===null?_r=[t]:_r.push(t)}function gE(t){Zd=!0,IS(t)}function Ri(){if(!Mh&&_r!==null){Mh=!0;var t=0,e=me;try{var n=_r;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_r=null,Zd=!1}catch(i){throw _r!==null&&(_r=_r.slice(t+1)),G1(Cy,Ri),i}finally{me=e,Mh=!1}}return null}var uo=[],co=0,ed=null,td=0,ln=[],un=0,_s=null,vr=1,Sr="";function qi(t,e){uo[co++]=td,uo[co++]=ed,ed=t,td=e}function OS(t,e,n){ln[un++]=vr,ln[un++]=Sr,ln[un++]=_s,_s=t;var r=vr;t=Sr;var i=32-Fn(r)-1;r&=~(1<<i),n+=1;var s=32-Fn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,vr=1<<32-Fn(e)+i|n<<i|r,Sr=s+t}else vr=1<<s|n<<i|r,Sr=t}function $y(t){t.return!==null&&(qi(t,1),OS(t,1,0))}function Hy(t){for(;t===ed;)ed=uo[--co],uo[co]=null,td=uo[--co],uo[co]=null;for(;t===_s;)_s=ln[--un],ln[un]=null,Sr=ln[--un],ln[un]=null,vr=ln[--un],ln[un]=null}var Gt=null,Jt=null,Me=!1,En=null;function BS(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Y_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Jt=gi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_s!==null?{id:vr,overflow:Sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Jt=null,!0):!1;default:return!1}}function im(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sm(t){if(Me){var e=Jt;if(e){var n=e;if(!Y_(t,e)){if(im(t))throw Error(j(418));e=gi(n.nextSibling);var r=Gt;e&&Y_(t,e)?BS(r,n):(t.flags=t.flags&-4097|2,Me=!1,Gt=t)}}else{if(im(t))throw Error(j(418));t.flags=t.flags&-4097|2,Me=!1,Gt=t}}}function Q_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function ec(t){if(t!==Gt)return!1;if(!Me)return Q_(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!em(t.type,t.memoizedProps)),e&&(e=Jt)){if(im(t))throw MS(),Error(j(418));for(;e;)BS(t,e),e=gi(e.nextSibling)}if(Q_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=gi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Gt?gi(t.stateNode.nextSibling):null;return!0}function MS(){for(var t=Jt;t;)t=gi(t.nextSibling)}function Co(){Jt=Gt=null,Me=!1}function Wy(t){En===null?En=[t]:En.push(t)}var _E=Rr.ReactCurrentBatchConfig;function Ra(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function tc(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X_(t){var e=t._init;return e(t._payload)}function kS(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Si(p,g),p.index=0,p.sibling=null,p}function s(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,g,y,S){return g===null||g.tag!==6?(g=Ch(y,p.mode,S),g.return=p,g):(g=i(g,y),g.return=p,g)}function l(p,g,y,S){var T=y.type;return T===ro?c(p,g,y.props.children,S,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&X_(T)===g.type)?(S=i(g,y.props),S.ref=Ra(p,g,y),S.return=p,S):(S=Rc(y.type,y.key,y.props,null,p.mode,S),S.ref=Ra(p,g,y),S.return=p,S)}function u(p,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Fh(y,p.mode,S),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function c(p,g,y,S,T){return g===null||g.tag!==7?(g=us(y,p.mode,S,T),g.return=p,g):(g=i(g,y),g.return=p,g)}function f(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ch(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Hu:return y=Rc(g.type,g.key,g.props,null,p.mode,y),y.ref=Ra(p,null,g),y.return=p,y;case no:return g=Fh(g,p.mode,y),g.return=p,g;case Jr:var S=g._init;return f(p,S(g._payload),y)}if(Wa(g)||ka(g))return g=us(g,p.mode,y,null),g.return=p,g;tc(p,g)}return null}function d(p,g,y,S){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(p,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hu:return y.key===T?l(p,g,y,S):null;case no:return y.key===T?u(p,g,y,S):null;case Jr:return T=y._init,d(p,g,T(y._payload),S)}if(Wa(y)||ka(y))return T!==null?null:c(p,g,y,S,null);tc(p,y)}return null}function h(p,g,y,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(y)||null,a(g,p,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Hu:return p=p.get(S.key===null?y:S.key)||null,l(g,p,S,T);case no:return p=p.get(S.key===null?y:S.key)||null,u(g,p,S,T);case Jr:var v=S._init;return h(p,g,y,v(S._payload),T)}if(Wa(S)||ka(S))return p=p.get(y)||null,c(g,p,S,T,null);tc(g,S)}return null}function m(p,g,y,S){for(var T=null,v=null,w=g,M=g=0,F=null;w!==null&&M<y.length;M++){w.index>M?(F=w,w=null):F=w.sibling;var C=d(p,w,y[M],S);if(C===null){w===null&&(w=F);break}t&&w&&C.alternate===null&&e(p,w),g=s(C,g,M),v===null?T=C:v.sibling=C,v=C,w=F}if(M===y.length)return n(p,w),Me&&qi(p,M),T;if(w===null){for(;M<y.length;M++)w=f(p,y[M],S),w!==null&&(g=s(w,g,M),v===null?T=w:v.sibling=w,v=w);return Me&&qi(p,M),T}for(w=r(p,w);M<y.length;M++)F=h(w,p,M,y[M],S),F!==null&&(t&&F.alternate!==null&&w.delete(F.key===null?M:F.key),g=s(F,g,M),v===null?T=F:v.sibling=F,v=F);return t&&w.forEach(function(V){return e(p,V)}),Me&&qi(p,M),T}function b(p,g,y,S){var T=ka(y);if(typeof T!="function")throw Error(j(150));if(y=T.call(y),y==null)throw Error(j(151));for(var v=T=null,w=g,M=g=0,F=null,C=y.next();w!==null&&!C.done;M++,C=y.next()){w.index>M?(F=w,w=null):F=w.sibling;var V=d(p,w,C.value,S);if(V===null){w===null&&(w=F);break}t&&w&&V.alternate===null&&e(p,w),g=s(V,g,M),v===null?T=V:v.sibling=V,v=V,w=F}if(C.done)return n(p,w),Me&&qi(p,M),T;if(w===null){for(;!C.done;M++,C=y.next())C=f(p,C.value,S),C!==null&&(g=s(C,g,M),v===null?T=C:v.sibling=C,v=C);return Me&&qi(p,M),T}for(w=r(p,w);!C.done;M++,C=y.next())C=h(w,p,M,C.value,S),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?M:C.key),g=s(C,g,M),v===null?T=C:v.sibling=C,v=C);return t&&w.forEach(function(X){return e(p,X)}),Me&&qi(p,M),T}function _(p,g,y,S){if(typeof y=="object"&&y!==null&&y.type===ro&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Hu:e:{for(var T=y.key,v=g;v!==null;){if(v.key===T){if(T=y.type,T===ro){if(v.tag===7){n(p,v.sibling),g=i(v,y.props.children),g.return=p,p=g;break e}}else if(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&X_(T)===v.type){n(p,v.sibling),g=i(v,y.props),g.ref=Ra(p,v,y),g.return=p,p=g;break e}n(p,v);break}else e(p,v);v=v.sibling}y.type===ro?(g=us(y.props.children,p.mode,S,y.key),g.return=p,p=g):(S=Rc(y.type,y.key,y.props,null,p.mode,S),S.ref=Ra(p,g,y),S.return=p,p=S)}return o(p);case no:e:{for(v=y.key;g!==null;){if(g.key===v)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=i(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Fh(y,p.mode,S),g.return=p,p=g}return o(p);case Jr:return v=y._init,_(p,g,v(y._payload),S)}if(Wa(y))return m(p,g,y,S);if(ka(y))return b(p,g,y,S);tc(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,y),g.return=p,p=g):(n(p,g),g=Ch(y,p.mode,S),g.return=p,p=g),o(p)):n(p,g)}return _}var Fo=kS(!0),ES=kS(!1),nd=Ni(null),rd=null,fo=null,Ky=null;function qy(){Ky=fo=rd=null}function Jy(t){var e=nd.current;Oe(nd),t._currentValue=e}function om(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oo(t,e){rd=t,Ky=fo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(Ky!==t)if(t={context:t,memoizedValue:e,next:null},fo===null){if(rd===null)throw Error(j(308));fo=t,rd.dependencies={lanes:0,firstContext:t}}else fo=fo.next=t;return e}var ts=null;function Gy(t){ts===null?ts=[t]:ts.push(t)}function DS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Gy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dr(t,r)}function Dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gr=!1;function Yy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _i(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dr(t,n)}return i=r.interleaved,i===null?(e.next=e,Gy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dr(t,n)}function Mc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fy(t,n)}}function Z_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var i=t.updateQueue;Gr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,b=a;switch(d=e,h=n,b.tag){case 1:if(m=b.payload,typeof m=="function"){f=m.call(h,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,d=typeof m=="function"?m.call(h,f,d):m,d==null)break e;f=Ae({},f,d);break e;case 2:Gr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);vs|=o,t.lanes=o,t.memoizedState=f}}function e0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var tu={},rr=Ni(tu),Dl=Ni(tu),Al=Ni(tu);function ns(t){if(t===tu)throw Error(j(174));return t}function Qy(t,e){switch(we(Al,e),we(Dl,t),we(rr,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xp(e,t)}Oe(rr),we(rr,e)}function Po(){Oe(rr),Oe(Dl),Oe(Al)}function NS(t){ns(Al.current);var e=ns(rr.current),n=xp(e,t.type);e!==n&&(we(Dl,t),we(rr,n))}function Xy(t){Dl.current===t&&(Oe(rr),Oe(Dl))}var Ee=Ni(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kh=[];function Zy(){for(var t=0;t<kh.length;t++)kh[t]._workInProgressVersionPrimary=null;kh.length=0}var kc=Rr.ReactCurrentDispatcher,Eh=Rr.ReactCurrentBatchConfig,bs=0,De=null,He=null,Je=null,od=!1,cl=!1,Nl=0,bE=0;function ut(){throw Error(j(321))}function eg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function tg(t,e,n,r,i,s){if(bs=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kc.current=t===null||t.memoizedState===null?TE:IE,t=n(r,i),cl){s=0;do{if(cl=!1,Nl=0,25<=s)throw Error(j(301));s+=1,Je=He=null,e.updateQueue=null,kc.current=OE,t=n(r,i)}while(cl)}if(kc.current=ad,e=He!==null&&He.next!==null,bs=0,Je=He=De=null,od=!1,e)throw Error(j(300));return t}function ng(){var t=Nl!==0;return Nl=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?De.memoizedState=Je=t:Je=Je.next=t,Je}function _n(){if(He===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?De.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error(j(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?De.memoizedState=Je=t:Je=Je.next=t}return Je}function Rl(t,e){return typeof e=="function"?e(t):e}function Dh(t){var e=_n(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((bs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,De.lanes|=c,vs|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Un(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,vs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ah(t){var e=_n(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Un(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function RS(){}function CS(t,e){var n=De,r=_n(),i=e(),s=!Un(r.memoizedState,i);if(s&&(r.memoizedState=i,Rt=!0),r=r.queue,rg(jS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Cl(9,PS.bind(null,n,r,i,e),void 0,null),Ye===null)throw Error(j(349));bs&30||FS(n,e,i)}return i}function FS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PS(t,e,n,r){e.value=n,e.getSnapshot=r,LS(e)&&US(t)}function jS(t,e,n){return n(function(){LS(e)&&US(t)})}function LS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function US(t){var e=Dr(t,1);e!==null&&Pn(e,t,1,-1)}function t0(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:t},e.queue=t,t=t.dispatch=wE.bind(null,De,t),[e.memoizedState,t]}function Cl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xS(){return _n().memoizedState}function Ec(t,e,n,r){var i=qn();De.flags|=t,i.memoizedState=Cl(1|e,n,void 0,r===void 0?null:r)}function ef(t,e,n,r){var i=_n();r=r===void 0?null:r;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,r!==null&&eg(r,o.deps)){i.memoizedState=Cl(e,n,s,r);return}}De.flags|=t,i.memoizedState=Cl(1|e,n,s,r)}function n0(t,e){return Ec(8390656,8,t,e)}function rg(t,e){return ef(2048,8,t,e)}function VS(t,e){return ef(4,2,t,e)}function zS(t,e){return ef(4,4,t,e)}function $S(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HS(t,e,n){return n=n!=null?n.concat([t]):null,ef(4,4,$S.bind(null,e,t),n)}function ig(){}function WS(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KS(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qS(t,e,n){return bs&21?(Un(n,e)||(n=X1(),De.lanes|=n,vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function vE(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=Eh.transition;Eh.transition={};try{t(!1),e()}finally{me=n,Eh.transition=r}}function JS(){return _n().memoizedState}function SE(t,e,n){var r=vi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GS(t))YS(e,n);else if(n=DS(t,e,n,r),n!==null){var i=wt();Pn(n,t,r,i),QS(n,e,r)}}function wE(t,e,n){var r=vi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GS(t))YS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Un(a,o)){var l=e.interleaved;l===null?(i.next=i,Gy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=DS(t,e,i,r),n!==null&&(i=wt(),Pn(n,t,r,i),QS(n,e,r))}}function GS(t){var e=t.alternate;return t===De||e!==null&&e===De}function YS(t,e){cl=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fy(t,n)}}var ad={readContext:gn,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},TE={readContext:gn,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:n0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4194308,4,$S.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ec(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SE.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:t0,useDebugValue:ig,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=t0(!1),e=t[0];return t=vE.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=qn();if(Me){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Ye===null)throw Error(j(349));bs&30||FS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,n0(jS.bind(null,r,s,t),[t]),r.flags|=2048,Cl(9,PS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qn(),e=Ye.identifierPrefix;if(Me){var n=Sr,r=vr;n=(r&~(1<<32-Fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IE={readContext:gn,useCallback:WS,useContext:gn,useEffect:rg,useImperativeHandle:HS,useInsertionEffect:VS,useLayoutEffect:zS,useMemo:KS,useReducer:Dh,useRef:xS,useState:function(){return Dh(Rl)},useDebugValue:ig,useDeferredValue:function(t){var e=_n();return qS(e,He.memoizedState,t)},useTransition:function(){var t=Dh(Rl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:RS,useSyncExternalStore:CS,useId:JS,unstable_isNewReconciler:!1},OE={readContext:gn,useCallback:WS,useContext:gn,useEffect:rg,useImperativeHandle:HS,useInsertionEffect:VS,useLayoutEffect:zS,useMemo:KS,useReducer:Ah,useRef:xS,useState:function(){return Ah(Rl)},useDebugValue:ig,useDeferredValue:function(t){var e=_n();return He===null?e.memoizedState=t:qS(e,He.memoizedState,t)},useTransition:function(){var t=Ah(Rl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:RS,useSyncExternalStore:CS,useId:JS,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function am(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tf={isMounted:function(t){return(t=t._reactInternals)?Ns(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=vi(t),s=wr(r,i);s.payload=e,n!=null&&(s.callback=n),e=_i(t,s,i),e!==null&&(Pn(e,t,i,r),Mc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=vi(t),s=wr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_i(t,s,i),e!==null&&(Pn(e,t,i,r),Mc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=vi(t),i=wr(n,r);i.tag=2,e!=null&&(i.callback=e),e=_i(t,i,r),e!==null&&(Pn(e,t,r,n),Mc(e,t,r))}};function r0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Bl(n,r)||!Bl(i,s):!0}function XS(t,e,n){var r=!1,i=Mi,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=Ft(e)?gs:ht.current,r=e.contextTypes,s=(r=r!=null)?Ro(t,i):Mi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function i0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tf.enqueueReplaceState(e,e.state,null)}function lm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=Ft(e)?gs:ht.current,i.context=Ro(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(am(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&tf.enqueueReplaceState(i,i.state,null),id(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function jo(t,e){try{var n="",r=e;do n+=ZM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Nh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function um(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BE=typeof WeakMap=="function"?WeakMap:Map;function ZS(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ud||(ud=!0,bm=r),um(t,e)},n}function ew(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){um(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){um(t,e),typeof r!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function s0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xE.bind(null,t,e,n),e.then(t,t))}function o0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function a0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,_i(n,e,1))),n.lanes|=1),t)}var ME=Rr.ReactCurrentOwner,Rt=!1;function _t(t,e,n,r){e.child=t===null?ES(e,null,n,r):Fo(e,t.child,n,r)}function l0(t,e,n,r,i){n=n.render;var s=e.ref;return Oo(e,i),r=tg(t,e,n,r,s,i),n=ng(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(Me&&n&&$y(e),e.flags|=1,_t(t,e,r,i),e.child)}function u0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!fg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tw(t,e,s,r,i)):(t=Rc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bl,n(o,r)&&t.ref===e.ref)return Ar(t,e,i)}return e.flags|=1,t=Si(s,r),t.ref=e.ref,t.return=e,e.child=t}function tw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Bl(s,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Ar(t,e,i)}return cm(t,e,n,r,i)}function nw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(po,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(po,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(po,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,we(po,$t),$t|=r;return _t(t,e,i,n),e.child}function rw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cm(t,e,n,r,i){var s=Ft(n)?gs:ht.current;return s=Ro(e,s),Oo(e,i),n=tg(t,e,n,r,s,i),r=ng(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(Me&&r&&$y(e),e.flags|=1,_t(t,e,n,i),e.child)}function c0(t,e,n,r,i){if(Ft(n)){var s=!0;Zc(e)}else s=!1;if(Oo(e,i),e.stateNode===null)Dc(t,e),XS(e,n,r),lm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gn(u):(u=Ft(n)?gs:ht.current,u=Ro(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&i0(e,o,r,u),Gr=!1;var d=e.memoizedState;o.state=d,id(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Ct.current||Gr?(typeof c=="function"&&(am(e,n,c,r),l=e.memoizedState),(a=Gr||r0(e,n,a,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,AS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Mn(e.type,a),o.props=u,f=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gn(l):(l=Ft(n)?gs:ht.current,l=Ro(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&i0(e,o,r,l),Gr=!1,d=e.memoizedState,o.state=d,id(e,r,o,i);var m=e.memoizedState;a!==f||d!==m||Ct.current||Gr?(typeof h=="function"&&(am(e,n,h,r),m=e.memoizedState),(u=Gr||r0(e,n,u,r,d,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return dm(t,e,n,r,s,i)}function dm(t,e,n,r,i,s){rw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&G_(e,n,!1),Ar(t,e,s);r=e.stateNode,ME.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fo(e,t.child,null,s),e.child=Fo(e,null,a,s)):_t(t,e,a,s),e.memoizedState=r.state,i&&G_(e,n,!0),e.child}function iw(t){var e=t.stateNode;e.pendingContext?J_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&J_(t,e.context,!1),Qy(t,e.containerInfo)}function d0(t,e,n,r,i){return Co(),Wy(i),e.flags|=256,_t(t,e,n,r),e.child}var fm={dehydrated:null,treeContext:null,retryLane:0};function hm(t){return{baseLanes:t,cachePool:null,transitions:null}}function sw(t,e,n){var r=e.pendingProps,i=Ee.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),we(Ee,i&1),t===null)return sm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sf(o,r,0,null),t=us(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hm(n),e.memoizedState=fm,t):sg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kE(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Si(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Si(a,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=fm,r}return s=t.child,t=s.sibling,r=Si(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sg(t,e){return e=sf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nc(t,e,n,r){return r!==null&&Wy(r),Fo(e,t.child,null,n),t=sg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Nh(Error(j(422))),nc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sf({mode:"visible",children:r.children},i,0,null),s=us(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fo(e,t.child,null,o),e.child.memoizedState=hm(o),e.memoizedState=fm,s);if(!(e.mode&1))return nc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(j(419)),r=Nh(s,r,void 0),nc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rt||a){if(r=Ye,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dr(t,i),Pn(r,t,i,-1))}return dg(),r=Nh(Error(j(421))),nc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jt=gi(i.nextSibling),Gt=e,Me=!0,En=null,t!==null&&(ln[un++]=vr,ln[un++]=Sr,ln[un++]=_s,vr=t.id,Sr=t.overflow,_s=e),e=sg(e,r.children),e.flags|=4096,e)}function f0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),om(t.return,e,n)}function Rh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ow(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(_t(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,n,e);else if(t.tag===19)f0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rh(e,!0,n,null,s);break;case"together":Rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EE(t,e,n){switch(e.tag){case 3:iw(e),Co();break;case 5:NS(e);break;case 1:Ft(e.type)&&Zc(e);break;case 4:Qy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;we(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?sw(t,e,n):(we(Ee,Ee.current&1),t=Ar(t,e,n),t!==null?t.sibling:null);we(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ow(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,nw(t,e,n)}return Ar(t,e,n)}var aw,pm,lw,uw;aw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pm=function(){};lw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ns(rr.current);var s=null;switch(n){case"input":i=Pp(t,i),r=Pp(t,r),s=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),s=[];break;case"textarea":i=Up(t,i),r=Up(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qc)}Vp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Te("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};uw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ca(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DE(t,e,n){var r=e.pendingProps;switch(Hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Ft(e.type)&&Xc(),ct(e),null;case 3:return r=e.stateNode,Po(),Oe(Ct),Oe(ht),Zy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&(wm(En),En=null))),pm(t,e),ct(e),null;case 5:Xy(e);var i=ns(Al.current);if(n=e.type,t!==null&&e.stateNode!=null)lw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return ct(e),null}if(t=ns(rr.current),ec(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qn]=e,r[El]=s,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(i=0;i<qa.length;i++)Te(qa[i],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":S_(r,s),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Te("invalid",r);break;case"textarea":T_(r,s),Te("invalid",r)}Vp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zu(r.textContent,a,t),i=["children",""+a]):bl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Wu(r),w_(r,s,!0);break;case"textarea":Wu(r),I_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Qc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=j1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qn]=e,t[El]=r,aw(t,e,!1,!1),e.stateNode=t;e:{switch(o=zp(n,r),n){case"dialog":Te("cancel",t),Te("close",t),i=r;break;case"iframe":case"object":case"embed":Te("load",t),i=r;break;case"video":case"audio":for(i=0;i<qa.length;i++)Te(qa[i],t);i=r;break;case"source":Te("error",t),i=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),i=r;break;case"details":Te("toggle",t),i=r;break;case"input":S_(t,r),i=Pp(t,r),Te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),Te("invalid",t);break;case"textarea":T_(t,r),i=Up(t,r),Te("invalid",t);break;default:i=r}Vp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?x1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&L1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vl(t,l):typeof l=="number"&&vl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Te("scroll",t):l!=null&&Ey(t,s,l,o))}switch(n){case"input":Wu(t),w_(t,r,!1);break;case"textarea":Wu(t),I_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?So(t,!!r.multiple,s,!1):r.defaultValue!=null&&So(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)uw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=ns(Al.current),ns(rr.current),ec(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(s=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:Zu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return ct(e),null;case 13:if(Oe(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Jt!==null&&e.mode&1&&!(e.flags&128))MS(),Co(),e.flags|=98560,s=!1;else if(s=ec(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Qn]=e}else Co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),s=!1}else En!==null&&(wm(En),En=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Ke===0&&(Ke=3):dg())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return Po(),pm(t,e),t===null&&Ml(e.stateNode.containerInfo),ct(e),null;case 10:return Jy(e.type._context),ct(e),null;case 17:return Ft(e.type)&&Xc(),ct(e),null;case 19:if(Oe(Ee),s=e.memoizedState,s===null)return ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ca(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sd(t),o!==null){for(e.flags|=128,Ca(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ee,Ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ue()>Lo&&(e.flags|=128,r=!0,Ca(s,!1),e.lanes=4194304)}else{if(!r)if(t=sd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ca(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return ct(e),null}else 2*Ue()-s.renderingStartTime>Lo&&n!==1073741824&&(e.flags|=128,r=!0,Ca(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ue(),e.sibling=null,n=Ee.current,we(Ee,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return cg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function AE(t,e){switch(Hy(e),e.tag){case 1:return Ft(e.type)&&Xc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Po(),Oe(Ct),Oe(ht),Zy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xy(e),null;case 13:if(Oe(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Ee),null;case 4:return Po(),null;case 10:return Jy(e.type._context),null;case 22:case 23:return cg(),null;case 24:return null;default:return null}}var rc=!1,ft=!1,NE=typeof WeakSet=="function"?WeakSet:Set,H=null;function ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function mm(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var h0=!1;function RE(t,e){if(Xp=Jc,t=pS(),zy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zp={focusedElem:t,selectionRange:n},Jc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,_=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:Mn(e.type,b),_);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(S){Ce(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return m=h0,h0=!1,m}function dl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mm(e,n,s)}i=i.next}while(i!==r)}}function nf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cw(t){var e=t.alternate;e!==null&&(t.alternate=null,cw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[El],delete e[nm],delete e[mE],delete e[yE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dw(t){return t.tag===5||t.tag===3||t.tag===4}function p0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qc));else if(r!==4&&(t=t.child,t!==null))for(gm(t,e,n),t=t.sibling;t!==null;)gm(t,e,n),t=t.sibling}function _m(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_m(t,e,n),t=t.sibling;t!==null;)_m(t,e,n),t=t.sibling}var tt=null,kn=!1;function zr(t,e,n){for(n=n.child;n!==null;)fw(t,e,n),n=n.sibling}function fw(t,e,n){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(Jd,n)}catch{}switch(n.tag){case 5:ft||ho(n,e);case 6:var r=tt,i=kn;tt=null,zr(t,e,n),tt=r,kn=i,tt!==null&&(kn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(kn?(t=tt,n=n.stateNode,t.nodeType===8?Bh(t.parentNode,n):t.nodeType===1&&Bh(t,n),Il(t)):Bh(tt,n.stateNode));break;case 4:r=tt,i=kn,tt=n.stateNode.containerInfo,kn=!0,zr(t,e,n),tt=r,kn=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mm(n,e,o),i=i.next}while(i!==r)}zr(t,e,n);break;case 1:if(!ft&&(ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ce(n,e,a)}zr(t,e,n);break;case 21:zr(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,zr(t,e,n),ft=r):zr(t,e,n);break;default:zr(t,e,n)}}function m0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NE),e.forEach(function(r){var i=zE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:tt=a.stateNode,kn=!1;break e;case 3:tt=a.stateNode.containerInfo,kn=!0;break e;case 4:tt=a.stateNode.containerInfo,kn=!0;break e}a=a.return}if(tt===null)throw Error(j(160));fw(s,o,i),tt=null,kn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hw(e,t),e=e.sibling}function hw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),Hn(t),r&4){try{dl(3,t,t.return),nf(3,t)}catch(b){Ce(t,t.return,b)}try{dl(5,t,t.return)}catch(b){Ce(t,t.return,b)}}break;case 1:Tn(e,t),Hn(t),r&512&&n!==null&&ho(n,n.return);break;case 5:if(Tn(e,t),Hn(t),r&512&&n!==null&&ho(n,n.return),t.flags&32){var i=t.stateNode;try{vl(i,"")}catch(b){Ce(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&F1(i,s),zp(a,o);var u=zp(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?x1(i,f):c==="dangerouslySetInnerHTML"?L1(i,f):c==="children"?vl(i,f):Ey(i,c,f,u)}switch(a){case"input":jp(i,s);break;case"textarea":P1(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?So(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?So(i,!!s.multiple,s.defaultValue,!0):So(i,!!s.multiple,s.multiple?[]:"",!1))}i[El]=s}catch(b){Ce(t,t.return,b)}}break;case 6:if(Tn(e,t),Hn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){Ce(t,t.return,b)}}break;case 3:if(Tn(e,t),Hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Il(e.containerInfo)}catch(b){Ce(t,t.return,b)}break;case 4:Tn(e,t),Hn(t);break;case 13:Tn(e,t),Hn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lg=Ue())),r&4&&m0(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(u=ft)||c,Tn(e,t),ft=u):Tn(e,t),Hn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(H=t,c=t.child;c!==null;){for(f=H=c;H!==null;){switch(d=H,h=d.child,d.tag){case 0:case 11:case 14:case 15:dl(4,d,d.return);break;case 1:ho(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(b){Ce(r,n,b)}}break;case 5:ho(d,d.return);break;case 22:if(d.memoizedState!==null){g0(f);continue}}h!==null?(h.return=d,H=h):g0(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=U1("display",o))}catch(b){Ce(t,t.return,b)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){Ce(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tn(e,t),Hn(t),r&4&&m0(t);break;case 21:break;default:Tn(e,t),Hn(t)}}function Hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dw(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vl(i,""),r.flags&=-33);var s=p0(t);_m(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=p0(t);gm(t,a,o);break;default:throw Error(j(161))}}catch(l){Ce(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CE(t,e,n){H=t,pw(t)}function pw(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||rc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ft;a=rc;var u=ft;if(rc=o,(ft=l)&&!u)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?_0(i):l!==null?(l.return=o,H=l):_0(i);for(;s!==null;)H=s,pw(s),s=s.sibling;H=i,rc=a,ft=u}y0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):y0(t)}}function y0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||nf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&e0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Il(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}ft||e.flags&512&&ym(e)}catch(d){Ce(e,e.return,d)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function g0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function _0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nf(4,e)}catch(l){Ce(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ce(e,i,l)}}var s=e.return;try{ym(e)}catch(l){Ce(e,s,l)}break;case 5:var o=e.return;try{ym(e)}catch(l){Ce(e,o,l)}}}catch(l){Ce(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var FE=Math.ceil,ld=Rr.ReactCurrentDispatcher,og=Rr.ReactCurrentOwner,hn=Rr.ReactCurrentBatchConfig,le=0,Ye=null,ze=null,ot=0,$t=0,po=Ni(0),Ke=0,Fl=null,vs=0,rf=0,ag=0,fl=null,Nt=null,lg=0,Lo=1/0,yr=null,ud=!1,bm=null,bi=null,ic=!1,ci=null,cd=0,hl=0,vm=null,Ac=-1,Nc=0;function wt(){return le&6?Ue():Ac!==-1?Ac:Ac=Ue()}function vi(t){return t.mode&1?le&2&&ot!==0?ot&-ot:_E.transition!==null?(Nc===0&&(Nc=X1()),Nc):(t=me,t!==0||(t=window.event,t=t===void 0?16:sS(t.type)),t):1}function Pn(t,e,n,r){if(50<hl)throw hl=0,vm=null,Error(j(185));Xl(t,n,r),(!(le&2)||t!==Ye)&&(t===Ye&&(!(le&2)&&(rf|=n),Ke===4&&ai(t,ot)),Pt(t,r),n===1&&le===0&&!(e.mode&1)&&(Lo=Ue()+500,Zd&&Ri()))}function Pt(t,e){var n=t.callbackNode;_k(t,e);var r=qc(t,t===Ye?ot:0);if(r===0)n!==null&&M_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&M_(n),e===1)t.tag===0?gE(b0.bind(null,t)):IS(b0.bind(null,t)),hE(function(){!(le&6)&&Ri()}),n=null;else{switch(Z1(r)){case 1:n=Cy;break;case 4:n=Y1;break;case 16:n=Kc;break;case 536870912:n=Q1;break;default:n=Kc}n=ww(n,mw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mw(t,e){if(Ac=-1,Nc=0,le&6)throw Error(j(327));var n=t.callbackNode;if(Bo()&&t.callbackNode!==n)return null;var r=qc(t,t===Ye?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dd(t,r);else{e=r;var i=le;le|=2;var s=gw();(Ye!==t||ot!==e)&&(yr=null,Lo=Ue()+500,ls(t,e));do try{LE();break}catch(a){yw(t,a)}while(!0);qy(),ld.current=s,le=i,ze!==null?e=0:(Ye=null,ot=0,e=Ke)}if(e!==0){if(e===2&&(i=qp(t),i!==0&&(r=i,e=Sm(t,i))),e===1)throw n=Fl,ls(t,0),ai(t,r),Pt(t,Ue()),n;if(e===6)ai(t,r);else{if(i=t.current.alternate,!(r&30)&&!PE(i)&&(e=dd(t,r),e===2&&(s=qp(t),s!==0&&(r=s,e=Sm(t,s))),e===1))throw n=Fl,ls(t,0),ai(t,r),Pt(t,Ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Ji(t,Nt,yr);break;case 3:if(ai(t,r),(r&130023424)===r&&(e=lg+500-Ue(),10<e)){if(qc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tm(Ji.bind(null,t,Nt,yr),e);break}Ji(t,Nt,yr);break;case 4:if(ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FE(r/1960))-r,10<r){t.timeoutHandle=tm(Ji.bind(null,t,Nt,yr),r);break}Ji(t,Nt,yr);break;case 5:Ji(t,Nt,yr);break;default:throw Error(j(329))}}}return Pt(t,Ue()),t.callbackNode===n?mw.bind(null,t):null}function Sm(t,e){var n=fl;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=dd(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&wm(e)),t}function wm(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function PE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Un(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ai(t,e){for(e&=~ag,e&=~rf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),r=1<<n;t[n]=-1,e&=~r}}function b0(t){if(le&6)throw Error(j(327));Bo();var e=qc(t,0);if(!(e&1))return Pt(t,Ue()),null;var n=dd(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=Sm(t,r))}if(n===1)throw n=Fl,ls(t,0),ai(t,e),Pt(t,Ue()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ji(t,Nt,yr),Pt(t,Ue()),null}function ug(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Lo=Ue()+500,Zd&&Ri())}}function Ss(t){ci!==null&&ci.tag===0&&!(le&6)&&Bo();var e=le;le|=1;var n=hn.transition,r=me;try{if(hn.transition=null,me=1,t)return t()}finally{me=r,hn.transition=n,le=e,!(le&6)&&Ri()}}function cg(){$t=po.current,Oe(po)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fE(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xc();break;case 3:Po(),Oe(Ct),Oe(ht),Zy();break;case 5:Xy(r);break;case 4:Po();break;case 13:Oe(Ee);break;case 19:Oe(Ee);break;case 10:Jy(r.type._context);break;case 22:case 23:cg()}n=n.return}if(Ye=t,ze=t=Si(t.current,null),ot=$t=e,Ke=0,Fl=null,ag=rf=vs=0,Nt=fl=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ts=null}return t}function yw(t,e){do{var n=ze;try{if(qy(),kc.current=ad,od){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}od=!1}if(bs=0,Je=He=De=null,cl=!1,Nl=0,og.current=null,n===null||n.return===null){Ke=1,Fl=e,ze=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=o0(o);if(h!==null){h.flags&=-257,a0(h,o,a,s,e),h.mode&1&&s0(s,u,e),e=h,l=u;var m=e.updateQueue;if(m===null){var b=new Set;b.add(l),e.updateQueue=b}else m.add(l);break e}else{if(!(e&1)){s0(s,u,e),dg();break e}l=Error(j(426))}}else if(Me&&a.mode&1){var _=o0(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),a0(_,o,a,s,e),Wy(jo(l,a));break e}}s=l=jo(l,a),Ke!==4&&(Ke=2),fl===null?fl=[s]:fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=ZS(s,l,e);Z_(s,p);break e;case 1:a=l;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(bi===null||!bi.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=ew(s,a,e);Z_(s,S);break e}}s=s.return}while(s!==null)}bw(n)}catch(T){e=T,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function gw(){var t=ld.current;return ld.current=ad,t===null?ad:t}function dg(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ye===null||!(vs&268435455)&&!(rf&268435455)||ai(Ye,ot)}function dd(t,e){var n=le;le|=2;var r=gw();(Ye!==t||ot!==e)&&(yr=null,ls(t,e));do try{jE();break}catch(i){yw(t,i)}while(!0);if(qy(),le=n,ld.current=r,ze!==null)throw Error(j(261));return Ye=null,ot=0,Ke}function jE(){for(;ze!==null;)_w(ze)}function LE(){for(;ze!==null&&!uk();)_w(ze)}function _w(t){var e=Sw(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?bw(t):ze=e,og.current=null}function bw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AE(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,ze=null;return}}else if(n=DE(n,e,$t),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Ke===0&&(Ke=5)}function Ji(t,e,n){var r=me,i=hn.transition;try{hn.transition=null,me=1,UE(t,e,n,r)}finally{hn.transition=i,me=r}return null}function UE(t,e,n,r){do Bo();while(ci!==null);if(le&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bk(t,s),t===Ye&&(ze=Ye=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ic||(ic=!0,ww(Kc,function(){return Bo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hn.transition,hn.transition=null;var o=me;me=1;var a=le;le|=4,og.current=null,RE(t,n),hw(n,t),sE(Zp),Jc=!!Xp,Zp=Xp=null,t.current=n,CE(n),ck(),le=a,me=o,hn.transition=s}else t.current=n;if(ic&&(ic=!1,ci=t,cd=i),s=t.pendingLanes,s===0&&(bi=null),hk(n.stateNode),Pt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,t=bm,bm=null,t;return cd&1&&t.tag!==0&&Bo(),s=t.pendingLanes,s&1?t===vm?hl++:(hl=0,vm=t):hl=0,Ri(),null}function Bo(){if(ci!==null){var t=Z1(cd),e=hn.transition,n=me;try{if(hn.transition=null,me=16>t?16:t,ci===null)var r=!1;else{if(t=ci,ci=null,cd=0,le&6)throw Error(j(331));var i=le;for(le|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(H=u;H!==null;){var c=H;switch(c.tag){case 0:case 11:case 15:dl(8,c,s)}var f=c.child;if(f!==null)f.return=c,H=f;else for(;H!==null;){c=H;var d=c.sibling,h=c.return;if(cw(c),c===u){H=null;break}if(d!==null){d.return=h,H=d;break}H=h}}}var m=s.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,H=p;break e}H=s.return}}var g=t.current;for(H=g;H!==null;){o=H;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,H=y;else e:for(o=g;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nf(9,a)}}catch(T){Ce(a,a.return,T)}if(a===o){H=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,H=S;break e}H=a.return}}if(le=i,Ri(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(Jd,t)}catch{}r=!0}return r}finally{me=n,hn.transition=e}}return!1}function v0(t,e,n){e=jo(n,e),e=ZS(t,e,1),t=_i(t,e,1),e=wt(),t!==null&&(Xl(t,1,e),Pt(t,e))}function Ce(t,e,n){if(t.tag===3)v0(t,t,n);else for(;e!==null;){if(e.tag===3){v0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bi===null||!bi.has(r))){t=jo(n,t),t=ew(e,t,1),e=_i(e,t,1),t=wt(),e!==null&&(Xl(e,1,t),Pt(e,t));break}}e=e.return}}function xE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(ot&n)===n&&(Ke===4||Ke===3&&(ot&130023424)===ot&&500>Ue()-lg?ls(t,0):ag|=n),Pt(t,e)}function vw(t,e){e===0&&(t.mode&1?(e=Ju,Ju<<=1,!(Ju&130023424)&&(Ju=4194304)):e=1);var n=wt();t=Dr(t,e),t!==null&&(Xl(t,e,n),Pt(t,n))}function VE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vw(t,n)}function zE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),vw(t,n)}var Sw;Sw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,EE(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Me&&e.flags&1048576&&OS(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dc(t,e),t=e.pendingProps;var i=Ro(e,ht.current);Oo(e,n),i=tg(null,e,r,t,i,n);var s=ng();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(s=!0,Zc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yy(e),i.updater=tf,e.stateNode=i,i._reactInternals=e,lm(e,r,t,n),e=dm(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&$y(e),_t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HE(r),t=Mn(r,t),i){case 0:e=cm(null,e,r,t,n);break e;case 1:e=c0(null,e,r,t,n);break e;case 11:e=l0(null,e,r,t,n);break e;case 14:e=u0(null,e,r,Mn(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),cm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),c0(t,e,r,i,n);case 3:e:{if(iw(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,AS(t,e),id(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=jo(Error(j(423)),e),e=d0(t,e,r,n,i);break e}else if(r!==i){i=jo(Error(j(424)),e),e=d0(t,e,r,n,i);break e}else for(Jt=gi(e.stateNode.containerInfo.firstChild),Gt=e,Me=!0,En=null,n=ES(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Co(),r===i){e=Ar(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return NS(e),t===null&&sm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,em(r,i)?o=null:s!==null&&em(r,s)&&(e.flags|=32),rw(t,e),_t(t,e,o,n),e.child;case 6:return t===null&&sm(e),null;case 13:return sw(t,e,n);case 4:return Qy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fo(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),l0(t,e,r,i,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,we(nd,r._currentValue),r._currentValue=o,s!==null)if(Un(s.value,o)){if(s.children===i.children&&!Ct.current){e=Ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=wr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),om(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),om(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oo(e,n),i=gn(i),r=r(i),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,i=Mn(r,e.pendingProps),i=Mn(r.type,i),u0(t,e,r,i,n);case 15:return tw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),Dc(t,e),e.tag=1,Ft(r)?(t=!0,Zc(e)):t=!1,Oo(e,n),XS(e,r,i),lm(e,r,i,n),dm(null,e,r,!0,t,n);case 19:return ow(t,e,n);case 22:return nw(t,e,n)}throw Error(j(156,e.tag))};function ww(t,e){return G1(t,e)}function $E(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new $E(t,e,n,r)}function fg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HE(t){if(typeof t=="function")return fg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ay)return 11;if(t===Ny)return 14}return 2}function Si(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")fg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ro:return us(n.children,i,s,e);case Dy:o=8,i|=8;break;case Np:return t=cn(12,n,e,i|2),t.elementType=Np,t.lanes=s,t;case Rp:return t=cn(13,n,e,i),t.elementType=Rp,t.lanes=s,t;case Cp:return t=cn(19,n,e,i),t.elementType=Cp,t.lanes=s,t;case N1:return sf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D1:o=10;break e;case A1:o=9;break e;case Ay:o=11;break e;case Ny:o=14;break e;case Jr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function us(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function sf(t,e,n,r){return t=cn(22,t,r,e),t.elementType=N1,t.lanes=n,t.stateNode={isHidden:!1},t}function Ch(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function Fh(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mh(0),this.expirationTimes=mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hg(t,e,n,r,i,s,o,a,l){return t=new WE(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yy(s),t}function KE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:no,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tw(t){if(!t)return Mi;t=t._reactInternals;e:{if(Ns(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Ft(n))return TS(t,n,e)}return e}function Iw(t,e,n,r,i,s,o,a,l){return t=hg(n,r,!0,t,i,s,o,a,l),t.context=Tw(null),n=t.current,r=wt(),i=vi(n),s=wr(r,i),s.callback=e??null,_i(n,s,i),t.current.lanes=i,Xl(t,i,r),Pt(t,r),t}function of(t,e,n,r){var i=e.current,s=wt(),o=vi(i);return n=Tw(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_i(i,e,o),t!==null&&(Pn(t,i,o,s),Mc(t,i,o)),o}function fd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function S0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pg(t,e){S0(t,e),(t=t.alternate)&&S0(t,e)}function qE(){return null}var Ow=typeof reportError=="function"?reportError:function(t){console.error(t)};function mg(t){this._internalRoot=t}af.prototype.render=mg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));of(t,e,null,null)};af.prototype.unmount=mg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){of(null,t,null,null)}),e[Er]=null}};function af(t){this._internalRoot=t}af.prototype.unstable_scheduleHydration=function(t){if(t){var e=nS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oi.length&&e!==0&&e<oi[n].priority;n++);oi.splice(n,0,t),n===0&&iS(t)}};function yg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function w0(){}function JE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=fd(o);s.call(u)}}var o=Iw(e,r,t,0,null,!1,!1,"",w0);return t._reactRootContainer=o,t[Er]=o.current,Ml(t.nodeType===8?t.parentNode:t),Ss(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=fd(l);a.call(u)}}var l=hg(t,0,!1,null,null,!1,!1,"",w0);return t._reactRootContainer=l,t[Er]=l.current,Ml(t.nodeType===8?t.parentNode:t),Ss(function(){of(e,l,n,r)}),l}function uf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=fd(o);a.call(l)}}of(e,o,t,i)}else o=JE(n,e,t,i,r);return fd(o)}eS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ka(e.pendingLanes);n!==0&&(Fy(e,n|1),Pt(e,Ue()),!(le&6)&&(Lo=Ue()+500,Ri()))}break;case 13:Ss(function(){var r=Dr(t,1);if(r!==null){var i=wt();Pn(r,t,1,i)}}),pg(t,1)}};Py=function(t){if(t.tag===13){var e=Dr(t,134217728);if(e!==null){var n=wt();Pn(e,t,134217728,n)}pg(t,134217728)}};tS=function(t){if(t.tag===13){var e=vi(t),n=Dr(t,e);if(n!==null){var r=wt();Pn(n,t,e,r)}pg(t,e)}};nS=function(){return me};rS=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Hp=function(t,e,n){switch(e){case"input":if(jp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xd(r);if(!i)throw Error(j(90));C1(r),jp(r,i)}}}break;case"textarea":P1(t,n);break;case"select":e=n.value,e!=null&&So(t,!!n.multiple,e,!1)}};$1=ug;H1=Ss;var GE={usingClientEntryPoint:!1,Events:[eu,ao,Xd,V1,z1,ug]},Fa={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YE={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q1(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||qE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{Jd=sc.inject(YE),nr=sc}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GE;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yg(e))throw Error(j(200));return KE(t,e,null,n)};Xt.createRoot=function(t,e){if(!yg(t))throw Error(j(299));var n=!1,r="",i=Ow;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hg(t,1,!1,null,null,n,!1,r,i),t[Er]=e.current,Ml(t.nodeType===8?t.parentNode:t),new mg(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=q1(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return Ss(t)};Xt.hydrate=function(t,e,n){if(!lf(e))throw Error(j(200));return uf(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!yg(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ow;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Iw(e,null,t,1,n??null,i,!1,s,o),t[Er]=e.current,Ml(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new af(e)};Xt.render=function(t,e,n){if(!lf(e))throw Error(j(200));return uf(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!lf(t))throw Error(j(40));return t._reactRootContainer?(Ss(function(){uf(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};Xt.unstable_batchedUpdates=ug;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lf(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return uf(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function Bw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bw)}catch(t){console.error(t)}}Bw(),B1.exports=Xt;var gg=B1.exports;const QE=p1(gg);var T0=gg;Dp.createRoot=T0.createRoot,Dp.hydrateRoot=T0.hydrateRoot;var cf={},sa={},Tm=function(t,e){return Tm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Tm(t,e)};function Mw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var hd=function(){return hd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hd.apply(this,arguments)};function kw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ew(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Dw(t,e){return function(n,r){e(n,r,t)}}function XE(t,e,n,r,i,s){function o(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?r.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,d=!1,h=n.length-1;h>=0;h--){var m={};for(var b in r)m[b]=b==="access"?{}:r[b];for(var b in r.access)m.access[b]=r.access[b];m.addInitializer=function(p){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(p||null))};var _=(0,n[h])(a==="accessor"?{get:c.get,set:c.set}:c[l],m);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(f=o(_.get))&&(c.get=f),(f=o(_.set))&&(c.set=f),(f=o(_.init))&&i.unshift(f)}else(f=o(_))&&(a==="field"?i.unshift(f):c[l]=f)}u&&Object.defineProperty(u,r.name,c),d=!0}function ZE(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function eD(t){return typeof t=="symbol"?t:"".concat(t)}function tD(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function Aw(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Nw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function Rw(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var df=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function Cw(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&df(e,t,n)}function pd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _g(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Fw(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_g(arguments[e]));return t}function Pw(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function jw(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Uo(t){return this instanceof Uo?(this.v=t,this):new Uo(t)}function Lw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(m){return Promise.resolve(m).then(h,f)}}function a(h,m){r[h]&&(i[h]=function(b){return new Promise(function(_,p){s.push([h,b,_,p])>1||l(h,b)})},m&&(i[h]=m(i[h])))}function l(h,m){try{u(r[h](m))}catch(b){d(s[0][3],b)}}function u(h){h.value instanceof Uo?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){l("next",h)}function f(h){l("throw",h)}function d(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Uw(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Uo(t[i](o)),done:!1}:s?s(o):o}:s}}function xw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof pd=="function"?pd(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}function Vw(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var nD=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function zw(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&df(e,t,n);return nD(e,t),e}function $w(t){return t&&t.__esModule?t:{default:t}}function Hw(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Ww(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function Kw(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function qw(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var rD=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Jw(t){function e(r){t.error=t.hasError?new rD(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}function n(){for(;t.stack.length;){var r=t.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,function(s){return e(s),n()})}catch(s){e(s)}}if(t.hasError)throw t.error}return n()}const iD={__extends:Mw,__assign:hd,__rest:kw,__decorate:Ew,__param:Dw,__metadata:Aw,__awaiter:Nw,__generator:Rw,__createBinding:df,__exportStar:Cw,__values:pd,__read:_g,__spread:Fw,__spreadArrays:Pw,__spreadArray:jw,__await:Uo,__asyncGenerator:Lw,__asyncDelegator:Uw,__asyncValues:xw,__makeTemplateObject:Vw,__importStar:zw,__importDefault:$w,__classPrivateFieldGet:Hw,__classPrivateFieldSet:Ww,__classPrivateFieldIn:Kw,__addDisposableResource:qw,__disposeResources:Jw},sD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:qw,get __assign(){return hd},__asyncDelegator:Uw,__asyncGenerator:Lw,__asyncValues:xw,__await:Uo,__awaiter:Nw,__classPrivateFieldGet:Hw,__classPrivateFieldIn:Kw,__classPrivateFieldSet:Ww,__createBinding:df,__decorate:Ew,__disposeResources:Jw,__esDecorate:XE,__exportStar:Cw,__extends:Mw,__generator:Rw,__importDefault:$w,__importStar:zw,__makeTemplateObject:Vw,__metadata:Aw,__param:Dw,__propKey:eD,__read:_g,__rest:kw,__runInitializers:ZE,__setFunctionName:tD,__spread:Fw,__spreadArray:jw,__spreadArrays:Pw,__values:pd,default:iD},Symbol.toStringTag,{value:"Module"})),en=wy(sD);var L={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.encodeUtf8=bn.decodeUtf8=void 0;const oD=new TextDecoder("utf-8"),aD=t=>oD.decode(t);bn.decodeUtf8=aD;const lD=new TextEncoder,uD=t=>lD.encode(t);bn.encodeUtf8=uD;var Ci={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFlatbuffersByteBuffer=t.isReadableNodeStream=t.isWritableNodeStream=t.isReadableDOMStream=t.isWritableDOMStream=t.isFetchResponse=t.isFSReadStream=t.isFileHandle=t.isUnderlyingSink=t.isIteratorResult=t.isArrayLike=t.isArrowJSON=t.isAsyncIterable=t.isIterable=t.isObservable=t.isPromise=t.isObject=void 0;const e=v=>typeof v=="number",n=v=>typeof v=="boolean",r=v=>typeof v=="function",i=v=>v!=null&&Object(v)===v;t.isObject=i;const s=v=>(0,t.isObject)(v)&&r(v.then);t.isPromise=s;const o=v=>(0,t.isObject)(v)&&r(v.subscribe);t.isObservable=o;const a=v=>(0,t.isObject)(v)&&r(v[Symbol.iterator]);t.isIterable=a;const l=v=>(0,t.isObject)(v)&&r(v[Symbol.asyncIterator]);t.isAsyncIterable=l;const u=v=>(0,t.isObject)(v)&&(0,t.isObject)(v.schema);t.isArrowJSON=u;const c=v=>(0,t.isObject)(v)&&e(v.length);t.isArrayLike=c;const f=v=>(0,t.isObject)(v)&&"done"in v&&"value"in v;t.isIteratorResult=f;const d=v=>(0,t.isObject)(v)&&r(v.abort)&&r(v.close)&&r(v.start)&&r(v.write);t.isUnderlyingSink=d;const h=v=>(0,t.isObject)(v)&&r(v.stat)&&e(v.fd);t.isFileHandle=h;const m=v=>(0,t.isReadableNodeStream)(v)&&e(v.bytesRead);t.isFSReadStream=m;const b=v=>(0,t.isObject)(v)&&(0,t.isReadableDOMStream)(v.body);t.isFetchResponse=b;const _=v=>"_getDOMStream"in v&&"_getNodeStream"in v,p=v=>(0,t.isObject)(v)&&r(v.abort)&&r(v.getWriter)&&!_(v);t.isWritableDOMStream=p;const g=v=>(0,t.isObject)(v)&&r(v.cancel)&&r(v.getReader)&&!_(v);t.isReadableDOMStream=g;const y=v=>(0,t.isObject)(v)&&r(v.end)&&r(v.write)&&n(v.writable)&&!_(v);t.isWritableNodeStream=y;const S=v=>(0,t.isObject)(v)&&r(v.read)&&r(v.pipe)&&n(v.readable)&&!_(v);t.isReadableNodeStream=S;const T=v=>(0,t.isObject)(v)&&r(v.clear)&&r(v.bytes)&&r(v.position)&&r(v.setPosition)&&r(v.capacity)&&r(v.getBufferIdentifier)&&r(v.createLong);t.isFlatbuffersByteBuffer=T})(Ci);Object.defineProperty(L,"__esModule",{value:!0});L.compareArrayLike=L.rebaseValueOffsets=L.toUint8ClampedArrayAsyncIterator=L.toFloat64ArrayAsyncIterator=L.toFloat32ArrayAsyncIterator=L.toUint32ArrayAsyncIterator=L.toUint16ArrayAsyncIterator=L.toUint8ArrayAsyncIterator=L.toInt32ArrayAsyncIterator=L.toInt16ArrayAsyncIterator=L.toInt8ArrayAsyncIterator=L.toArrayBufferViewAsyncIterator=L.toUint8ClampedArrayIterator=L.toFloat64ArrayIterator=L.toFloat32ArrayIterator=L.toUint32ArrayIterator=L.toUint16ArrayIterator=L.toUint8ArrayIterator=L.toInt32ArrayIterator=L.toInt16ArrayIterator=L.toInt8ArrayIterator=L.toArrayBufferViewIterator=L.toUint8ClampedArray=L.toFloat64Array=L.toFloat32Array=L.toBigUint64Array=L.toUint32Array=L.toUint16Array=L.toUint8Array=L.toBigInt64Array=L.toInt32Array=L.toInt16Array=L.toInt8Array=L.toArrayBufferView=L.joinUint8Arrays=L.memcpy=void 0;const xe=en,cD=bn,Mo=Ci,bg=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function dD(t){const e=t[0]?[t[0]]:[];let n,r,i,s;for(let o,a,l=0,u=0,c=t.length;++l<c;){if(o=e[u],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(e[++u]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(e[++u]=a);continue}e[u]=new Uint8Array(o.buffer,n,r-n+s)}return e}function Im(t,e,n=0,r=e.byteLength){const i=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,i),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return s.set(o,n),t}L.memcpy=Im;function fD(t,e){const n=dD(t),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,l=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,r);for(const c=n.length;++l<c;){if(i=n[l],s=i.subarray(0,Math.min(i.length,u-a)),u<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?Im(o,s,a):o=s;break}Im(o||(o=new Uint8Array(u)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}L.joinUint8Arrays=fD;function kt(t,e){let n=(0,Mo.isIteratorResult)(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=(0,cD.encodeUtf8)(n)),n instanceof ArrayBuffer?new t(n):n instanceof bg?new t(n):(0,Mo.isFlatbuffersByteBuffer)(n)?kt(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}L.toArrayBufferView=kt;const hD=t=>kt(Int8Array,t);L.toInt8Array=hD;const pD=t=>kt(Int16Array,t);L.toInt16Array=pD;const mD=t=>kt(Int32Array,t);L.toInt32Array=mD;const yD=t=>kt(BigInt64Array,t);L.toBigInt64Array=yD;const gD=t=>kt(Uint8Array,t);L.toUint8Array=gD;const _D=t=>kt(Uint16Array,t);L.toUint16Array=_D;const bD=t=>kt(Uint32Array,t);L.toUint32Array=bD;const vD=t=>kt(BigUint64Array,t);L.toBigUint64Array=vD;const SD=t=>kt(Float32Array,t);L.toFloat32Array=SD;const wD=t=>kt(Float64Array,t);L.toFloat64Array=wD;const TD=t=>kt(Uint8ClampedArray,t);L.toUint8ClampedArray=TD;const Om=t=>(t.next(),t);function*lr(t,e){const n=function*(i){yield i},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof bg?n(e):(0,Mo.isIterable)(e)?e:n(e);return yield*Om(function*(i){let s=null;do s=i.next(yield kt(t,s));while(!s.done)}(r[Symbol.iterator]())),new t}L.toArrayBufferViewIterator=lr;const ID=t=>lr(Int8Array,t);L.toInt8ArrayIterator=ID;const OD=t=>lr(Int16Array,t);L.toInt16ArrayIterator=OD;const BD=t=>lr(Int32Array,t);L.toInt32ArrayIterator=BD;const MD=t=>lr(Uint8Array,t);L.toUint8ArrayIterator=MD;const kD=t=>lr(Uint16Array,t);L.toUint16ArrayIterator=kD;const ED=t=>lr(Uint32Array,t);L.toUint32ArrayIterator=ED;const DD=t=>lr(Float32Array,t);L.toFloat32ArrayIterator=DD;const AD=t=>lr(Float64Array,t);L.toFloat64ArrayIterator=AD;const ND=t=>lr(Uint8ClampedArray,t);L.toUint8ClampedArrayIterator=ND;function zn(t,e){return xe.__asyncGenerator(this,arguments,function*(){if((0,Mo.isPromise)(e))return yield xe.__await(yield xe.__await(yield*xe.__asyncDelegator(xe.__asyncValues(zn(t,yield xe.__await(e))))));const r=function(o){return xe.__asyncGenerator(this,arguments,function*(){yield yield xe.__await(yield xe.__await(o))})},i=function(o){return xe.__asyncGenerator(this,arguments,function*(){yield xe.__await(yield*xe.__asyncDelegator(xe.__asyncValues(Om(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof bg?r(e):(0,Mo.isIterable)(e)?i(e):(0,Mo.isAsyncIterable)(e)?e:r(e);return yield xe.__await(yield*xe.__asyncDelegator(xe.__asyncValues(Om(function(o){return xe.__asyncGenerator(this,arguments,function*(){let a=null;do a=yield xe.__await(o.next(yield yield xe.__await(kt(t,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield xe.__await(new t)})}L.toArrayBufferViewAsyncIterator=zn;const RD=t=>zn(Int8Array,t);L.toInt8ArrayAsyncIterator=RD;const CD=t=>zn(Int16Array,t);L.toInt16ArrayAsyncIterator=CD;const FD=t=>zn(Int32Array,t);L.toInt32ArrayAsyncIterator=FD;const PD=t=>zn(Uint8Array,t);L.toUint8ArrayAsyncIterator=PD;const jD=t=>zn(Uint16Array,t);L.toUint16ArrayAsyncIterator=jD;const LD=t=>zn(Uint32Array,t);L.toUint32ArrayAsyncIterator=LD;const UD=t=>zn(Float32Array,t);L.toFloat32ArrayAsyncIterator=UD;const xD=t=>zn(Float64Array,t);L.toFloat64ArrayAsyncIterator=xD;const VD=t=>zn(Uint8ClampedArray,t);L.toUint8ClampedArrayAsyncIterator=VD;function zD(t,e,n){if(t!==0){n=n.slice(0,e);for(let r=-1,i=n.length;++r<i;)n[r]+=t}return n.subarray(0,e)}L.rebaseValueOffsets=zD;function $D(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do if(t[n]!==e[n])return!1;while(++n<r);return!0}L.compareArrayLike=$D;Object.defineProperty(sa,"__esModule",{value:!0});const Se=en,bt=L;sa.default={fromIterable(t){return oc(HD(t))},fromAsyncIterable(t){return oc(WD(t))},fromDOMStream(t){return oc(KD(t))},fromNodeStream(t){return oc(JD(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const oc=t=>(t.next(),t);function*HD(t){let e,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?(0,bt.joinUint8Arrays)(r,o)[0]:([i,r,a]=(0,bt.joinUint8Arrays)(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const u=(0,bt.toUint8ArrayIterator)(t)[Symbol.iterator]();try{do if({done:e,value:i}=Number.isNaN(o-a)?u.next():u.next(o-a),!e&&i.byteLength>0&&(r.push(i),a+=i.byteLength),e||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!e)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function WD(t){return Se.__asyncGenerator(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?(0,bt.joinUint8Arrays)(i,a)[0]:([s,i,l]=(0,bt.joinUint8Arrays)(i,a),s)}({cmd:o,size:a}=(yield yield Se.__await(null))||{cmd:"read",size:0});const c=(0,bt.toUint8ArrayAsyncIterator)(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield Se.__await(c.next()):yield Se.__await(c.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield Se.__await(u()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Se.__await(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Se.__await(c.return(new Uint8Array(0))))}return yield Se.__await(null)})}function KD(t){return Se.__asyncGenerator(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?(0,bt.joinUint8Arrays)(i,a)[0]:([s,i,l]=(0,bt.joinUint8Arrays)(i,a),s)}({cmd:o,size:a}=(yield yield Se.__await(null))||{cmd:"read",size:0});const c=new qD(t);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield Se.__await(c.read()):yield Se.__await(c.read(a-l)),!n&&s.byteLength>0&&(i.push((0,bt.toUint8Array)(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield Se.__await(u()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield Se.__await(c.cancel(f)))}finally{r===!1?yield Se.__await(c.cancel()):t.locked&&c.releaseLock()}return yield Se.__await(null)})}class qD{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return Se.__awaiter(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return Se.__awaiter(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=(0,bt.toUint8Array)(n)),n})}}const Ph=(t,e)=>{const n=i=>r([e,i]);let r;return[e,n,new Promise(i=>(r=i)&&t.once(e,n))]};function JD(t){return Se.__asyncGenerator(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,u=[],c;function f(){return o==="peek"?(0,bt.joinUint8Arrays)(u,a)[0]:([c,u,l]=(0,bt.joinUint8Arrays)(u,a),c)}if({cmd:o,size:a}=(yield yield Se.__await(null))||{cmd:"read",size:0},t.isTTY)return yield yield Se.__await(new Uint8Array(0)),yield Se.__await(null);try{n[0]=Ph(t,"end"),n[1]=Ph(t,"error");do{if(n[2]=Ph(t,"readable"),[r,s]=yield Se.__await(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(c=(0,bt.toUint8Array)(t.read(a-l)),c.byteLength<a-l&&(c=(0,bt.toUint8Array)(t.read()))):c=(0,bt.toUint8Array)(t.read()),c.byteLength>0&&(u.push(c),l+=c.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield Se.__await(f()));while(a<l)}while(!i)}finally{yield Se.__await(d(n,r==="error"?s:null))}return yield Se.__await(null);function d(h,m){return c=u=null,new Promise((b,_)=>{for(const[p,g]of h)t.off(p,g);try{const p=t.destroy;p&&p.call(t,m),m=void 0}catch(p){m=p||m}finally{m!=null?_(m):b()}})}})}var he={},Vi={},Ne={},oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.MetadataVersion=void 0;var I0;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(I0||(oa.MetadataVersion=I0={}));var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.UnionMode=void 0;var O0;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(O0||(nu.UnionMode=O0={}));var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.Precision=void 0;var B0;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(B0||(ru.Precision=B0={}));var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.DateUnit=void 0;var M0;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(M0||(iu.DateUnit=M0={}));var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.TimeUnit=void 0;var k0;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(k0||(Rs.TimeUnit=k0={}));var su={};Object.defineProperty(su,"__esModule",{value:!0});su.IntervalUnit=void 0;var E0;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(E0||(su.IntervalUnit=E0={}));var ir={},ou={};const Cc=2,An=4,Xn=4,Gw=4,br=new Int32Array(2),Bm=new Float32Array(br.buffer),Mm=new Float64Array(br.buffer),Ja=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var md;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(md||(md={}));let km=class Yw{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Yw(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return br[0]=this.readInt32(e),Bm[0]}readFloat64(e){return br[Ja?0:1]=this.readInt32(e),br[Ja?1:0]=this.readInt32(e+4),Mm[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){Bm[0]=n,this.writeInt32(e,br[0])}writeFloat64(e,n){Mm[0]=n,this.writeInt32(e,br[Ja?0:1]),this.writeInt32(e+4,br[Ja?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+An+Xn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<Xn;n++)e+=String.fromCharCode(this.readInt8(this.position_+An+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);e+=An;const i=this.bytes_.subarray(e,e+r);return n===md.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+An}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Xn)throw new Error("FlatBuffers: file identifier must be length "+Xn);for(let n=0;n<Xn;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+An+n))return!1;return!0}createScalarList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s)}return r}createObjList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s.unpack())}return r}},GD=class Qw{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;e?n=e:n=1024,this.bb=km.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){const i=this.bb.capacity();this.bb=Qw.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=km.allocate(r);return i.setPosition(r-n),i.bytes().set(e.bytes(),r-n),i}addOffset(e){this.prep(An,0),this.writeInt32(this.offset()-e+An)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const i=2;this.addInt16(e-this.object_start);const s=(r+i)*Cc;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let u=Cc;u<s;u+=Cc)if(this.bb.readInt16(a+u)!=this.bb.readInt16(l+u))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){const i=r?Gw:0;if(n){const s=n;if(this.prep(this.minalign,An+Xn+i),s.length!=Xn)throw new TypeError("FlatBuffers: file identifier must be length "+Xn);for(let o=Xn-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,An+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(An,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(e==null)return 0;let n;e instanceof Uint8Array?n=e:n=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let r=0;r<e.length;++r){const i=e[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};const YD=Object.freeze(Object.defineProperty({__proto__:null,Builder:GD,ByteBuffer:km,get Encoding(){return md},FILE_IDENTIFIER_LENGTH:Xn,SIZEOF_INT:An,SIZEOF_SHORT:Cc,SIZE_PREFIX_LENGTH:Gw,float32:Bm,float64:Mm,int32:br,isLittleEndian:Ja},Symbol.toStringTag,{value:"Module"})),ie=wy(YD);var aa={},ff={},hf={};Object.defineProperty(hf,"__esModule",{value:!0});hf.BodyCompressionMethod=void 0;var D0;(function(t){t[t.BUFFER=0]="BUFFER"})(D0||(hf.BodyCompressionMethod=D0={}));var pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.CompressionType=void 0;var A0;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(A0||(pf.CompressionType=A0={}));Object.defineProperty(ff,"__esModule",{value:!0});ff.BodyCompression=void 0;const QD=ie,N0=hf,R0=pf;class Yr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Yr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+QD.SIZE_PREFIX_LENGTH),(n||new Yr).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):R0.CompressionType.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):N0.BodyCompressionMethod.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,R0.CompressionType.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,N0.BodyCompressionMethod.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,r){return Yr.startBodyCompression(e),Yr.addCodec(e,n),Yr.addMethod(e,r),Yr.endBodyCompression(e)}}ff.BodyCompression=Yr;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.Buffer=void 0;class XD{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}}ur.Buffer=XD;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.FieldNode=void 0;class ZD{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}}au.FieldNode=ZD;Object.defineProperty(aa,"__esModule",{value:!0});aa.RecordBatch=void 0;const eA=ie,tA=ff,nA=ur,rA=au;class yd{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new yd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+eA.SIZE_PREFIX_LENGTH),(n||new yd).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new rA.FieldNode).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new nA.Buffer).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new tA.BodyCompression).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}}aa.RecordBatch=yd;Object.defineProperty(ou,"__esModule",{value:!0});ou.DictionaryBatch=void 0;const iA=ie,sA=aa;class gd{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new gd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+iA.SIZE_PREFIX_LENGTH),(n||new gd).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new sA.RecordBatch).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}}ou.DictionaryBatch=gd;var la={},lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.Endianness=void 0;var C0;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(C0||(lu.Endianness=C0={}));var uu={},cu={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.DictionaryKind=void 0;var F0;(function(t){t[t.DenseArray=0]="DenseArray"})(F0||(mf.DictionaryKind=F0={}));var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.Int=void 0;const oA=ie;class Qr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new Qr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+oA.SIZE_PREFIX_LENGTH),(n||new Qr).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,r){return Qr.startInt(e),Qr.addBitWidth(e,n),Qr.addIsSigned(e,r),Qr.endInt(e)}}cr.Int=Qr;Object.defineProperty(cu,"__esModule",{value:!0});cu.DictionaryEncoding=void 0;const aA=ie,P0=mf,lA=cr;class _d{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new _d).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+aA.SIZE_PREFIX_LENGTH),(n||new _d).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new lA.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):P0.DictionaryKind.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,P0.DictionaryKind.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}cu.DictionaryEncoding=_d;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.KeyValue=void 0;const uA=ie;class Xr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Xr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+uA.SIZE_PREFIX_LENGTH),(n||new Xr).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,r){return Xr.startKeyValue(e),Xr.addKey(e,n),Xr.addValue(e,r),Xr.endKeyValue(e)}}Fi.KeyValue=Xr;var pn={},du={};Object.defineProperty(du,"__esModule",{value:!0});du.Binary=void 0;const cA=ie;let dA=class Ga{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new Ga).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+cA.SIZE_PREFIX_LENGTH),(n||new Ga).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Ga.startBinary(e),Ga.endBinary(e)}};du.Binary=dA;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.Bool=void 0;const fA=ie;let hA=class Ya{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new Ya).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+fA.SIZE_PREFIX_LENGTH),(n||new Ya).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Ya.startBool(e),Ya.endBool(e)}};fu.Bool=hA;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.Date=void 0;const pA=ie,j0=iu;let mA=class Js{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new Js).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+pA.SIZE_PREFIX_LENGTH),(n||new Js).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):j0.DateUnit.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,j0.DateUnit.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return Js.startDate(e),Js.addUnit(e,n),Js.endDate(e)}};ua.Date=mA;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.Decimal=void 0;const yA=ie;let gA=class Wr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new Wr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+yA.SIZE_PREFIX_LENGTH),(n||new Wr).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,r,i){return Wr.startDecimal(e),Wr.addPrecision(e,n),Wr.addScale(e,r),Wr.addBitWidth(e,i),Wr.endDecimal(e)}};ca.Decimal=gA;var da={};Object.defineProperty(da,"__esModule",{value:!0});da.Duration=void 0;const _A=ie,L0=Rs;let bA=class Gs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDuration(e,n){return(n||new Gs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,n){return e.setPosition(e.position()+_A.SIZE_PREFIX_LENGTH),(n||new Gs).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):L0.TimeUnit.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,L0.TimeUnit.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,n){return Gs.startDuration(e),Gs.addUnit(e,n),Gs.endDuration(e)}};da.Duration=bA;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.FixedSizeBinary=void 0;const vA=ie;let SA=class Ys{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new Ys).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+vA.SIZE_PREFIX_LENGTH),(n||new Ys).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return Ys.startFixedSizeBinary(e),Ys.addByteWidth(e,n),Ys.endFixedSizeBinary(e)}};fa.FixedSizeBinary=SA;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.FixedSizeList=void 0;const wA=ie;let TA=class Qs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new Qs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+wA.SIZE_PREFIX_LENGTH),(n||new Qs).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return Qs.startFixedSizeList(e),Qs.addListSize(e,n),Qs.endFixedSizeList(e)}};ha.FixedSizeList=TA;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.FloatingPoint=void 0;const IA=ie,U0=ru;class Yi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new Yi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+IA.SIZE_PREFIX_LENGTH),(n||new Yi).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):U0.Precision.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,U0.Precision.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return Yi.startFloatingPoint(e),Yi.addPrecision(e,n),Yi.endFloatingPoint(e)}}pa.FloatingPoint=Yi;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.Interval=void 0;const OA=ie,x0=su;class Qi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new Qi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+OA.SIZE_PREFIX_LENGTH),(n||new Qi).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):x0.IntervalUnit.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,x0.IntervalUnit.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return Qi.startInterval(e),Qi.addUnit(e,n),Qi.endInterval(e)}}ma.Interval=Qi;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.LargeBinary=void 0;const BA=ie;let MA=class Qa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeBinary(e,n){return(n||new Qa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,n){return e.setPosition(e.position()+BA.SIZE_PREFIX_LENGTH),(n||new Qa).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return Qa.startLargeBinary(e),Qa.endLargeBinary(e)}};hu.LargeBinary=MA;var yf={};Object.defineProperty(yf,"__esModule",{value:!0});yf.LargeList=void 0;const kA=ie;class mo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeList(e,n){return(n||new mo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeList(e,n){return e.setPosition(e.position()+kA.SIZE_PREFIX_LENGTH),(n||new mo).__init(e.readInt32(e.position())+e.position(),e)}static startLargeList(e){e.startObject(0)}static endLargeList(e){return e.endObject()}static createLargeList(e){return mo.startLargeList(e),mo.endLargeList(e)}}yf.LargeList=mo;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.LargeUtf8=void 0;const EA=ie;let DA=class Xa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeUtf8(e,n){return(n||new Xa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,n){return e.setPosition(e.position()+EA.SIZE_PREFIX_LENGTH),(n||new Xa).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return Xa.startLargeUtf8(e),Xa.endLargeUtf8(e)}};pu.LargeUtf8=DA;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.List=void 0;const AA=ie;let NA=class Za{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new Za).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+AA.SIZE_PREFIX_LENGTH),(n||new Za).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Za.startList(e),Za.endList(e)}};mu.List=NA;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.Map=void 0;const RA=ie;let CA=class Xs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new Xs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+RA.SIZE_PREFIX_LENGTH),(n||new Xs).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return Xs.startMap(e),Xs.addKeysSorted(e,n),Xs.endMap(e)}};ya.Map=CA;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.Null=void 0;const FA=ie;let PA=class el{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new el).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+FA.SIZE_PREFIX_LENGTH),(n||new el).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return el.startNull(e),el.endNull(e)}};yu.Null=PA;var gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.RunEndEncoded=void 0;const jA=ie;class yo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRunEndEncoded(e,n){return(n||new yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRunEndEncoded(e,n){return e.setPosition(e.position()+jA.SIZE_PREFIX_LENGTH),(n||new yo).__init(e.readInt32(e.position())+e.position(),e)}static startRunEndEncoded(e){e.startObject(0)}static endRunEndEncoded(e){return e.endObject()}static createRunEndEncoded(e){return yo.startRunEndEncoded(e),yo.endRunEndEncoded(e)}}gf.RunEndEncoded=yo;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.Struct_=void 0;const LA=ie;class go{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new go).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+LA.SIZE_PREFIX_LENGTH),(n||new go).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return go.startStruct_(e),go.endStruct_(e)}}gu.Struct_=go;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.Time=void 0;const UA=ie,V0=Rs;class Zr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Zr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+UA.SIZE_PREFIX_LENGTH),(n||new Zr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):V0.TimeUnit.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,V0.TimeUnit.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,r){return Zr.startTime(e),Zr.addUnit(e,n),Zr.addBitWidth(e,r),Zr.endTime(e)}}ga.Time=Zr;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.Timestamp=void 0;const xA=ie,z0=Rs;class ei{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new ei).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+xA.SIZE_PREFIX_LENGTH),(n||new ei).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):z0.TimeUnit.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,z0.TimeUnit.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,r){return ei.startTimestamp(e),ei.addUnit(e,n),ei.addTimezone(e,r),ei.endTimestamp(e)}}_a.Timestamp=ei;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.Union=void 0;const VA=ie,$0=nu;class ti{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new ti).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+VA.SIZE_PREFIX_LENGTH),(n||new ti).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):$0.UnionMode.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,$0.UnionMode.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,r){return ti.startUnion(e),ti.addMode(e,n),ti.addTypeIds(e,r),ti.endUnion(e)}}ba.Union=ti;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.Utf8=void 0;const zA=ie;let $A=class tl{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new tl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+zA.SIZE_PREFIX_LENGTH),(n||new tl).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return tl.startUtf8(e),tl.endUtf8(e)}};_u.Utf8=$A;Object.defineProperty(pn,"__esModule",{value:!0});pn.unionListToType=pn.unionToType=pn.Type=void 0;const Xw=du,Zw=fu,eT=ua,tT=ca,nT=da,rT=fa,iT=ha,sT=pa,oT=cr,aT=ma,lT=hu,uT=yf,cT=pu,dT=mu,fT=ya,hT=yu,pT=gf,mT=gu,yT=ga,gT=_a,_T=ba,bT=_u;var bd;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"})(bd||(pn.Type=bd={}));function HA(t,e){switch(bd[t]){case"NONE":return null;case"Null":return e(new hT.Null);case"Int":return e(new oT.Int);case"FloatingPoint":return e(new sT.FloatingPoint);case"Binary":return e(new Xw.Binary);case"Utf8":return e(new bT.Utf8);case"Bool":return e(new Zw.Bool);case"Decimal":return e(new tT.Decimal);case"Date":return e(new eT.Date);case"Time":return e(new yT.Time);case"Timestamp":return e(new gT.Timestamp);case"Interval":return e(new aT.Interval);case"List":return e(new dT.List);case"Struct_":return e(new mT.Struct_);case"Union":return e(new _T.Union);case"FixedSizeBinary":return e(new rT.FixedSizeBinary);case"FixedSizeList":return e(new iT.FixedSizeList);case"Map":return e(new fT.Map);case"Duration":return e(new nT.Duration);case"LargeBinary":return e(new lT.LargeBinary);case"LargeUtf8":return e(new cT.LargeUtf8);case"LargeList":return e(new uT.LargeList);case"RunEndEncoded":return e(new pT.RunEndEncoded);default:return null}}pn.unionToType=HA;function WA(t,e,n){switch(bd[t]){case"NONE":return null;case"Null":return e(n,new hT.Null);case"Int":return e(n,new oT.Int);case"FloatingPoint":return e(n,new sT.FloatingPoint);case"Binary":return e(n,new Xw.Binary);case"Utf8":return e(n,new bT.Utf8);case"Bool":return e(n,new Zw.Bool);case"Decimal":return e(n,new tT.Decimal);case"Date":return e(n,new eT.Date);case"Time":return e(n,new yT.Time);case"Timestamp":return e(n,new gT.Timestamp);case"Interval":return e(n,new aT.Interval);case"List":return e(n,new dT.List);case"Struct_":return e(n,new mT.Struct_);case"Union":return e(n,new _T.Union);case"FixedSizeBinary":return e(n,new rT.FixedSizeBinary);case"FixedSizeList":return e(n,new iT.FixedSizeList);case"Map":return e(n,new fT.Map);case"Duration":return e(n,new nT.Duration);case"LargeBinary":return e(n,new lT.LargeBinary);case"LargeUtf8":return e(n,new cT.LargeUtf8);case"LargeList":return e(n,new uT.LargeList);case"RunEndEncoded":return e(n,new pT.RunEndEncoded);default:return null}}pn.unionListToType=WA;Object.defineProperty(uu,"__esModule",{value:!0});uu.Field=void 0;const KA=ie,qA=cu,JA=Fi,H0=pn;let GA=class Fc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Fc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+KA.SIZE_PREFIX_LENGTH),(n||new Fc).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):H0.Type.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new qA.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new Fc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new JA.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,H0.Type.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}};uu.Field=GA;Object.defineProperty(la,"__esModule",{value:!0});la.Schema=void 0;const YA=ie,W0=lu,QA=uu,XA=Fi;let ZA=class mr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+YA.SIZE_PREFIX_LENGTH),(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):W0.Endianness.Little}fields(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new QA.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new XA.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,W0.Endianness.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,r,i,s){return mr.startSchema(e),mr.addEndianness(e,n),mr.addFields(e,r),mr.addCustomMetadata(e,i),mr.addFeatures(e,s),mr.endSchema(e)}};la.Schema=ZA;var _f={},wi={},bf={},vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.SparseMatrixCompressedAxis=void 0;var K0;(function(t){t[t.Row=0]="Row",t[t.Column=1]="Column"})(K0||(vf.SparseMatrixCompressedAxis=K0={}));Object.defineProperty(bf,"__esModule",{value:!0});bf.SparseMatrixIndexCSX=void 0;const eN=ie,q0=ur,J0=cr,G0=vf;class vd{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSparseMatrixIndexCSX(e,n){return(n||new vd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseMatrixIndexCSX(e,n){return e.setPosition(e.position()+eN.SIZE_PREFIX_LENGTH),(n||new vd).__init(e.readInt32(e.position())+e.position(),e)}compressedAxis(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):G0.SparseMatrixCompressedAxis.Row}indptrType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new J0.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indptrBuffer(e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new q0.Buffer).__init(this.bb_pos+n,this.bb):null}indicesType(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new J0.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indicesBuffer(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new q0.Buffer).__init(this.bb_pos+n,this.bb):null}static startSparseMatrixIndexCSX(e){e.startObject(5)}static addCompressedAxis(e,n){e.addFieldInt16(0,n,G0.SparseMatrixCompressedAxis.Row)}static addIndptrType(e,n){e.addFieldOffset(1,n,0)}static addIndptrBuffer(e,n){e.addFieldStruct(2,n,0)}static addIndicesType(e,n){e.addFieldOffset(3,n,0)}static addIndicesBuffer(e,n){e.addFieldStruct(4,n,0)}static endSparseMatrixIndexCSX(e){const n=e.endObject();return e.requiredField(n,6),e.requiredField(n,8),e.requiredField(n,10),e.requiredField(n,12),n}}bf.SparseMatrixIndexCSX=vd;var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.SparseTensorIndexCOO=void 0;const tN=ie,nN=ur,rN=cr;class Sd{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSparseTensorIndexCOO(e,n){return(n||new Sd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensorIndexCOO(e,n){return e.setPosition(e.position()+tN.SIZE_PREFIX_LENGTH),(n||new Sd).__init(e.readInt32(e.position())+e.position(),e)}indicesType(e){const n=this.bb.__offset(this.bb_pos,4);return n?(e||new rN.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indicesStrides(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}indicesStridesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}indicesBuffer(e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new nN.Buffer).__init(this.bb_pos+n,this.bb):null}isCanonical(){const e=this.bb.__offset(this.bb_pos,10);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startSparseTensorIndexCOO(e){e.startObject(4)}static addIndicesType(e,n){e.addFieldOffset(0,n,0)}static addIndicesStrides(e,n){e.addFieldOffset(1,n,0)}static createIndicesStridesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startIndicesStridesVector(e,n){e.startVector(8,n,8)}static addIndicesBuffer(e,n){e.addFieldStruct(2,n,0)}static addIsCanonical(e,n){e.addFieldInt8(3,+n,0)}static endSparseTensorIndexCOO(e){const n=e.endObject();return e.requiredField(n,4),e.requiredField(n,8),n}}Sf.SparseTensorIndexCOO=Sd;var wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.SparseTensorIndexCSF=void 0;const iN=ie,Y0=ur,Q0=cr;class wd{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSparseTensorIndexCSF(e,n){return(n||new wd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensorIndexCSF(e,n){return e.setPosition(e.position()+iN.SIZE_PREFIX_LENGTH),(n||new wd).__init(e.readInt32(e.position())+e.position(),e)}indptrType(e){const n=this.bb.__offset(this.bb_pos,4);return n?(e||new Q0.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indptrBuffers(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Y0.Buffer).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}indptrBuffersLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}indicesType(e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Q0.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indicesBuffers(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Y0.Buffer).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}indicesBuffersLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}axisOrder(e){const n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}axisOrderLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}axisOrderArray(){const e=this.bb.__offset(this.bb_pos,12);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startSparseTensorIndexCSF(e){e.startObject(5)}static addIndptrType(e,n){e.addFieldOffset(0,n,0)}static addIndptrBuffers(e,n){e.addFieldOffset(1,n,0)}static startIndptrBuffersVector(e,n){e.startVector(16,n,8)}static addIndicesType(e,n){e.addFieldOffset(2,n,0)}static addIndicesBuffers(e,n){e.addFieldOffset(3,n,0)}static startIndicesBuffersVector(e,n){e.startVector(16,n,8)}static addAxisOrder(e,n){e.addFieldOffset(4,n,0)}static createAxisOrderVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startAxisOrderVector(e,n){e.startVector(4,n,4)}static endSparseTensorIndexCSF(e){const n=e.endObject();return e.requiredField(n,4),e.requiredField(n,6),e.requiredField(n,8),e.requiredField(n,10),e.requiredField(n,12),n}}wf.SparseTensorIndexCSF=wd;Object.defineProperty(wi,"__esModule",{value:!0});wi.unionListToSparseTensorIndex=wi.unionToSparseTensorIndex=wi.SparseTensorIndex=void 0;const vT=bf,ST=Sf,wT=wf;var Td;(function(t){t[t.NONE=0]="NONE",t[t.SparseTensorIndexCOO=1]="SparseTensorIndexCOO",t[t.SparseMatrixIndexCSX=2]="SparseMatrixIndexCSX",t[t.SparseTensorIndexCSF=3]="SparseTensorIndexCSF"})(Td||(wi.SparseTensorIndex=Td={}));function sN(t,e){switch(Td[t]){case"NONE":return null;case"SparseTensorIndexCOO":return e(new ST.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return e(new vT.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return e(new wT.SparseTensorIndexCSF);default:return null}}wi.unionToSparseTensorIndex=sN;function oN(t,e,n){switch(Td[t]){case"NONE":return null;case"SparseTensorIndexCOO":return e(n,new ST.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return e(n,new vT.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return e(n,new wT.SparseTensorIndexCSF);default:return null}}wi.unionListToSparseTensorIndex=oN;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.TensorDim=void 0;const aN=ie;class ni{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTensorDim(e,n){return(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensorDim(e,n){return e.setPosition(e.position()+aN.SIZE_PREFIX_LENGTH),(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}size(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}name(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTensorDim(e){e.startObject(2)}static addSize(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addName(e,n){e.addFieldOffset(1,n,0)}static endTensorDim(e){return e.endObject()}static createTensorDim(e,n,r){return ni.startTensorDim(e),ni.addSize(e,n),ni.addName(e,r),ni.endTensorDim(e)}}bu.TensorDim=ni;Object.defineProperty(_f,"__esModule",{value:!0});_f.SparseTensor=void 0;const lN=ie,uN=ur,X0=wi,cN=bu,Z0=pn;class Id{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSparseTensor(e,n){return(n||new Id).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensor(e,n){return e.setPosition(e.position()+lN.SIZE_PREFIX_LENGTH),(n||new Id).__init(e.readInt32(e.position())+e.position(),e)}typeType(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):Z0.Type.NONE}type(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__union(e,this.bb_pos+n):null}shape(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new cN.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}shapeLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}nonZeroLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}sparseIndexType(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb_pos+e):X0.SparseTensorIndex.NONE}sparseIndex(e){const n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__union(e,this.bb_pos+n):null}data(e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new uN.Buffer).__init(this.bb_pos+n,this.bb):null}static startSparseTensor(e){e.startObject(7)}static addTypeType(e,n){e.addFieldInt8(0,n,Z0.Type.NONE)}static addType(e,n){e.addFieldOffset(1,n,0)}static addShape(e,n){e.addFieldOffset(2,n,0)}static createShapeVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startShapeVector(e,n){e.startVector(4,n,4)}static addNonZeroLength(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addSparseIndexType(e,n){e.addFieldInt8(4,n,X0.SparseTensorIndex.NONE)}static addSparseIndex(e,n){e.addFieldOffset(5,n,0)}static addData(e,n){e.addFieldStruct(6,n,0)}static endSparseTensor(e){const n=e.endObject();return e.requiredField(n,6),e.requiredField(n,8),e.requiredField(n,14),e.requiredField(n,16),n}static finishSparseTensorBuffer(e,n){e.finish(n)}static finishSizePrefixedSparseTensorBuffer(e,n){e.finish(n,void 0,!0)}}_f.SparseTensor=Id;var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.Tensor=void 0;const dN=ie,fN=ur,hN=bu,eb=pn;class Od{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTensor(e,n){return(n||new Od).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensor(e,n){return e.setPosition(e.position()+dN.SIZE_PREFIX_LENGTH),(n||new Od).__init(e.readInt32(e.position())+e.position(),e)}typeType(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):eb.Type.NONE}type(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__union(e,this.bb_pos+n):null}shape(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new hN.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}shapeLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}strides(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}stridesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}data(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new fN.Buffer).__init(this.bb_pos+n,this.bb):null}static startTensor(e){e.startObject(5)}static addTypeType(e,n){e.addFieldInt8(0,n,eb.Type.NONE)}static addType(e,n){e.addFieldOffset(1,n,0)}static addShape(e,n){e.addFieldOffset(2,n,0)}static createShapeVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startShapeVector(e,n){e.startVector(4,n,4)}static addStrides(e,n){e.addFieldOffset(3,n,0)}static createStridesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startStridesVector(e,n){e.startVector(8,n,8)}static addData(e,n){e.addFieldStruct(4,n,0)}static endTensor(e){const n=e.endObject();return e.requiredField(n,6),e.requiredField(n,8),e.requiredField(n,12),n}static finishTensorBuffer(e,n){e.finish(n)}static finishSizePrefixedTensorBuffer(e,n){e.finish(n,void 0,!0)}}Tf.Tensor=Od;Object.defineProperty(ir,"__esModule",{value:!0});ir.unionListToMessageHeader=ir.unionToMessageHeader=ir.MessageHeader=void 0;const TT=ou,IT=aa,OT=la,BT=_f,MT=Tf;var Bd;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Bd||(ir.MessageHeader=Bd={}));function pN(t,e){switch(Bd[t]){case"NONE":return null;case"Schema":return e(new OT.Schema);case"DictionaryBatch":return e(new TT.DictionaryBatch);case"RecordBatch":return e(new IT.RecordBatch);case"Tensor":return e(new MT.Tensor);case"SparseTensor":return e(new BT.SparseTensor);default:return null}}ir.unionToMessageHeader=pN;function mN(t,e,n){switch(Bd[t]){case"NONE":return null;case"Schema":return e(n,new OT.Schema);case"DictionaryBatch":return e(n,new TT.DictionaryBatch);case"RecordBatch":return e(n,new IT.RecordBatch);case"Tensor":return e(n,new MT.Tensor);case"SparseTensor":return e(n,new BT.SparseTensor);default:return null}}ir.unionListToMessageHeader=mN;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferType=t.Type=t.MessageHeader=t.IntervalUnit=t.TimeUnit=t.DateUnit=t.Precision=t.UnionMode=t.MetadataVersion=void 0;var e=oa;Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return e.MetadataVersion}});var n=nu;Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return n.UnionMode}});var r=ru;Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return r.Precision}});var i=iu;Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return i.DateUnit}});var s=Rs;Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return s.TimeUnit}});var o=su;Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return o.IntervalUnit}});var a=ir;Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return a.MessageHeader}});var l;(function(c){c[c.NONE=0]="NONE",c[c.Null=1]="Null",c[c.Int=2]="Int",c[c.Float=3]="Float",c[c.Binary=4]="Binary",c[c.Utf8=5]="Utf8",c[c.Bool=6]="Bool",c[c.Decimal=7]="Decimal",c[c.Date=8]="Date",c[c.Time=9]="Time",c[c.Timestamp=10]="Timestamp",c[c.Interval=11]="Interval",c[c.List=12]="List",c[c.Struct=13]="Struct",c[c.Union=14]="Union",c[c.FixedSizeBinary=15]="FixedSizeBinary",c[c.FixedSizeList=16]="FixedSizeList",c[c.Map=17]="Map",c[c.Duration=18]="Duration",c[c.LargeBinary=19]="LargeBinary",c[c.LargeUtf8=20]="LargeUtf8",c[c.Dictionary=-1]="Dictionary",c[c.Int8=-2]="Int8",c[c.Int16=-3]="Int16",c[c.Int32=-4]="Int32",c[c.Int64=-5]="Int64",c[c.Uint8=-6]="Uint8",c[c.Uint16=-7]="Uint16",c[c.Uint32=-8]="Uint32",c[c.Uint64=-9]="Uint64",c[c.Float16=-10]="Float16",c[c.Float32=-11]="Float32",c[c.Float64=-12]="Float64",c[c.DateDay=-13]="DateDay",c[c.DateMillisecond=-14]="DateMillisecond",c[c.TimestampSecond=-15]="TimestampSecond",c[c.TimestampMillisecond=-16]="TimestampMillisecond",c[c.TimestampMicrosecond=-17]="TimestampMicrosecond",c[c.TimestampNanosecond=-18]="TimestampNanosecond",c[c.TimeSecond=-19]="TimeSecond",c[c.TimeMillisecond=-20]="TimeMillisecond",c[c.TimeMicrosecond=-21]="TimeMicrosecond",c[c.TimeNanosecond=-22]="TimeNanosecond",c[c.DenseUnion=-23]="DenseUnion",c[c.SparseUnion=-24]="SparseUnion",c[c.IntervalDayTime=-25]="IntervalDayTime",c[c.IntervalYearMonth=-26]="IntervalYearMonth",c[c.DurationSecond=-27]="DurationSecond",c[c.DurationMillisecond=-28]="DurationMillisecond",c[c.DurationMicrosecond=-29]="DurationMicrosecond",c[c.DurationNanosecond=-30]="DurationNanosecond"})(l||(t.Type=l={}));var u;(function(c){c[c.OFFSET=0]="OFFSET",c[c.DATA=1]="DATA",c[c.VALIDITY=2]="VALIDITY",c[c.TYPE=3]="TYPE"})(u||(t.BufferType=u={}))})(Ne);var fr={},jh={},Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.valueToString=void 0;const yN=void 0;function kT(t){if(t===null)return"null";if(t===yN)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>kT(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}Cs.valueToString=kT;var Lh={},If={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BN=t.bigNumToBigInt=t.bigNumToString=t.isArrowBigNumSymbol=void 0;const e=L;t.isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function n(u,...c){return c.length===0?Object.setPrototypeOf((0,e.toArrayBufferView)(this.TypedArray,u),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(u,...c),this.constructor.prototype)}n.prototype[t.isArrowBigNumSymbol]=!0,n.prototype.toJSON=function(){return`"${(0,t.bigNumToString)(this)}"`},n.prototype.valueOf=function(){return o(this)},n.prototype.toString=function(){return(0,t.bigNumToString)(this)},n.prototype[Symbol.toPrimitive]=function(u="default"){switch(u){case"number":return o(this);case"string":return(0,t.bigNumToString)(this);case"default":return(0,t.bigNumToBigInt)(this)}return(0,t.bigNumToString)(this)};function r(...u){return n.apply(this,u)}function i(...u){return n.apply(this,u)}function s(...u){return n.apply(this,u)}Object.setPrototypeOf(r.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(i.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(s.prototype,Object.create(Uint32Array.prototype)),Object.assign(r.prototype,n.prototype,{constructor:r,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(i.prototype,n.prototype,{constructor:i,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(s.prototype,n.prototype,{constructor:s,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function o(u){const{buffer:c,byteOffset:f,length:d,signed:h}=u,m=new BigUint64Array(c,f,d),b=h&&m.at(-1)&BigInt(1)<<BigInt(63);let _=BigInt(b?1:0),p=BigInt(0);if(b){for(const g of m)_+=~g*(BigInt(1)<<BigInt(32)*p++);_*=BigInt(-1)}else for(const g of m)_+=g*(BigInt(1)<<BigInt(32)*p++);return _}t.bigNumToString=u=>{if(u.byteLength===8)return`${new u.BigIntArray(u.buffer,u.byteOffset,1)[0]}`;if(!u.signed)return a(u);let c=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2);if(new Int16Array([c.at(-1)])[0]>=0)return a(u);c=c.slice();let d=1;for(let m=0;m<c.length;m++){const b=c[m],_=~b+d;c[m]=_,d&=b===0?1:0}return`-${a(c)}`},t.bigNumToBigInt=u=>u.byteLength===8?new u.BigIntArray(u.buffer,u.byteOffset,1)[0]:(0,t.bigNumToString)(u);function a(u){let c="";const f=new Uint32Array(2);let d=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2);const h=new Uint32Array((d=new Uint16Array(d).reverse()).buffer);let m=-1;const b=d.length-1;do{for(f[0]=d[m=0];m<b;)d[m++]=f[1]=f[0]/10,f[0]=(f[0]-f[1]*10<<16)+d[m];d[m]=f[1]=f[0]/10,f[0]=f[0]-f[1]*10,c=`${f[0]}${c}`}while(h[0]||h[1]||h[2]||h[3]);return c??"0"}class l{static new(c,f){switch(f){case!0:return new r(c);case!1:return new i(c)}switch(c.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new r(c)}return c.byteLength===16?new s(c):new i(c)}static signed(c){return new r(c)}static unsigned(c){return new i(c)}static decimal(c){return new s(c)}constructor(c,f){return l.new(c,f)}}t.BN=l})(If);var mt={},R={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.bigIntToNumber=void 0;function gN(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}Cr.bigIntToNumber=gN;var ET,DT,AT,NT,RT,CT,FT,PT,jT,LT,UT,xT,VT,zT,$T,HT,WT,KT,qT,JT,GT,YT;Object.defineProperty(R,"__esModule",{value:!0});R.Map_=R.FixedSizeList=R.FixedSizeBinary=R.SparseUnion=R.DenseUnion=R.Union=R.Struct=R.List=R.DurationNanosecond=R.DurationMicrosecond=R.DurationMillisecond=R.DurationSecond=R.Duration=R.IntervalYearMonth=R.IntervalDayTime=R.Interval=R.TimestampNanosecond=R.TimestampMicrosecond=R.TimestampMillisecond=R.TimestampSecond=R.Timestamp=R.TimeNanosecond=R.TimeMicrosecond=R.TimeMillisecond=R.TimeSecond=R.Time=R.DateMillisecond=R.DateDay=R.Date_=R.Decimal=R.Bool=R.LargeUtf8=R.Utf8=R.LargeBinary=R.Binary=R.Float64=R.Float32=R.Float16=R.Float=R.Uint64=R.Uint32=R.Uint16=R.Uint8=R.Int64=R.Int32=R.Int16=R.Int8=R.Int=R.Null=R.DataType=void 0;R.strideForType=R.Dictionary=void 0;const _N=Cr,x=Ne;class be{static isNull(e){return(e==null?void 0:e.typeId)===x.Type.Null}static isInt(e){return(e==null?void 0:e.typeId)===x.Type.Int}static isFloat(e){return(e==null?void 0:e.typeId)===x.Type.Float}static isBinary(e){return(e==null?void 0:e.typeId)===x.Type.Binary}static isLargeBinary(e){return(e==null?void 0:e.typeId)===x.Type.LargeBinary}static isUtf8(e){return(e==null?void 0:e.typeId)===x.Type.Utf8}static isLargeUtf8(e){return(e==null?void 0:e.typeId)===x.Type.LargeUtf8}static isBool(e){return(e==null?void 0:e.typeId)===x.Type.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===x.Type.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===x.Type.Date}static isTime(e){return(e==null?void 0:e.typeId)===x.Type.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===x.Type.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===x.Type.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===x.Type.Duration}static isList(e){return(e==null?void 0:e.typeId)===x.Type.List}static isStruct(e){return(e==null?void 0:e.typeId)===x.Type.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===x.Type.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===x.Type.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===x.Type.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===x.Type.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===x.Type.Dictionary}static isDenseUnion(e){return be.isUnion(e)&&e.mode===x.UnionMode.Dense}static isSparseUnion(e){return be.isUnion(e)&&e.mode===x.UnionMode.Sparse}constructor(e){this.typeId=e}}R.DataType=be;ET=Symbol.toStringTag;be[ET]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(be.prototype);class Em extends be{constructor(){super(x.Type.Null)}toString(){return"Null"}}R.Null=Em;DT=Symbol.toStringTag;Em[DT]=(t=>t[Symbol.toStringTag]="Null")(Em.prototype);class xn extends be{constructor(e,n){super(x.Type.Int),this.isSigned=e,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}R.Int=xn;AT=Symbol.toStringTag;xn[AT]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(xn.prototype);class QT extends xn{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}R.Int8=QT;class XT extends xn{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}R.Int16=XT;class ZT extends xn{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}R.Int32=ZT;let eI=class extends xn{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}};R.Int64=eI;class tI extends xn{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}R.Uint8=tI;class nI extends xn{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}R.Uint16=nI;class rI extends xn{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}R.Uint32=rI;let iI=class extends xn{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}};R.Uint64=iI;Object.defineProperty(QT.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(XT.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(ZT.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(eI.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(tI.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(nI.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(rI.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(iI.prototype,"ArrayType",{value:BigUint64Array});class xo extends be{constructor(e){super(x.Type.Float),this.precision=e}get ArrayType(){switch(this.precision){case x.Precision.HALF:return Uint16Array;case x.Precision.SINGLE:return Float32Array;case x.Precision.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}R.Float=xo;NT=Symbol.toStringTag;xo[NT]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(xo.prototype);class sI extends xo{constructor(){super(x.Precision.HALF)}}R.Float16=sI;class oI extends xo{constructor(){super(x.Precision.SINGLE)}}R.Float32=oI;class aI extends xo{constructor(){super(x.Precision.DOUBLE)}}R.Float64=aI;Object.defineProperty(sI.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(oI.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(aI.prototype,"ArrayType",{value:Float64Array});class Dm extends be{constructor(){super(x.Type.Binary)}toString(){return"Binary"}}R.Binary=Dm;RT=Symbol.toStringTag;Dm[RT]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Dm.prototype);class Am extends be{constructor(){super(x.Type.LargeBinary)}toString(){return"LargeBinary"}}R.LargeBinary=Am;CT=Symbol.toStringTag;Am[CT]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(Am.prototype);class Nm extends be{constructor(){super(x.Type.Utf8)}toString(){return"Utf8"}}R.Utf8=Nm;FT=Symbol.toStringTag;Nm[FT]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Nm.prototype);class Rm extends be{constructor(){super(x.Type.LargeUtf8)}toString(){return"LargeUtf8"}}R.LargeUtf8=Rm;PT=Symbol.toStringTag;Rm[PT]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(Rm.prototype);class Cm extends be{constructor(){super(x.Type.Bool)}toString(){return"Bool"}}R.Bool=Cm;jT=Symbol.toStringTag;Cm[jT]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Cm.prototype);class Fm extends be{constructor(e,n,r=128){super(x.Type.Decimal),this.scale=e,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}R.Decimal=Fm;LT=Symbol.toStringTag;Fm[LT]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Fm.prototype);class Pl extends be{constructor(e){super(x.Type.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${x.DateUnit[this.unit]}>`}}R.Date_=Pl;UT=Symbol.toStringTag;Pl[UT]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Pl.prototype);class bN extends Pl{constructor(){super(x.DateUnit.DAY)}}R.DateDay=bN;class vN extends Pl{constructor(){super(x.DateUnit.MILLISECOND)}}R.DateMillisecond=vN;class ws extends be{constructor(e,n){super(x.Type.Time),this.unit=e,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${x.TimeUnit[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}R.Time=ws;xT=Symbol.toStringTag;ws[xT]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(ws.prototype);class SN extends ws{constructor(){super(x.TimeUnit.SECOND,32)}}R.TimeSecond=SN;class wN extends ws{constructor(){super(x.TimeUnit.MILLISECOND,32)}}R.TimeMillisecond=wN;class TN extends ws{constructor(){super(x.TimeUnit.MICROSECOND,64)}}R.TimeMicrosecond=TN;class IN extends ws{constructor(){super(x.TimeUnit.NANOSECOND,64)}}R.TimeNanosecond=IN;class Ts extends be{constructor(e,n){super(x.Type.Timestamp),this.unit=e,this.timezone=n}toString(){return`Timestamp<${x.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}R.Timestamp=Ts;VT=Symbol.toStringTag;Ts[VT]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Ts.prototype);class ON extends Ts{constructor(e){super(x.TimeUnit.SECOND,e)}}R.TimestampSecond=ON;class BN extends Ts{constructor(e){super(x.TimeUnit.MILLISECOND,e)}}R.TimestampMillisecond=BN;class MN extends Ts{constructor(e){super(x.TimeUnit.MICROSECOND,e)}}R.TimestampMicrosecond=MN;class kN extends Ts{constructor(e){super(x.TimeUnit.NANOSECOND,e)}}R.TimestampNanosecond=kN;class jl extends be{constructor(e){super(x.Type.Interval),this.unit=e}toString(){return`Interval<${x.IntervalUnit[this.unit]}>`}}R.Interval=jl;zT=Symbol.toStringTag;jl[zT]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(jl.prototype);class EN extends jl{constructor(){super(x.IntervalUnit.DAY_TIME)}}R.IntervalDayTime=EN;class DN extends jl{constructor(){super(x.IntervalUnit.YEAR_MONTH)}}R.IntervalYearMonth=DN;class Is extends be{constructor(e){super(x.Type.Duration),this.unit=e}toString(){return`Duration<${x.TimeUnit[this.unit]}>`}}R.Duration=Is;$T=Symbol.toStringTag;Is[$T]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(Is.prototype);class AN extends Is{constructor(){super(x.TimeUnit.SECOND)}}R.DurationSecond=AN;class NN extends Is{constructor(){super(x.TimeUnit.MILLISECOND)}}R.DurationMillisecond=NN;class RN extends Is{constructor(){super(x.TimeUnit.MICROSECOND)}}R.DurationMicrosecond=RN;class CN extends Is{constructor(){super(x.TimeUnit.NANOSECOND)}}R.DurationNanosecond=CN;class Pm extends be{constructor(e){super(x.Type.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}R.List=Pm;HT=Symbol.toStringTag;Pm[HT]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Pm.prototype);class jm extends be{constructor(e){super(x.Type.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}R.Struct=jm;WT=Symbol.toStringTag;jm[WT]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(jm.prototype);class Ll extends be{constructor(e,n,r){super(x.Type.Union),this.mode=e,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}R.Union=Ll;KT=Symbol.toStringTag;Ll[KT]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Ll.prototype);class FN extends Ll{constructor(e,n){super(x.UnionMode.Dense,e,n)}}R.DenseUnion=FN;class PN extends Ll{constructor(e,n){super(x.UnionMode.Sparse,e,n)}}R.SparseUnion=PN;class Lm extends be{constructor(e){super(x.Type.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}R.FixedSizeBinary=Lm;qT=Symbol.toStringTag;Lm[qT]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Lm.prototype);class Um extends be{constructor(e,n){super(x.Type.FixedSizeList),this.listSize=e,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}R.FixedSizeList=Um;JT=Symbol.toStringTag;Um[JT]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Um.prototype);class xm extends be{constructor(e,n=!1){var r,i,s;if(super(x.Type.Map),this.children=[e],this.keysSorted=n,e&&(e.name="entries",!((r=e==null?void 0:e.type)===null||r===void 0)&&r.children)){const o=(i=e==null?void 0:e.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=e==null?void 0:e.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}R.Map_=xm;GT=Symbol.toStringTag;xm[GT]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(xm.prototype);const jN=(t=>()=>++t)(-1);class Vm extends be{constructor(e,n,r,i){super(x.Type.Dictionary),this.indices=n,this.dictionary=e,this.isOrdered=i||!1,this.id=r==null?jN():(0,_N.bigIntToNumber)(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}R.Dictionary=Vm;YT=Symbol.toStringTag;Vm[YT]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Vm.prototype);function LN(t){const e=t;switch(t.typeId){case x.Type.Decimal:return t.bitWidth/32;case x.Type.Timestamp:return 2;case x.Type.Date:return 1+e.unit;case x.Type.Interval:return 1+e.unit;case x.Type.FixedSizeList:return e.listSize;case x.Type.FixedSizeBinary:return e.byteWidth;default:return 1}}R.strideForType=LN;Object.defineProperty(mt,"__esModule",{value:!0});mt.Visitor=void 0;const k=Ne,tb=R;class ce{visitMany(e,...n){return e.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return UN(this,e,n)}getVisitFnByTypeId(e,n=!0){return Zs(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitLargeUtf8(e,...n){return null}visitBinary(e,...n){return null}visitLargeBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitDuration(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}mt.Visitor=ce;function UN(t,e,n=!0){return typeof e=="number"?Zs(t,e,n):typeof e=="string"&&e in k.Type?Zs(t,k.Type[e],n):e&&e instanceof tb.DataType?Zs(t,nb(e),n):e!=null&&e.type&&e.type instanceof tb.DataType?Zs(t,nb(e.type),n):Zs(t,k.Type.NONE,n)}function Zs(t,e,n=!0){let r=null;switch(e){case k.Type.Null:r=t.visitNull;break;case k.Type.Bool:r=t.visitBool;break;case k.Type.Int:r=t.visitInt;break;case k.Type.Int8:r=t.visitInt8||t.visitInt;break;case k.Type.Int16:r=t.visitInt16||t.visitInt;break;case k.Type.Int32:r=t.visitInt32||t.visitInt;break;case k.Type.Int64:r=t.visitInt64||t.visitInt;break;case k.Type.Uint8:r=t.visitUint8||t.visitInt;break;case k.Type.Uint16:r=t.visitUint16||t.visitInt;break;case k.Type.Uint32:r=t.visitUint32||t.visitInt;break;case k.Type.Uint64:r=t.visitUint64||t.visitInt;break;case k.Type.Float:r=t.visitFloat;break;case k.Type.Float16:r=t.visitFloat16||t.visitFloat;break;case k.Type.Float32:r=t.visitFloat32||t.visitFloat;break;case k.Type.Float64:r=t.visitFloat64||t.visitFloat;break;case k.Type.Utf8:r=t.visitUtf8;break;case k.Type.LargeUtf8:r=t.visitLargeUtf8;break;case k.Type.Binary:r=t.visitBinary;break;case k.Type.LargeBinary:r=t.visitLargeBinary;break;case k.Type.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case k.Type.Date:r=t.visitDate;break;case k.Type.DateDay:r=t.visitDateDay||t.visitDate;break;case k.Type.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case k.Type.Timestamp:r=t.visitTimestamp;break;case k.Type.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case k.Type.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case k.Type.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case k.Type.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case k.Type.Time:r=t.visitTime;break;case k.Type.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case k.Type.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case k.Type.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case k.Type.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case k.Type.Decimal:r=t.visitDecimal;break;case k.Type.List:r=t.visitList;break;case k.Type.Struct:r=t.visitStruct;break;case k.Type.Union:r=t.visitUnion;break;case k.Type.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case k.Type.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case k.Type.Dictionary:r=t.visitDictionary;break;case k.Type.Interval:r=t.visitInterval;break;case k.Type.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case k.Type.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case k.Type.Duration:r=t.visitDuration;break;case k.Type.DurationSecond:r=t.visitDurationSecond||t.visitDuration;break;case k.Type.DurationMillisecond:r=t.visitDurationMillisecond||t.visitDuration;break;case k.Type.DurationMicrosecond:r=t.visitDurationMicrosecond||t.visitDuration;break;case k.Type.DurationNanosecond:r=t.visitDurationNanosecond||t.visitDuration;break;case k.Type.FixedSizeList:r=t.visitFixedSizeList;break;case k.Type.Map:r=t.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${k.Type[e]}'`)}function nb(t){switch(t.typeId){case k.Type.Null:return k.Type.Null;case k.Type.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?k.Type.Int8:k.Type.Uint8;case 16:return n?k.Type.Int16:k.Type.Uint16;case 32:return n?k.Type.Int32:k.Type.Uint32;case 64:return n?k.Type.Int64:k.Type.Uint64}return k.Type.Int}case k.Type.Float:switch(t.precision){case k.Precision.HALF:return k.Type.Float16;case k.Precision.SINGLE:return k.Type.Float32;case k.Precision.DOUBLE:return k.Type.Float64}return k.Type.Float;case k.Type.Binary:return k.Type.Binary;case k.Type.LargeBinary:return k.Type.LargeBinary;case k.Type.Utf8:return k.Type.Utf8;case k.Type.LargeUtf8:return k.Type.LargeUtf8;case k.Type.Bool:return k.Type.Bool;case k.Type.Decimal:return k.Type.Decimal;case k.Type.Time:switch(t.unit){case k.TimeUnit.SECOND:return k.Type.TimeSecond;case k.TimeUnit.MILLISECOND:return k.Type.TimeMillisecond;case k.TimeUnit.MICROSECOND:return k.Type.TimeMicrosecond;case k.TimeUnit.NANOSECOND:return k.Type.TimeNanosecond}return k.Type.Time;case k.Type.Timestamp:switch(t.unit){case k.TimeUnit.SECOND:return k.Type.TimestampSecond;case k.TimeUnit.MILLISECOND:return k.Type.TimestampMillisecond;case k.TimeUnit.MICROSECOND:return k.Type.TimestampMicrosecond;case k.TimeUnit.NANOSECOND:return k.Type.TimestampNanosecond}return k.Type.Timestamp;case k.Type.Date:switch(t.unit){case k.DateUnit.DAY:return k.Type.DateDay;case k.DateUnit.MILLISECOND:return k.Type.DateMillisecond}return k.Type.Date;case k.Type.Interval:switch(t.unit){case k.IntervalUnit.DAY_TIME:return k.Type.IntervalDayTime;case k.IntervalUnit.YEAR_MONTH:return k.Type.IntervalYearMonth}return k.Type.Interval;case k.Type.Duration:switch(t.unit){case k.TimeUnit.SECOND:return k.Type.DurationSecond;case k.TimeUnit.MILLISECOND:return k.Type.DurationMillisecond;case k.TimeUnit.MICROSECOND:return k.Type.DurationMicrosecond;case k.TimeUnit.NANOSECOND:return k.Type.DurationNanosecond}return k.Type.Duration;case k.Type.Map:return k.Type.Map;case k.Type.List:return k.Type.List;case k.Type.Struct:return k.Type.Struct;case k.Type.Union:switch(t.mode){case k.UnionMode.Dense:return k.Type.DenseUnion;case k.UnionMode.Sparse:return k.Type.SparseUnion}return k.Type.Union;case k.Type.FixedSizeBinary:return k.Type.FixedSizeBinary;case k.Type.FixedSizeList:return k.Type.FixedSizeList;case k.Type.Dictionary:return k.Type.Dictionary}throw new Error(`Unrecognized type '${k.Type[t.typeId]}'`)}ce.prototype.visitInt8=null;ce.prototype.visitInt16=null;ce.prototype.visitInt32=null;ce.prototype.visitInt64=null;ce.prototype.visitUint8=null;ce.prototype.visitUint16=null;ce.prototype.visitUint32=null;ce.prototype.visitUint64=null;ce.prototype.visitFloat16=null;ce.prototype.visitFloat32=null;ce.prototype.visitFloat64=null;ce.prototype.visitDateDay=null;ce.prototype.visitDateMillisecond=null;ce.prototype.visitTimestampSecond=null;ce.prototype.visitTimestampMillisecond=null;ce.prototype.visitTimestampMicrosecond=null;ce.prototype.visitTimestampNanosecond=null;ce.prototype.visitTimeSecond=null;ce.prototype.visitTimeMillisecond=null;ce.prototype.visitTimeMicrosecond=null;ce.prototype.visitTimeNanosecond=null;ce.prototype.visitDenseUnion=null;ce.prototype.visitSparseUnion=null;ce.prototype.visitIntervalDayTime=null;ce.prototype.visitIntervalYearMonth=null;ce.prototype.visitDuration=null;ce.prototype.visitDurationSecond=null;ce.prototype.visitDurationMillisecond=null;ce.prototype.visitDurationMicrosecond=null;ce.prototype.visitDurationNanosecond=null;var Pa={},Uh={},Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.float64ToUint16=Nr.uint16ToFloat64=void 0;const lI=new Float64Array(1),$s=new Uint32Array(lI.buffer);function xN(t){const e=(t&31744)>>10,n=(t&1023)/1024,r=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}Nr.uint16ToFloat64=xN;function VN(t){if(t!==t)return 32256;lI[0]=t;const e=($s[1]&2147483648)>>16&65535;let n=$s[1]&2146435072,r=0;return n>=1089470464?$s[0]>0?n=31744:(n=(n&2080374784)>>16,r=($s[1]&1048575)>>10):n<=1056964608?(r=1048576+($s[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=($s[1]&1048575)+512>>10),e|n|r&65535}Nr.float64ToUint16=VN;var rb;function Sn(){return rb||(rb=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.setDuration=t.setDurationNanosecond=t.setDurationMicrosecond=t.setDurationMillisecond=t.setDurationSecond=t.setIntervalYearMonth=t.setIntervalDayTime=t.setIntervalValue=t.setDecimal=t.setTime=t.setTimeNanosecond=t.setTimeMicrosecond=t.setTimeMillisecond=t.setTimeSecond=t.setTimestamp=t.setTimestampNanosecond=t.setTimestampMicrosecond=t.setTimestampMillisecond=t.setTimestampSecond=t.setDate=t.setFixedSizeBinary=t.setDateMillisecond=t.setDateDay=t.setAnyFloat=t.setFloat16=t.setFloat=t.setInt=t.setVariableWidthBytes=t.setEpochMsToNanosecondsLong=t.setEpochMsToMicrosecondsLong=t.setEpochMsToMillisecondsLong=t.setEpochMsToDays=t.SetVisitor=void 0;const e=Ut(),n=mt,r=Cr,i=bn,s=Nr,o=Ne;class a extends n.Visitor{}t.SetVisitor=a;function l(D){return(A,N,B)=>{if(A.setValid(N,B!=null))return D(A,N,B)}}const u=(D,A,N)=>{D[A]=Math.trunc(N/864e5)};t.setEpochMsToDays=u;const c=(D,A,N)=>{D[A]=Math.trunc(N%4294967296),D[A+1]=Math.trunc(N/4294967296)};t.setEpochMsToMillisecondsLong=c;const f=(D,A,N)=>{D[A]=Math.trunc(N*1e3%4294967296),D[A+1]=Math.trunc(N*1e3/4294967296)};t.setEpochMsToMicrosecondsLong=f;const d=(D,A,N)=>{D[A]=Math.trunc(N*1e6%4294967296),D[A+1]=Math.trunc(N*1e6/4294967296)};t.setEpochMsToNanosecondsLong=d;const h=(D,A,N,B)=>{if(N+1<A.length){const I=(0,r.bigIntToNumber)(A[N]),O=(0,r.bigIntToNumber)(A[N+1]);D.set(B.subarray(0,O-I),I)}};t.setVariableWidthBytes=h;const m=({offset:D,values:A},N,B)=>{const I=D+N;B?A[I>>3]|=1<<I%8:A[I>>3]&=~(1<<I%8)},b=({values:D},A,N)=>{D[A]=N};t.setInt=b;const _=({values:D},A,N)=>{D[A]=N};t.setFloat=_;const p=({values:D},A,N)=>{D[A]=(0,s.float64ToUint16)(N)};t.setFloat16=p;const g=(D,A,N)=>{switch(D.type.precision){case o.Precision.HALF:return(0,t.setFloat16)(D,A,N);case o.Precision.SINGLE:case o.Precision.DOUBLE:return(0,t.setFloat)(D,A,N)}};t.setAnyFloat=g;const y=({values:D},A,N)=>{(0,t.setEpochMsToDays)(D,A,N.valueOf())};t.setDateDay=y;const S=({values:D},A,N)=>{(0,t.setEpochMsToMillisecondsLong)(D,A*2,N.valueOf())};t.setDateMillisecond=S;const T=({stride:D,values:A},N,B)=>{A.set(B.subarray(0,D),D*N)};t.setFixedSizeBinary=T;const v=({values:D,valueOffsets:A},N,B)=>(0,t.setVariableWidthBytes)(D,A,N,B),w=({values:D,valueOffsets:A},N,B)=>(0,t.setVariableWidthBytes)(D,A,N,(0,i.encodeUtf8)(B)),M=(D,A,N)=>{D.type.unit===o.DateUnit.DAY?(0,t.setDateDay)(D,A,N):(0,t.setDateMillisecond)(D,A,N)};t.setDate=M;const F=({values:D},A,N)=>(0,t.setEpochMsToMillisecondsLong)(D,A*2,N/1e3);t.setTimestampSecond=F;const C=({values:D},A,N)=>(0,t.setEpochMsToMillisecondsLong)(D,A*2,N);t.setTimestampMillisecond=C;const V=({values:D},A,N)=>(0,t.setEpochMsToMicrosecondsLong)(D,A*2,N);t.setTimestampMicrosecond=V;const X=({values:D},A,N)=>(0,t.setEpochMsToNanosecondsLong)(D,A*2,N);t.setTimestampNanosecond=X;const ve=(D,A,N)=>{switch(D.type.unit){case o.TimeUnit.SECOND:return(0,t.setTimestampSecond)(D,A,N);case o.TimeUnit.MILLISECOND:return(0,t.setTimestampMillisecond)(D,A,N);case o.TimeUnit.MICROSECOND:return(0,t.setTimestampMicrosecond)(D,A,N);case o.TimeUnit.NANOSECOND:return(0,t.setTimestampNanosecond)(D,A,N)}};t.setTimestamp=ve;const Et=({values:D},A,N)=>{D[A]=N};t.setTimeSecond=Et;const ee=({values:D},A,N)=>{D[A]=N};t.setTimeMillisecond=ee;const ke=({values:D},A,N)=>{D[A]=N};t.setTimeMicrosecond=ke;const ge=({values:D},A,N)=>{D[A]=N};t.setTimeNanosecond=ge;const U=(D,A,N)=>{switch(D.type.unit){case o.TimeUnit.SECOND:return(0,t.setTimeSecond)(D,A,N);case o.TimeUnit.MILLISECOND:return(0,t.setTimeMillisecond)(D,A,N);case o.TimeUnit.MICROSECOND:return(0,t.setTimeMicrosecond)(D,A,N);case o.TimeUnit.NANOSECOND:return(0,t.setTimeNanosecond)(D,A,N)}};t.setTime=U;const K=({values:D,stride:A},N,B)=>{D.set(B.subarray(0,A),A*N)};t.setDecimal=K;const q=(D,A,N)=>{const B=D.children[0],I=D.valueOffsets,O=t.instance.getVisitFn(B);if(Array.isArray(N))for(let E=-1,$=I[A],Q=I[A+1];$<Q;)O(B,$++,N[++E]);else for(let E=-1,$=I[A],Q=I[A+1];$<Q;)O(B,$++,N.get(++E))},de=(D,A,N)=>{const B=D.children[0],{valueOffsets:I}=D,O=t.instance.getVisitFn(B);let{[A]:E,[A+1]:$}=I;const Q=N instanceof Map?N.entries():Object.entries(N);for(const ue of Q)if(O(B,E,ue),++E>=$)break},pe=(D,A)=>(N,B,I,O)=>B&&N(B,D,A[O]),xt=(D,A)=>(N,B,I,O)=>B&&N(B,D,A.get(O)),lt=(D,A)=>(N,B,I,O)=>B&&N(B,D,A.get(I.name)),tn=(D,A)=>(N,B,I,O)=>B&&N(B,D,A[I.name]),gt=(D,A,N)=>{const B=D.type.children.map(O=>t.instance.getVisitFn(O.type)),I=N instanceof Map?lt(A,N):N instanceof e.Vector?xt(A,N):Array.isArray(N)?pe(A,N):tn(A,N);D.type.children.forEach((O,E)=>I(B[E],D.children[E],O,E))},nn=(D,A,N)=>{D.type.mode===o.UnionMode.Dense?Ur(D,A,N):xr(D,A,N)},Ur=(D,A,N)=>{const B=D.type.typeIdToChildIndex[D.typeIds[A]],I=D.children[B];t.instance.visit(I,D.valueOffsets[A],N)},xr=(D,A,N)=>{const B=D.type.typeIdToChildIndex[D.typeIds[A]],I=D.children[B];t.instance.visit(I,A,N)},xi=(D,A,N)=>{var B;(B=D.dictionary)===null||B===void 0||B.set(D.values[A],N)},Vr=(D,A,N)=>{D.type.unit===o.IntervalUnit.DAY_TIME?(0,t.setIntervalDayTime)(D,A,N):(0,t.setIntervalYearMonth)(D,A,N)};t.setIntervalValue=Vr;const $n=({values:D},A,N)=>{D.set(N.subarray(0,2),2*A)};t.setIntervalDayTime=$n;const dr=({values:D},A,N)=>{D[A]=N[0]*12+N[1]%12};t.setIntervalYearMonth=dr;const Ps=({values:D},A,N)=>{D[A]=N};t.setDurationSecond=Ps;const js=({values:D},A,N)=>{D[A]=N};t.setDurationMillisecond=js;const Ls=({values:D},A,N)=>{D[A]=N};t.setDurationMicrosecond=Ls;const Us=({values:D},A,N)=>{D[A]=N};t.setDurationNanosecond=Us;const xs=(D,A,N)=>{switch(D.type.unit){case o.TimeUnit.SECOND:return(0,t.setDurationSecond)(D,A,N);case o.TimeUnit.MILLISECOND:return(0,t.setDurationMillisecond)(D,A,N);case o.TimeUnit.MICROSECOND:return(0,t.setDurationMicrosecond)(D,A,N);case o.TimeUnit.NANOSECOND:return(0,t.setDurationNanosecond)(D,A,N)}};t.setDuration=xs;const Vs=(D,A,N)=>{const{stride:B}=D,I=D.children[0],O=t.instance.getVisitFn(I);if(Array.isArray(N))for(let E=-1,$=A*B;++E<B;)O(I,$+E,N[E]);else for(let E=-1,$=A*B;++E<B;)O(I,$+E,N.get(E))};a.prototype.visitBool=l(m),a.prototype.visitInt=l(t.setInt),a.prototype.visitInt8=l(t.setInt),a.prototype.visitInt16=l(t.setInt),a.prototype.visitInt32=l(t.setInt),a.prototype.visitInt64=l(t.setInt),a.prototype.visitUint8=l(t.setInt),a.prototype.visitUint16=l(t.setInt),a.prototype.visitUint32=l(t.setInt),a.prototype.visitUint64=l(t.setInt),a.prototype.visitFloat=l(t.setAnyFloat),a.prototype.visitFloat16=l(t.setFloat16),a.prototype.visitFloat32=l(t.setFloat),a.prototype.visitFloat64=l(t.setFloat),a.prototype.visitUtf8=l(w),a.prototype.visitLargeUtf8=l(w),a.prototype.visitBinary=l(v),a.prototype.visitLargeBinary=l(v),a.prototype.visitFixedSizeBinary=l(t.setFixedSizeBinary),a.prototype.visitDate=l(t.setDate),a.prototype.visitDateDay=l(t.setDateDay),a.prototype.visitDateMillisecond=l(t.setDateMillisecond),a.prototype.visitTimestamp=l(t.setTimestamp),a.prototype.visitTimestampSecond=l(t.setTimestampSecond),a.prototype.visitTimestampMillisecond=l(t.setTimestampMillisecond),a.prototype.visitTimestampMicrosecond=l(t.setTimestampMicrosecond),a.prototype.visitTimestampNanosecond=l(t.setTimestampNanosecond),a.prototype.visitTime=l(t.setTime),a.prototype.visitTimeSecond=l(t.setTimeSecond),a.prototype.visitTimeMillisecond=l(t.setTimeMillisecond),a.prototype.visitTimeMicrosecond=l(t.setTimeMicrosecond),a.prototype.visitTimeNanosecond=l(t.setTimeNanosecond),a.prototype.visitDecimal=l(t.setDecimal),a.prototype.visitList=l(q),a.prototype.visitStruct=l(gt),a.prototype.visitUnion=l(nn),a.prototype.visitDenseUnion=l(Ur),a.prototype.visitSparseUnion=l(xr),a.prototype.visitDictionary=l(xi),a.prototype.visitInterval=l(t.setIntervalValue),a.prototype.visitIntervalDayTime=l(t.setIntervalDayTime),a.prototype.visitIntervalYearMonth=l(t.setIntervalYearMonth),a.prototype.visitDuration=l(t.setDuration),a.prototype.visitDurationSecond=l(t.setDurationSecond),a.prototype.visitDurationMillisecond=l(t.setDurationMillisecond),a.prototype.visitDurationMicrosecond=l(t.setDurationMicrosecond),a.prototype.visitDurationNanosecond=l(t.setDurationNanosecond),a.prototype.visitFixedSizeList=l(Vs),a.prototype.visitMap=l(de),t.instance=new a}(Uh)),Uh}var ib;function vg(){if(ib)return Pa;ib=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.StructRow=void 0;const t=Cs,e=va(),n=Sn(),r=Symbol.for("parent"),i=Symbol.for("rowIndex");class s{constructor(u,c){return this[r]=u,this[i]=c,new Proxy(this,new a)}toArray(){return Object.values(this.toJSON())}toJSON(){const u=this[i],c=this[r],f=c.type.children,d={};for(let h=-1,m=f.length;++h<m;)d[f[h].name]=e.instance.visit(c.children[h],u);return d}toString(){return`{${[...this].map(([u,c])=>`${(0,t.valueToString)(u)}: ${(0,t.valueToString)(c)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new o(this[r],this[i])}}Pa.StructRow=s;class o{constructor(u,c){this.childIndex=0,this.children=u.children,this.rowIndex=c,this.childFields=u.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const u=this.childIndex;return u<this.numChildren?(this.childIndex=u+1,{done:!1,value:[this.childFields[u].name,e.instance.visit(this.children[u],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[r]:{writable:!0,enumerable:!1,configurable:!1,value:null},[i]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class a{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(u){return u[r].type.children.map(c=>c.name)}has(u,c){return u[r].type.children.findIndex(f=>f.name===c)!==-1}getOwnPropertyDescriptor(u,c){if(u[r].type.children.findIndex(f=>f.name===c)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(u,c){if(Reflect.has(u,c))return u[c];const f=u[r].type.children.findIndex(d=>d.name===c);if(f!==-1){const d=e.instance.visit(u[r].children[f],u[i]);return Reflect.set(u,c,d),d}}set(u,c,f){const d=u[r].type.children.findIndex(h=>h.name===c);return d!==-1?(n.instance.visit(u[r].children[d],u[i],f),Reflect.set(u,c,f)):Reflect.has(u,c)||typeof c=="symbol"?Reflect.set(u,c,f):!1}}return Pa}var sb;function va(){return sb||(sb=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.GetVisitor=void 0;const e=If,n=Ut(),r=mt,i=Of(),s=vg(),o=Cr,a=bn,l=Nr,u=Ne;class c extends r.Visitor{}t.GetVisitor=c;function f(I){return(O,E)=>O.getValid(E)?I(O,E):null}const d=(I,O)=>864e5*I[O],h=(I,O)=>4294967296*I[O+1]+(I[O]>>>0),m=(I,O)=>4294967296*(I[O+1]/1e3)+(I[O]>>>0)/1e3,b=(I,O)=>4294967296*(I[O+1]/1e6)+(I[O]>>>0)/1e6,_=I=>new Date(I),p=(I,O)=>_(d(I,O)),g=(I,O)=>_(h(I,O)),y=(I,O)=>null,S=(I,O,E)=>{if(E+1>=O.length)return null;const $=(0,o.bigIntToNumber)(O[E]),Q=(0,o.bigIntToNumber)(O[E+1]);return I.subarray($,Q)},T=({offset:I,values:O},E)=>{const $=I+E;return(O[$>>3]&1<<$%8)!==0},v=({values:I},O)=>p(I,O),w=({values:I},O)=>g(I,O*2),M=({stride:I,values:O},E)=>O[I*E],F=({stride:I,values:O},E)=>(0,l.uint16ToFloat64)(O[I*E]),C=({values:I},O)=>I[O],V=({stride:I,values:O},E)=>O.subarray(I*E,I*(E+1)),X=({values:I,valueOffsets:O},E)=>S(I,O,E),ve=({values:I,valueOffsets:O},E)=>{const $=S(I,O,E);return $!==null?(0,a.decodeUtf8)($):null},Et=({values:I},O)=>I[O],ee=({type:I,values:O},E)=>I.precision!==u.Precision.HALF?O[E]:(0,l.uint16ToFloat64)(O[E]),ke=(I,O)=>I.type.unit===u.DateUnit.DAY?v(I,O):w(I,O),ge=({values:I},O)=>1e3*h(I,O*2),U=({values:I},O)=>h(I,O*2),K=({values:I},O)=>m(I,O*2),q=({values:I},O)=>b(I,O*2),de=(I,O)=>{switch(I.type.unit){case u.TimeUnit.SECOND:return ge(I,O);case u.TimeUnit.MILLISECOND:return U(I,O);case u.TimeUnit.MICROSECOND:return K(I,O);case u.TimeUnit.NANOSECOND:return q(I,O)}},pe=({values:I},O)=>I[O],xt=({values:I},O)=>I[O],lt=({values:I},O)=>I[O],tn=({values:I},O)=>I[O],gt=(I,O)=>{switch(I.type.unit){case u.TimeUnit.SECOND:return pe(I,O);case u.TimeUnit.MILLISECOND:return xt(I,O);case u.TimeUnit.MICROSECOND:return lt(I,O);case u.TimeUnit.NANOSECOND:return tn(I,O)}},nn=({values:I,stride:O},E)=>e.BN.decimal(I.subarray(O*E,O*(E+1))),Ur=(I,O)=>{const{valueOffsets:E,stride:$,children:Q}=I,{[O*$]:ue,[O*$+1]:Dt}=E,zu=Q[0].slice(ue,Dt-ue);return new n.Vector([zu])},xr=(I,O)=>{const{valueOffsets:E,children:$}=I,{[O]:Q,[O+1]:ue}=E,Dt=$[0];return new i.MapRow(Dt.slice(Q,ue-Q))},xi=(I,O)=>new s.StructRow(I,O),Vr=(I,O)=>I.type.mode===u.UnionMode.Dense?$n(I,O):dr(I,O),$n=(I,O)=>{const E=I.type.typeIdToChildIndex[I.typeIds[O]],$=I.children[E];return t.instance.visit($,I.valueOffsets[O])},dr=(I,O)=>{const E=I.type.typeIdToChildIndex[I.typeIds[O]],$=I.children[E];return t.instance.visit($,O)},Ps=(I,O)=>{var E;return(E=I.dictionary)===null||E===void 0?void 0:E.get(I.values[O])},js=(I,O)=>I.type.unit===u.IntervalUnit.DAY_TIME?Ls(I,O):Us(I,O),Ls=({values:I},O)=>I.subarray(2*O,2*(O+1)),Us=({values:I},O)=>{const E=I[O],$=new Int32Array(2);return $[0]=Math.trunc(E/12),$[1]=Math.trunc(E%12),$},xs=({values:I},O)=>I[O],Vs=({values:I},O)=>I[O],D=({values:I},O)=>I[O],A=({values:I},O)=>I[O],N=(I,O)=>{switch(I.type.unit){case u.TimeUnit.SECOND:return xs(I,O);case u.TimeUnit.MILLISECOND:return Vs(I,O);case u.TimeUnit.MICROSECOND:return D(I,O);case u.TimeUnit.NANOSECOND:return A(I,O)}},B=(I,O)=>{const{stride:E,children:$}=I,ue=$[0].slice(O*E,E);return new n.Vector([ue])};c.prototype.visitNull=f(y),c.prototype.visitBool=f(T),c.prototype.visitInt=f(Et),c.prototype.visitInt8=f(M),c.prototype.visitInt16=f(M),c.prototype.visitInt32=f(M),c.prototype.visitInt64=f(C),c.prototype.visitUint8=f(M),c.prototype.visitUint16=f(M),c.prototype.visitUint32=f(M),c.prototype.visitUint64=f(C),c.prototype.visitFloat=f(ee),c.prototype.visitFloat16=f(F),c.prototype.visitFloat32=f(M),c.prototype.visitFloat64=f(M),c.prototype.visitUtf8=f(ve),c.prototype.visitLargeUtf8=f(ve),c.prototype.visitBinary=f(X),c.prototype.visitLargeBinary=f(X),c.prototype.visitFixedSizeBinary=f(V),c.prototype.visitDate=f(ke),c.prototype.visitDateDay=f(v),c.prototype.visitDateMillisecond=f(w),c.prototype.visitTimestamp=f(de),c.prototype.visitTimestampSecond=f(ge),c.prototype.visitTimestampMillisecond=f(U),c.prototype.visitTimestampMicrosecond=f(K),c.prototype.visitTimestampNanosecond=f(q),c.prototype.visitTime=f(gt),c.prototype.visitTimeSecond=f(pe),c.prototype.visitTimeMillisecond=f(xt),c.prototype.visitTimeMicrosecond=f(lt),c.prototype.visitTimeNanosecond=f(tn),c.prototype.visitDecimal=f(nn),c.prototype.visitList=f(Ur),c.prototype.visitStruct=f(xi),c.prototype.visitUnion=f(Vr),c.prototype.visitDenseUnion=f($n),c.prototype.visitSparseUnion=f(dr),c.prototype.visitDictionary=f(Ps),c.prototype.visitInterval=f(js),c.prototype.visitIntervalDayTime=f(Ls),c.prototype.visitIntervalYearMonth=f(Us),c.prototype.visitDuration=f(N),c.prototype.visitDurationSecond=f(xs),c.prototype.visitDurationMillisecond=f(Vs),c.prototype.visitDurationMicrosecond=f(D),c.prototype.visitDurationNanosecond=f(A),c.prototype.visitFixedSizeList=f(B),c.prototype.visitMap=f(xr),t.instance=new c}(Lh)),Lh}var ob;function Of(){return ob||(ob=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MapRow=t.kVals=t.kKeys=void 0;const e=Ut(),n=Cs,r=va(),i=Sn();t.kKeys=Symbol.for("keys"),t.kVals=Symbol.for("vals");class s{constructor(u){return this[t.kKeys]=new e.Vector([u.children[0]]).memoize(),this[t.kVals]=u.children[1],new Proxy(this,new a)}[Symbol.iterator](){return new o(this[t.kKeys],this[t.kVals])}get size(){return this[t.kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const u=this[t.kKeys],c=this[t.kVals],f={};for(let d=-1,h=u.length;++d<h;)f[u.get(d)]=r.instance.visit(c,d);return f}toString(){return`{${[...this].map(([u,c])=>`${(0,n.valueToString)(u)}: ${(0,n.valueToString)(c)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}t.MapRow=s;class o{constructor(u,c){this.keys=u,this.vals=c,this.keyIndex=0,this.numKeys=u.length}[Symbol.iterator](){return this}next(){const u=this.keyIndex;return u===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(u),r.instance.visit(this.vals,u)]})}}class a{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(u){return u[t.kKeys].toArray().map(String)}has(u,c){return u[t.kKeys].includes(c)}getOwnPropertyDescriptor(u,c){if(u[t.kKeys].indexOf(c)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(u,c){if(Reflect.has(u,c))return u[c];const f=u[t.kKeys].indexOf(c);if(f!==-1){const d=r.instance.visit(Reflect.get(u,t.kVals),f);return Reflect.set(u,c,d),d}}set(u,c,f){const d=u[t.kKeys].indexOf(c);return d!==-1?(i.instance.visit(Reflect.get(u,t.kVals),d,f),Reflect.set(u,c,f)):Reflect.has(u,c)?Reflect.set(u,c,f):!1}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[t.kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[t.kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null}})}(jh)),jh}var ab;function Bf(){if(ab)return fr;ab=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.createElementComparator=fr.clampRange=fr.clampIndex=void 0;const t=Ut(),e=Of(),n=vg(),r=L;function i(p,g,y){const S=p.length,T=g>-1?g:S+g%S;return y?y(p,T):T}fr.clampIndex=i;let s;function o(p,g,y,S){const{length:T=0}=p;let v=typeof g!="number"?0:g,w=typeof y!="number"?T:y;return v<0&&(v=(v%T+T)%T),w<0&&(w=(w%T+T)%T),w<v&&(s=v,v=w,w=s),w>T&&(w=T),S?S(p,v,w):[v,w]}fr.clampRange=o;const a=p=>p!==p;function l(p){if(typeof p!=="object"||p===null)return a(p)?a:y=>y===p;if(p instanceof Date){const y=p.valueOf();return S=>S instanceof Date?S.valueOf()===y:!1}return ArrayBuffer.isView(p)?y=>y?(0,r.compareArrayLike)(p,y):!1:p instanceof Map?c(p):Array.isArray(p)?u(p):p instanceof t.Vector?f(p):d(p,!0)}fr.createElementComparator=l;function u(p){const g=[];for(let y=-1,S=p.length;++y<S;)g[y]=l(p[y]);return h(g)}function c(p){let g=-1;const y=[];for(const S of p.values())y[++g]=l(S);return h(y)}function f(p){const g=[];for(let y=-1,S=p.length;++y<S;)g[y]=l(p.get(y));return h(g)}function d(p,g=!1){const y=Object.keys(p);if(!g&&y.length===0)return()=>!1;const S=[];for(let T=-1,v=y.length;++T<v;)S[T]=l(p[y[T]]);return h(S,y)}function h(p,g){return y=>{if(!y||typeof y!="object")return!1;switch(y.constructor){case Array:return m(p,y);case Map:return _(p,y,y.keys());case e.MapRow:case n.StructRow:case Object:case void 0:return _(p,y,g||Object.keys(y))}return y instanceof t.Vector?b(p,y):!1}}function m(p,g){const y=p.length;if(g.length!==y)return!1;for(let S=-1;++S<y;)if(!p[S](g[S]))return!1;return!0}function b(p,g){const y=p.length;if(g.length!==y)return!1;for(let S=-1;++S<y;)if(!p[S](g.get(S)))return!1;return!0}function _(p,g,y){const S=y[Symbol.iterator](),T=g instanceof Map?g.keys():Object.keys(g)[Symbol.iterator](),v=g instanceof Map?g.values():Object.values(g)[Symbol.iterator]();let w=0;const M=p.length;let F=v.next(),C=S.next(),V=T.next();for(;w<M&&!C.done&&!V.done&&!F.done&&!(C.value!==V.value||!p[w](F.value));++w,C=S.next(),V=T.next(),F=v.next());return w===M&&C.done&&V.done&&F.done?!0:(S.return&&S.return(),T.return&&T.return(),v.return&&v.return(),!1)}return fr}var xh={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.popcnt_uint32=Ie.popcnt_array=Ie.popcnt_bit_range=Ie.BitIterator=Ie.packBools=Ie.truncateBitmap=Ie.setBool=Ie.getBit=Ie.getBool=void 0;function uI(t,e,n,r){return(n&1<<r)!==0}Ie.getBool=uI;function cI(t,e,n,r){return(n&1<<r)>>r}Ie.getBit=cI;function zN(t,e,n){return n?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1}Ie.setBool=zN;function $N(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8===0?n.subarray(t>>3):dI(new Sg(n,t,e,null,uI)).subarray(0,r)),i}return n}Ie.truncateBitmap=$N;function dI(t){const e=[];let n=0,r=0,i=0;for(const o of t)o&&(i|=1<<r),++r===8&&(e[n++]=i,i=r=0);(n===0||r>0)&&(e[n++]=i);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}Ie.packBools=dI;class Sg{constructor(e,n,r,i,s){this.bytes=e,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}Ie.BitIterator=Sg;function zm(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const o of new Sg(t,e,n-e,t,cI))s+=o;return s}const r=n>>3<<3,i=e+(e%8===0?0:8-e%8);return zm(t,e,i)+zm(t,r,n)+fI(t,i>>3,r-i>>3)}Ie.popcnt_bit_range=zm;function fI(t,e,n){let r=0,i=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:i+n;for(;o-i>=4;)r+=Pc(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Pc(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Pc(s.getUint8(i)),i+=1;return r}Ie.popcnt_array=fI;function Pc(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}Ie.popcnt_uint32=Pc;var lb;function Fr(){return lb||(lb=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeData=t.Data=t.kUnknownNullCount=void 0;const e=Ut(),n=Ne,r=R,i=Ie;t.kUnknownNullCount=-1;class s{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:d}=this;return r.DataType.isSparseUnion(d)?this.children.some(h=>h.nullable):r.DataType.isDenseUnion(d)?this.children.some(h=>h.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let d=0;const{valueOffsets:h,values:m,nullBitmap:b,typeIds:_}=this;return h&&(d+=h.byteLength),m&&(d+=m.byteLength),b&&(d+=b.byteLength),_&&(d+=_.byteLength),this.children.reduce((p,g)=>p+g.byteLength,d)}get nullCount(){if(r.DataType.isUnion(this.type))return this.children.reduce((m,b)=>m+b.nullCount,0);let d=this._nullCount,h;return d<=t.kUnknownNullCount&&(h=this.nullBitmap)&&(this._nullCount=d=this.length-(0,i.popcnt_bit_range)(h,this.offset,this.offset+this.length)),d}constructor(d,h,m,b,_,p=[],g){this.type=d,this.children=p,this.dictionary=g,this.offset=Math.floor(Math.max(h||0,0)),this.length=Math.floor(Math.max(m||0,0)),this._nullCount=Math.floor(Math.max(b||0,-1));let y;_ instanceof s?(this.stride=_.stride,this.values=_.values,this.typeIds=_.typeIds,this.nullBitmap=_.nullBitmap,this.valueOffsets=_.valueOffsets):(this.stride=(0,r.strideForType)(d),_&&((y=_[0])&&(this.valueOffsets=y),(y=_[1])&&(this.values=y),(y=_[2])&&(this.nullBitmap=y),(y=_[3])&&(this.typeIds=y)))}getValid(d){const{type:h}=this;if(r.DataType.isUnion(h)){const m=h,b=this.children[m.typeIdToChildIndex[this.typeIds[d]]],_=m.mode===n.UnionMode.Dense?this.valueOffsets[d]:d;return b.getValid(_)}if(this.nullable&&this.nullCount>0){const m=this.offset+d;return(this.nullBitmap[m>>3]&1<<m%8)!==0}return!0}setValid(d,h){let m;const{type:b}=this;if(r.DataType.isUnion(b)){const _=b,p=this.children[_.typeIdToChildIndex[this.typeIds[d]]],g=_.mode===n.UnionMode.Dense?this.valueOffsets[d]:d;m=p.getValid(g),p.setValid(g,h)}else{let{nullBitmap:_}=this;const{offset:p,length:g}=this,y=p+d,S=1<<y%8,T=y>>3;(!_||_.byteLength<=T)&&(_=new Uint8Array((p+g+63&-64)>>3).fill(255),this.nullCount>0&&_.set((0,i.truncateBitmap)(p,g,this.nullBitmap),0),Object.assign(this,{nullBitmap:_,_nullCount:-1}));const v=_[T];m=(v&S)!==0,h?_[T]=v|S:_[T]=v&~S}return m!==!!h&&(this._nullCount=this.nullCount+(h?-1:1)),h}clone(d=this.type,h=this.offset,m=this.length,b=this._nullCount,_=this,p=this.children){return new s(d,h,m,b,_,p,this.dictionary)}slice(d,h){const{stride:m,typeId:b,children:_}=this,p=+(this._nullCount===0)-1,g=b===16?m:1,y=this._sliceBuffers(d,h,m,b);return this.clone(this.type,this.offset+d,h,p,y,_.length===0||this.valueOffsets?_:this._sliceChildren(_,g*d,g*h))}_changeLengthAndBackfillNullBitmap(d){if(this.typeId===n.Type.Null)return this.clone(this.type,0,d,0);const{length:h,nullCount:m}=this,b=new Uint8Array((d+63&-64)>>3).fill(255,0,h>>3);b[h>>3]=(1<<h-(h&-8))-1,m>0&&b.set((0,i.truncateBitmap)(this.offset,h,this.nullBitmap),0);const _=this.buffers;return _[n.BufferType.VALIDITY]=b,this.clone(this.type,0,d,m+(d-h),_)}_sliceBuffers(d,h,m,b){let _;const{buffers:p}=this;return(_=p[n.BufferType.TYPE])&&(p[n.BufferType.TYPE]=_.subarray(d,d+h)),(_=p[n.BufferType.OFFSET])&&(p[n.BufferType.OFFSET]=_.subarray(d,d+h+1))||(_=p[n.BufferType.DATA])&&(p[n.BufferType.DATA]=b===6?_:_.subarray(m*d,m*(d+h))),p}_sliceChildren(d,h,m){return d.map(b=>b.slice(h,m))}}t.Data=s,s.prototype.children=Object.freeze([]);const o=mt,a=L;class l extends o.Visitor{visit(d){return this.getVisitFn(d.type).call(this,d)}visitNull(d){const{["type"]:h,["offset"]:m=0,["length"]:b=0}=d;return new s(h,m,b,b)}visitBool(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length>>3,["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitInt(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length,["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitFloat(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length,["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitUtf8(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.data),_=(0,a.toUint8Array)(d.nullBitmap),p=(0,a.toInt32Array)(d.valueOffsets),{["length"]:g=p.length-1,["nullCount"]:y=d.nullBitmap?-1:0}=d;return new s(h,m,g,y,[p,b,_])}visitLargeUtf8(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.data),_=(0,a.toUint8Array)(d.nullBitmap),p=(0,a.toBigInt64Array)(d.valueOffsets),{["length"]:g=p.length-1,["nullCount"]:y=d.nullBitmap?-1:0}=d;return new s(h,m,g,y,[p,b,_])}visitBinary(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.data),_=(0,a.toUint8Array)(d.nullBitmap),p=(0,a.toInt32Array)(d.valueOffsets),{["length"]:g=p.length-1,["nullCount"]:y=d.nullBitmap?-1:0}=d;return new s(h,m,g,y,[p,b,_])}visitLargeBinary(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.data),_=(0,a.toUint8Array)(d.nullBitmap),p=(0,a.toBigInt64Array)(d.valueOffsets),{["length"]:g=p.length-1,["nullCount"]:y=d.nullBitmap?-1:0}=d;return new s(h,m,g,y,[p,b,_])}visitFixedSizeBinary(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length/(0,r.strideForType)(h),["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitDate(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length/(0,r.strideForType)(h),["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitTimestamp(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length/(0,r.strideForType)(h),["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitTime(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length/(0,r.strideForType)(h),["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitDecimal(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length/(0,r.strideForType)(h),["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitList(d){const{["type"]:h,["offset"]:m=0,["child"]:b}=d,_=(0,a.toUint8Array)(d.nullBitmap),p=(0,a.toInt32Array)(d.valueOffsets),{["length"]:g=p.length-1,["nullCount"]:y=d.nullBitmap?-1:0}=d;return new s(h,m,g,y,[p,void 0,_],[b])}visitStruct(d){const{["type"]:h,["offset"]:m=0,["children"]:b=[]}=d,_=(0,a.toUint8Array)(d.nullBitmap),{length:p=b.reduce((y,{length:S})=>Math.max(y,S),0),nullCount:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,void 0,_],b)}visitUnion(d){const{["type"]:h,["offset"]:m=0,["children"]:b=[]}=d,_=(0,a.toArrayBufferView)(h.ArrayType,d.typeIds),{["length"]:p=_.length,["nullCount"]:g=-1}=d;if(r.DataType.isSparseUnion(h))return new s(h,m,p,g,[void 0,void 0,void 0,_],b);const y=(0,a.toInt32Array)(d.valueOffsets);return new s(h,m,p,g,[y,void 0,void 0,_],b)}visitDictionary(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.indices.ArrayType,d.data),{["dictionary"]:p=new e.Vector([new l().visit({type:h.dictionary})])}=d,{["length"]:g=_.length,["nullCount"]:y=d.nullBitmap?-1:0}=d;return new s(h,m,g,y,[void 0,_,b],[],p)}visitInterval(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length/(0,r.strideForType)(h),["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitDuration(d){const{["type"]:h,["offset"]:m=0}=d,b=(0,a.toUint8Array)(d.nullBitmap),_=(0,a.toArrayBufferView)(h.ArrayType,d.data),{["length"]:p=_.length,["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,_,b])}visitFixedSizeList(d){const{["type"]:h,["offset"]:m=0,["child"]:b=new l().visit({type:h.valueType})}=d,_=(0,a.toUint8Array)(d.nullBitmap),{["length"]:p=b.length/(0,r.strideForType)(h),["nullCount"]:g=d.nullBitmap?-1:0}=d;return new s(h,m,p,g,[void 0,void 0,_],[b])}visitMap(d){const{["type"]:h,["offset"]:m=0,["child"]:b=new l().visit({type:h.childType})}=d,_=(0,a.toUint8Array)(d.nullBitmap),p=(0,a.toInt32Array)(d.valueOffsets),{["length"]:g=p.length-1,["nullCount"]:y=d.nullBitmap?-1:0}=d;return new s(h,m,g,y,[p,void 0,_],[b])}}const u=new l;function c(f){return u.visit(f)}t.makeData=c}(xh)),xh}var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.wrapChunkedIndexOf=Be.wrapChunkedCall2=Be.wrapChunkedCall1=Be.isChunkedValid=Be.binarySearch=Be.sliceChunks=Be.computeChunkOffsets=Be.computeChunkNullCounts=Be.computeChunkNullable=Be.ChunkedIterator=void 0;class HN{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}Be.ChunkedIterator=HN;function WN(t){return t.some(e=>e.nullable)}Be.computeChunkNullable=WN;function KN(t){return t.reduce((e,n)=>e+n.nullCount,0)}Be.computeChunkNullCounts=KN;function qN(t){return t.reduce((e,n,r)=>(e[r+1]=e[r]+n.length,e),new Uint32Array(t.length+1))}Be.computeChunkOffsets=qN;function JN(t,e,n,r){const i=[];for(let s=-1,o=t.length;++s<o;){const a=t[s],l=e[s],{length:u}=a;if(l>=r)break;if(n>=l+u)continue;if(l>=n&&l+u<=r){i.push(a);continue}const c=Math.max(0,n-l),f=Math.min(r-l,u);i.push(a.slice(c,f-c))}return i.length===0&&i.push(t[0].slice(0,0)),i}Be.sliceChunks=JN;function Mf(t,e,n,r){let i=0,s=0,o=e.length-1;do{if(i>=o-1)return n<e[o]?r(t,i,n-e[i]):null;s=i+Math.trunc((o-i)*.5),n<e[s]?o=s:i=s}while(i<o)}Be.binarySearch=Mf;function GN(t,e){return t.getValid(e)}Be.isChunkedValid=GN;function YN(t){function e(n,r,i){return t(n[r],i)}return function(n){const r=this.data;return Mf(r,this._offsets,n,e)}}Be.wrapChunkedCall1=YN;function QN(t){let e;function n(r,i,s){return t(r[i],s,e)}return function(r,i){const s=this.data;e=i;const o=Mf(s,this._offsets,r,n);return e=void 0,o}}Be.wrapChunkedCall2=QN;function XN(t){let e;function n(r,i,s){let o=s,a=0,l=0;for(let u=i-1,c=r.length;++u<c;){const f=r[u];if(~(a=t(f,e,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){e=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Mf(s,this._offsets,i,n);return e=void 0,o}}Be.wrapChunkedIndexOf=XN;var zi={},ub;function wg(){if(ub)return zi;ub=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.instance=zi.IndexOfVisitor=void 0;const t=Ne,e=mt,n=va(),r=Ie,i=Bf();class s extends e.Visitor{}zi.IndexOfVisitor=s;function o(c,f){return f===null&&c.length>0?0:-1}function a(c,f){const{nullBitmap:d}=c;if(!d||c.nullCount<=0)return-1;let h=0;for(const m of new r.BitIterator(d,c.offset+(f||0),c.length,d,r.getBool)){if(!m)return h;++h}return-1}function l(c,f,d){if(f===void 0)return-1;if(f===null)switch(c.typeId){case t.Type.Union:break;case t.Type.Dictionary:break;default:return a(c,d)}const h=n.instance.getVisitFn(c),m=(0,i.createElementComparator)(f);for(let b=(d||0)-1,_=c.length;++b<_;)if(m(h(c,b)))return b;return-1}function u(c,f,d){const h=n.instance.getVisitFn(c),m=(0,i.createElementComparator)(f);for(let b=(d||0)-1,_=c.length;++b<_;)if(m(h(c,b)))return b;return-1}return s.prototype.visitNull=o,s.prototype.visitBool=l,s.prototype.visitInt=l,s.prototype.visitInt8=l,s.prototype.visitInt16=l,s.prototype.visitInt32=l,s.prototype.visitInt64=l,s.prototype.visitUint8=l,s.prototype.visitUint16=l,s.prototype.visitUint32=l,s.prototype.visitUint64=l,s.prototype.visitFloat=l,s.prototype.visitFloat16=l,s.prototype.visitFloat32=l,s.prototype.visitFloat64=l,s.prototype.visitUtf8=l,s.prototype.visitLargeUtf8=l,s.prototype.visitBinary=l,s.prototype.visitLargeBinary=l,s.prototype.visitFixedSizeBinary=l,s.prototype.visitDate=l,s.prototype.visitDateDay=l,s.prototype.visitDateMillisecond=l,s.prototype.visitTimestamp=l,s.prototype.visitTimestampSecond=l,s.prototype.visitTimestampMillisecond=l,s.prototype.visitTimestampMicrosecond=l,s.prototype.visitTimestampNanosecond=l,s.prototype.visitTime=l,s.prototype.visitTimeSecond=l,s.prototype.visitTimeMillisecond=l,s.prototype.visitTimeMicrosecond=l,s.prototype.visitTimeNanosecond=l,s.prototype.visitDecimal=l,s.prototype.visitList=l,s.prototype.visitStruct=l,s.prototype.visitUnion=l,s.prototype.visitDenseUnion=u,s.prototype.visitSparseUnion=u,s.prototype.visitDictionary=l,s.prototype.visitInterval=l,s.prototype.visitIntervalDayTime=l,s.prototype.visitIntervalYearMonth=l,s.prototype.visitDuration=l,s.prototype.visitDurationSecond=l,s.prototype.visitDurationMillisecond=l,s.prototype.visitDurationMicrosecond=l,s.prototype.visitDurationNanosecond=l,s.prototype.visitFixedSizeList=l,s.prototype.visitMap=l,zi.instance=new s,zi}var ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.instance=ki.IteratorVisitor=void 0;const ZN=mt,cb=Ne,Vh=R,db=Be;class J extends ZN.Visitor{}ki.IteratorVisitor=J;function Y(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===cb.Type.Timestamp||e instanceof Vh.Int&&e.bitWidth!==64||e instanceof Vh.Time&&e.bitWidth!==64||e instanceof Vh.Float&&e.precision!==cb.Precision.HALF))return new db.ChunkedIterator(t.data.length,r=>{const i=t.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new db.ChunkedIterator(t.data.length,r=>{const s=t.data[r].length,o=t.slice(n,n+s);return n+=s,new eR(o)})}class eR{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}J.prototype.visitNull=Y;J.prototype.visitBool=Y;J.prototype.visitInt=Y;J.prototype.visitInt8=Y;J.prototype.visitInt16=Y;J.prototype.visitInt32=Y;J.prototype.visitInt64=Y;J.prototype.visitUint8=Y;J.prototype.visitUint16=Y;J.prototype.visitUint32=Y;J.prototype.visitUint64=Y;J.prototype.visitFloat=Y;J.prototype.visitFloat16=Y;J.prototype.visitFloat32=Y;J.prototype.visitFloat64=Y;J.prototype.visitUtf8=Y;J.prototype.visitLargeUtf8=Y;J.prototype.visitBinary=Y;J.prototype.visitLargeBinary=Y;J.prototype.visitFixedSizeBinary=Y;J.prototype.visitDate=Y;J.prototype.visitDateDay=Y;J.prototype.visitDateMillisecond=Y;J.prototype.visitTimestamp=Y;J.prototype.visitTimestampSecond=Y;J.prototype.visitTimestampMillisecond=Y;J.prototype.visitTimestampMicrosecond=Y;J.prototype.visitTimestampNanosecond=Y;J.prototype.visitTime=Y;J.prototype.visitTimeSecond=Y;J.prototype.visitTimeMillisecond=Y;J.prototype.visitTimeMicrosecond=Y;J.prototype.visitTimeNanosecond=Y;J.prototype.visitDecimal=Y;J.prototype.visitList=Y;J.prototype.visitStruct=Y;J.prototype.visitUnion=Y;J.prototype.visitDenseUnion=Y;J.prototype.visitSparseUnion=Y;J.prototype.visitDictionary=Y;J.prototype.visitInterval=Y;J.prototype.visitIntervalDayTime=Y;J.prototype.visitIntervalYearMonth=Y;J.prototype.visitDuration=Y;J.prototype.visitDurationSecond=Y;J.prototype.visitDurationMillisecond=Y;J.prototype.visitDurationMicrosecond=Y;J.prototype.visitDurationNanosecond=Y;J.prototype.visitFixedSizeList=Y;J.prototype.visitMap=Y;ki.instance=new J;var fb;function Ut(){if(fb)return Vi;fb=1;var t;Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.makeVector=Vi.Vector=void 0;const e=Ne,n=Bf(),r=R,i=Fr(),s=Be,o=va(),a=Sn(),l=wg(),u=ki,c={},f={};class d{constructor(g){var y,S,T;const v=g[0]instanceof d?g.flatMap(M=>M.data):g;if(v.length===0||v.some(M=>!(M instanceof i.Data)))throw new TypeError("Vector constructor expects an Array of Data instances.");const w=(y=v[0])===null||y===void 0?void 0:y.type;switch(v.length){case 0:this._offsets=[0];break;case 1:{const{get:M,set:F,indexOf:C}=c[w.typeId],V=v[0];this.isValid=X=>(0,s.isChunkedValid)(V,X),this.get=X=>M(V,X),this.set=(X,ve)=>F(V,X,ve),this.indexOf=X=>C(V,X),this._offsets=[0,V.length];break}default:Object.setPrototypeOf(this,f[w.typeId]),this._offsets=(0,s.computeChunkOffsets)(v);break}this.data=v,this.type=w,this.stride=(0,r.strideForType)(w),this.numChildren=(T=(S=w.children)===null||S===void 0?void 0:S.length)!==null&&T!==void 0?T:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((g,y)=>g+y.byteLength,0)}get nullable(){return(0,s.computeChunkNullable)(this.data)}get nullCount(){return(0,s.computeChunkNullCounts)(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${e.Type[this.type.typeId]}Vector`}isValid(g){return!1}get(g){return null}set(g,y){}indexOf(g,y){return-1}includes(g,y){return this.indexOf(g,y)>-1}[Symbol.iterator](){return u.instance.visit(this)}concat(...g){return new d(this.data.concat(g.flatMap(y=>y.data).flat(Number.POSITIVE_INFINITY)))}slice(g,y){return new d((0,n.clampRange)(this,g,y,({data:S,_offsets:T},v,w)=>(0,s.sliceChunks)(S,T,v,w)))}toJSON(){return[...this]}toArray(){const{type:g,data:y,length:S,stride:T,ArrayType:v}=this;switch(g.typeId){case e.Type.Int:case e.Type.Float:case e.Type.Decimal:case e.Type.Time:case e.Type.Timestamp:switch(y.length){case 0:return new v;case 1:return y[0].values.subarray(0,S*T);default:return y.reduce((w,{values:M,length:F})=>(w.array.set(M.subarray(0,F*T),w.offset),w.offset+=F*T,w),{array:new v(S*T),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(g){var y;return this.getChildAt((y=this.type.children)===null||y===void 0?void 0:y.findIndex(S=>S.name===g))}getChildAt(g){return g>-1&&g<this.numChildren?new d(this.data.map(({children:y})=>y[g])):null}get isMemoized(){return r.DataType.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(r.DataType.isDictionary(this.type)){const g=new h(this.data[0].dictionary),y=this.data.map(S=>{const T=S.clone();return T.dictionary=g,T});return new d(y)}return new h(this)}unmemoize(){if(r.DataType.isDictionary(this.type)&&this.isMemoized){const g=this.data[0].dictionary.unmemoize(),y=this.data.map(S=>{const T=S.clone();return T.dictionary=g,T});return new d(y)}return this}}Vi.Vector=d,t=Symbol.toStringTag,d[t]=(p=>{p.type=r.DataType.prototype,p.data=[],p.length=0,p.stride=1,p.numChildren=0,p._offsets=new Uint32Array([0]),p[Symbol.isConcatSpreadable]=!0;const g=Object.keys(e.Type).map(y=>e.Type[y]).filter(y=>typeof y=="number"&&y!==e.Type.NONE);for(const y of g){const S=o.instance.getVisitFnByTypeId(y),T=a.instance.getVisitFnByTypeId(y),v=l.instance.getVisitFnByTypeId(y);c[y]={get:S,set:T,indexOf:v},f[y]=Object.create(p,{isValid:{value:(0,s.wrapChunkedCall1)(s.isChunkedValid)},get:{value:(0,s.wrapChunkedCall1)(o.instance.getVisitFnByTypeId(y))},set:{value:(0,s.wrapChunkedCall2)(a.instance.getVisitFnByTypeId(y))},indexOf:{value:(0,s.wrapChunkedIndexOf)(l.instance.getVisitFnByTypeId(y))}})}return"Vector"})(d.prototype);class h extends d{constructor(g){super(g.data);const y=this.get,S=this.set,T=this.slice,v=new Array(this.length);Object.defineProperty(this,"get",{value(w){const M=v[w];if(M!==void 0)return M;const F=y.call(this,w);return v[w]=F,F}}),Object.defineProperty(this,"set",{value(w,M){S.call(this,w,M),v[w]=M}}),Object.defineProperty(this,"slice",{value:(w,M)=>new h(T.call(this,w,M))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new d(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}const m=R;function b(p){if(p){if(p instanceof i.Data)return new d([p]);if(p instanceof d)return new d(p.data);if(p.type instanceof r.DataType)return new d([(0,i.makeData)(p)]);if(Array.isArray(p))return new d(p.flatMap(g=>_(g)));if(ArrayBuffer.isView(p)){p instanceof DataView&&(p=new Uint8Array(p.buffer));const g={offset:0,length:p.length,nullCount:0,data:p};if(p instanceof Int8Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Int8}))]);if(p instanceof Int16Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Int16}))]);if(p instanceof Int32Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Int32}))]);if(p instanceof BigInt64Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Int64}))]);if(p instanceof Uint8Array||p instanceof Uint8ClampedArray)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Uint8}))]);if(p instanceof Uint16Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Uint16}))]);if(p instanceof Uint32Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Uint32}))]);if(p instanceof BigUint64Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Uint64}))]);if(p instanceof Float32Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Float32}))]);if(p instanceof Float64Array)return new d([(0,i.makeData)(Object.assign(Object.assign({},g),{type:new m.Float64}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}Vi.makeVector=b;function _(p){return p instanceof i.Data?[p]:p instanceof d?p.data:b(p).data}return Vi}var kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.createIsValidFunction=void 0;const hb=Cs;function tR(t){if(!t||t.length<=0)return function(i){return!0};let e="";const n=t.filter(r=>r===r);return n.length>0&&(e=`
    switch (x) {${n.map(r=>`
        case ${nR(r)}:`).join("")}
            return false;
    }`),t.length!==n.length&&(e=`if (x !== x) return false;
${e}`),new Function("x",`${e}
return true;`)}kf.createIsValidFunction=tR;function nR(t){return typeof t!="bigint"?(0,hb.valueToString)(t):`${(0,hb.valueToString)(t)}n`}var st={};Object.defineProperty(st,"__esModule",{value:!0});st.OffsetsBufferBuilder=st.BitmapBufferBuilder=st.DataBufferBuilder=st.BufferBuilder=void 0;const rR=L;function zh(t,e){const n=Math.ceil(t)*e-1;return(n-n%64+64||64)/e}function pb(t,e=0){return t.length>=e?t.subarray(0,e):(0,rR.memcpy)(new t.constructor(e),t,0)}class hI{constructor(e,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new e(this.length),this.stride=r,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,n){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?zh(r*1,this.BYTES_PER_ELEMENT):zh(r*2,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=zh(e*this.stride,this.BYTES_PER_ELEMENT);const n=pb(this.buffer,e);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(e){return this.buffer=pb(this.buffer,e)}}st.BufferBuilder=hI;class Tg extends hI{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,n){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=n,this}}st.DataBufferBuilder=Tg;class iR extends Tg{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,n){const{buffer:r}=this.reserve(e-this.length+1),i=e>>3,s=e%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}st.BitmapBufferBuilder=iR;class sR extends Tg{constructor(e){super(e.OffsetArrayType,1,1)}append(e){return this.set(this.length-1,e)}set(e,n){const r=this.length-1,i=this.reserve(e-r+1).buffer;return r<e++&&r>=0&&i.fill(i[r],r,e),i[e]=i[e-1]+n,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(e+1)}}st.OffsetsBufferBuilder=sR;Object.defineProperty(he,"__esModule",{value:!0});he.VariableWidthBuilder=he.FixedWidthBuilder=he.Builder=void 0;const oR=Ut(),aR=Fr(),mb=Of(),lR=R,uR=kf,Ig=st;let Pr=class{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}constructor({type:e,nullValues:n}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=n,this.stride=(0,lR.strideForType)(e),this._nulls=new Ig.BitmapBufferBuilder,n&&n.length>0&&(this._isValid=(0,uR.createIsValidFunction)(n))}toVector(){return new oR.Vector([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),o.reduce((a,l)=>a+l.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,n){return this.setValid(e,this.isValid(n))&&this.setValue(e,n),this}setValue(e,n){this._setValue(this,e,n)}setValid(e,n){return this.length=this._nulls.set(e,+n).length,n}addChild(e,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:l,_offsets:u,_values:c,_nulls:f}=this;(n=l==null?void 0:l.flush(o))?i=u==null?void 0:u.flush(o):(i=u==null?void 0:u.flush(o))?e=c==null?void 0:c.flush(u.last()):e=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),(0,aR.makeData)({type:s,length:o,nullCount:a,children:d,child:d[0],data:e,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,n,r,i;this.length=0,(e=this._nulls)===null||e===void 0||e.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};he.Builder=Pr;Pr.prototype.length=1;Pr.prototype.stride=1;Pr.prototype.children=null;Pr.prototype.finished=!1;Pr.prototype.nullValues=null;Pr.prototype._isValid=()=>!0;class cR extends Pr{constructor(e){super(e),this._values=new Ig.DataBufferBuilder(this.ArrayType,0,this.stride)}setValue(e,n){const r=this._values;return r.reserve(e-r.length+1),super.setValue(e,n)}}he.FixedWidthBuilder=cR;class dR extends Pr{constructor(e){super(e),this._pendingLength=0,this._offsets=new Ig.OffsetsBufferBuilder(e.type)}setValue(e,n){const r=this._pending||(this._pending=new Map),i=r.get(e);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof mb.MapRow?n[mb.kKeys].length:n.length,r.set(e,n)}setValid(e,n){return super.setValid(e,n)?!0:((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,n),this}}he.VariableWidthBuilder=dR;var vt={},Os={},vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.Block=void 0;class fR{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,r,i){return e.prep(8,24),e.writeInt64(BigInt(i??0)),e.pad(4),e.writeInt32(r),e.writeInt64(BigInt(n??0)),e.offset()}}vu.Block=fR;var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.Footer=void 0;const hR=ie,yb=vu,pR=Fi,gb=oa,mR=la;class Md{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new Md).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+hR.SIZE_PREFIX_LENGTH),(n||new Md).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):gb.MetadataVersion.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new mR.Schema).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new yb.Block).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new yb.Block).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new pR.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,gb.MetadataVersion.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}Ef.Footer=Md;var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.Field=Ze.Schema=void 0;const yR=Ne,gR=R;let Df=class Gi{constructor(e=[],n,r,i=yR.MetadataVersion.V5){this.fields=e||[],this.metadata=n||new Map,r||(r=$m(e)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),r=this.fields.filter(i=>n.has(i.name));return new Gi(r,this.metadata)}selectAt(e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new Gi(n,this.metadata)}assign(...e){const n=e[0]instanceof Gi?e[0]:Array.isArray(e[0])?new Gi(e[0]):new Gi(e),r=[...this.fields],i=ac(ac(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(u=>u.name===a.name);return~l?(r[l]=a.clone({metadata:ac(ac(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=$m(s,new Map);return new Gi([...r,...s],i,new Map([...this.dictionaries,...o]))}};Ze.Schema=Df;Df.prototype.fields=null;Df.prototype.metadata=null;Df.prototype.dictionaries=null;class Ei{static new(...e){let[n,r,i,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],r===void 0&&(r=e[0].type),i===void 0&&(i=e[0].nullable),s===void 0&&(s=e[0].metadata)),new Ei(`${n}`,r,i,s)}constructor(e,n,r=!1,i){this.name=e,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,r,i,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=e:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=e[0],Ei.new(n,r,i,s)}}Ze.Field=Ei;Ei.prototype.type=null;Ei.prototype.name=null;Ei.prototype.nullable=null;Ei.prototype.metadata=null;function ac(t,e){return new Map([...t||new Map,...e||new Map])}function $m(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const s=t[n].type;if(gR.DataType.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&$m(s.children,e)}return e}Object.defineProperty(Os,"__esModule",{value:!0});Os.FileBlock=Os.Footer=void 0;const _R=vu,Wn=Ef,pI=ie;var bR=pI.Builder,vR=pI.ByteBuffer;const _b=Ze,bb=Ne,SR=L,vb=Cr;class mI{static decode(e){e=new vR((0,SR.toUint8Array)(e));const n=Wn.Footer.getRootAsFooter(e),r=_b.Schema.decode(n.schema(),new Map,n.version());return new wR(r,n)}static encode(e){const n=new bR,r=_b.Schema.encode(n,e.schema);Wn.Footer.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())Bs.encode(n,o);const i=n.endVector();Wn.Footer.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())Bs.encode(n,o);const s=n.endVector();return Wn.Footer.startFooter(n),Wn.Footer.addSchema(n,r),Wn.Footer.addVersion(n,bb.MetadataVersion.V5),Wn.Footer.addRecordBatches(n,i),Wn.Footer.addDictionaries(n,s),Wn.Footer.finishFooterBuffer(n,Wn.Footer.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,n=bb.MetadataVersion.V5,r,i){this.schema=e,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let e,n=-1,r=this.numRecordBatches;++n<r;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,r=this.numDictionaries;++n<r;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}Os.Footer=mI;class wR extends mI{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,n){super(e,n.version()),this._footer=n}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return Bs.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return Bs.decode(n)}return null}}class Bs{static decode(e){return new Bs(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return _R.Block.createBlock(e,i,r,s)}constructor(e,n,r){this.metaDataLength=e,this.offset=(0,vb.bigIntToNumber)(r),this.bodyLength=(0,vb.bigIntToNumber)(n)}}Os.FileBlock=Bs;var jt={},Su={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncQueue=t.ReadableInterop=t.ArrowJSON=t.ITERATOR_DONE=void 0;const e=en,n=sa;t.ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class r{constructor(a){this._json=a}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}t.ArrowJSON=r;class i{tee(){return this._getDOMStream().tee()}pipe(a,l){return this._getNodeStream().pipe(a,l)}pipeTo(a,l){return this._getDOMStream().pipeTo(a,l)}pipeThrough(a,l){return this._getDOMStream().pipeThrough(a,l)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}t.ReadableInterop=i;class s extends i{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(a=>this._closedPromiseResolve=a)}get closed(){return this._closedPromise}cancel(a){return e.__awaiter(this,void 0,void 0,function*(){yield this.return(a)})}write(a){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(a):this.resolvers.shift().resolve({done:!1,value:a}))}abort(a){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:a}:this.resolvers.shift().reject({done:!0,value:a}))}close(){if(this._closedPromiseResolve){const{resolvers:a}=this;for(;a.length>0;)a.shift().resolve(t.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(a){return n.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,a)}toNodeStream(a){return n.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,a)}throw(a){return e.__awaiter(this,void 0,void 0,function*(){return yield this.abort(a),t.ITERATOR_DONE})}return(a){return e.__awaiter(this,void 0,void 0,function*(){return yield this.close(),t.ITERATOR_DONE})}read(a){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(a,"read")).value})}peek(a){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(a,"peek")).value})}next(...a){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((l,u)=>{this.resolvers.push({resolve:l,reject:u})}):Promise.resolve(t.ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}t.AsyncQueue=s})(Su);Object.defineProperty(jt,"__esModule",{value:!0});jt.AsyncByteStream=jt.ByteStream=jt.AsyncByteQueue=void 0;const ri=en,Kr=sa,Sb=bn,Ul=Su,$h=L,Hs=Ci;class yI extends Ul.AsyncQueue{write(e){if((e=(0,$h.toUint8Array)(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?(0,Sb.decodeUtf8)(this.toUint8Array(!0)):this.toUint8Array(!1).then(Sb.decodeUtf8)}toUint8Array(e=!1){return e?(0,$h.joinUint8Arrays)(this._values)[0]:ri.__awaiter(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,u=ri.__asyncValues(this),c;c=yield u.next(),n=c.done,!n;l=!0){s=c.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}return(0,$h.joinUint8Arrays)(o,a)[0]})}}jt.AsyncByteQueue=yI;class TR{constructor(e){e&&(this.source=new IR(Kr.default.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}jt.ByteStream=TR;class Og{constructor(e){e instanceof Og?this.source=e.source:e instanceof yI?this.source=new $i(Kr.default.fromAsyncIterable(e)):(0,Hs.isReadableNodeStream)(e)?this.source=new $i(Kr.default.fromNodeStream(e)):(0,Hs.isReadableDOMStream)(e)?this.source=new $i(Kr.default.fromDOMStream(e)):(0,Hs.isFetchResponse)(e)?this.source=new $i(Kr.default.fromDOMStream(e.body)):(0,Hs.isIterable)(e)?this.source=new $i(Kr.default.fromIterable(e)):(0,Hs.isPromise)(e)?this.source=new $i(Kr.default.fromAsyncIterable(e)):(0,Hs.isAsyncIterable)(e)&&(this.source=new $i(Kr.default.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}jt.AsyncByteStream=Og;class IR{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Ul.ITERATOR_DONE)}return(e){return Object.create(this.source.return&&this.source.return(e)||Ul.ITERATOR_DONE)}}class $i{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ri.__awaiter(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ri.__awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ri.__awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return ri.__awaiter(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return ri.__awaiter(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||Ul.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ri.__awaiter(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||Ul.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.AsyncRandomAccessFile=Ms.RandomAccessFile=void 0;const $r=en,gI=jt,OR=L;class BR extends gI.ByteStream{constructor(e,n){super(),this.position=0,this.buffer=(0,OR.toUint8Array)(e),this.size=n===void 0?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:r}=this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,e)),n.subarray(i,this.position)):null}readAt(e,n){const r=this.buffer,i=Math.min(this.size,e+n);return r?r.subarray(e,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}Ms.RandomAccessFile=BR;class MR extends gI.AsyncByteStream{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=$r.__awaiter(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return $r.__awaiter(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)})}seek(e){return $r.__awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return $r.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,e)),u=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<u.byteLength;)({bytesRead:a}=yield n.read(u,o,u.byteLength-o,s));return u}return null})}readAt(e,n){return $r.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&e+n<i){const s=Math.min(i,e+n),o=new Uint8Array(s-e);return(yield r.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return $r.__awaiter(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return $r.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return $r.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}Ms.AsyncRandomAccessFile=MR;var Vo={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.Int128=Rn.Int64=Rn.Uint64=Rn.BaseInt64=void 0;const kR=65536;function _o(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const zo=8,Bg=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Mg{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?kR:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${_o(this.buffer[1])} ${_o(this.buffer[0])}`}}Rn.BaseInt64=Mg;class fe extends Mg{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return fe.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return fe.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.length,i=new fe(n);for(let s=0;s<r;){const o=zo<r-s?zo:r-s,a=new fe(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),l=new fe(new Uint32Array([Bg[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)fe.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new fe(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new fe(new Uint32Array(e.buffer)).plus(n)}}Rn.Uint64=fe;class on extends Mg{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,r=e.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return on.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return on.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.startsWith("-"),i=e.length,s=new on(n);for(let o=r?1:0;o<i;){const a=zo<i-o?zo:i-o,l=new on(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0])),u=new on(new Uint32Array([Bg[a],0]));s.times(u),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)on.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new on(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new on(new Uint32Array(e.buffer)).plus(n)}}Rn.Int64=on;class Jn{constructor(e){this.buffer=e}high(){return new on(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new on(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new fe(new Uint32Array([this.buffer[3],0])),r=new fe(new Uint32Array([this.buffer[2],0])),i=new fe(new Uint32Array([this.buffer[1],0])),s=new fe(new Uint32Array([this.buffer[0],0])),o=new fe(new Uint32Array([e.buffer[3],0])),a=new fe(new Uint32Array([e.buffer[2],0])),l=new fe(new Uint32Array([e.buffer[1],0])),u=new fe(new Uint32Array([e.buffer[0],0]));let c=fe.multiply(s,u);this.buffer[0]=c.low();const f=new fe(new Uint32Array([c.high(),0]));return c=fe.multiply(i,u),f.plus(c),c=fe.multiply(s,l),f.plus(c),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(c)?1:0,this.buffer[2]=f.high(),new fe(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(fe.multiply(r,u)).plus(fe.multiply(i,l)).plus(fe.multiply(s,a)),this.buffer[3]+=fe.multiply(n,u).plus(fe.multiply(r,l)).plus(fe.multiply(i,a)).plus(fe.multiply(s,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${_o(this.buffer[3])} ${_o(this.buffer[2])} ${_o(this.buffer[1])} ${_o(this.buffer[0])}`}static multiply(e,n){return new Jn(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Jn(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return Jn.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return Jn.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const r=e.startsWith("-"),i=e.length,s=new Jn(n);for(let o=r?1:0;o<i;){const a=zo<i-o?zo:i-o,l=new Jn(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0,0,0])),u=new Jn(new Uint32Array([Bg[a],0,0,0]));s.times(u),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let r=-1,i=e.length;++r<i;)Jn.from(e[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}Rn.Int128=Jn;Object.defineProperty(Vo,"__esModule",{value:!0});Vo.JSONVectorLoader=Vo.VectorLoader=void 0;const Re=Fr(),ER=Ze,rn=R,DR=mt,wb=Ie,AR=bn,lc=Rn,jc=Ne,Kn=L;class _I extends DR.Visitor{constructor(e,n,r,i,s=jc.MetadataVersion.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(e){return super.visit(e instanceof ER.Field?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n})}visitBool(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<jc.MetadataVersion.V5&&this.readNullBitmap(e,r),e.mode===jc.UnionMode.Sparse?this.visitSparseUnion(e,{length:n,nullCount:r}):this.visitDenseUnion(e,{length:n,nullCount:r})}visitDenseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDuration(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:r}=this.nextFieldNode()){return(0,Re.makeData)({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,r=this.nextBufferRange()){return n>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(e){return this.dictionaries.get(e.id)}}Vo.VectorLoader=_I;class NR extends _I{constructor(e,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=e}readNullBitmap(e,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):(0,wb.packBools)(this.sources[r])}readOffsets(e,{offset:n}=this.nextBufferRange()){return(0,Kn.toArrayBufferView)(Uint8Array,(0,Kn.toArrayBufferView)(e.OffsetArrayType,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return(0,Kn.toArrayBufferView)(Uint8Array,(0,Kn.toArrayBufferView)(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return rn.DataType.isTimestamp(e)||(rn.DataType.isInt(e)||rn.DataType.isTime(e))&&e.bitWidth===64||rn.DataType.isDuration(e)||rn.DataType.isDate(e)&&e.unit===jc.DateUnit.MILLISECOND?(0,Kn.toArrayBufferView)(Uint8Array,lc.Int64.convertArray(r[n])):rn.DataType.isDecimal(e)?(0,Kn.toArrayBufferView)(Uint8Array,lc.Int128.convertArray(r[n])):rn.DataType.isBinary(e)||rn.DataType.isLargeBinary(e)||rn.DataType.isFixedSizeBinary(e)?RR(r[n]):rn.DataType.isBool(e)?(0,wb.packBools)(r[n]):rn.DataType.isUtf8(e)||rn.DataType.isLargeUtf8(e)?(0,AR.encodeUtf8)(r[n].join("")):(0,Kn.toArrayBufferView)(Uint8Array,(0,Kn.toArrayBufferView)(e.ArrayType,r[n].map(i=>+i)))}}Vo.JSONVectorLoader=NR;function RR(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}var Hi={},hr={},Vt={},Wi={},Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.BinaryBuilder=void 0;const CR=st,FR=he,PR=L;class jR extends FR.VariableWidthBuilder{constructor(e){super(e),this._values=new CR.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,(0,PR.toUint8Array)(n))}_flushPending(e,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of e)if(a===void 0)r.set(o,0);else{const l=a.length;i.set(a,s),r.set(o,l),s+=l}}}Sa.BinaryBuilder=jR;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.LargeBinaryBuilder=void 0;const LR=L,UR=st,xR=he;class VR extends xR.VariableWidthBuilder{constructor(e){super(e),this._values=new UR.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,(0,LR.toUint8Array)(n))}_flushPending(e,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of e)if(a===void 0)r.set(o,BigInt(0));else{const l=a.length;i.set(a,s),r.set(o,BigInt(l)),s+=l}}}wa.LargeBinaryBuilder=VR;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.BoolBuilder=void 0;const zR=st,$R=he;class HR extends $R.Builder{constructor(e){super(e),this._values=new zR.BitmapBufferBuilder}setValue(e,n){this._values.set(e,+n)}}wu.BoolBuilder=HR;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.DateMillisecondBuilder=Tr.DateDayBuilder=Tr.DateBuilder=void 0;const WR=he,kg=Sn();class Af extends WR.FixedWidthBuilder{}Tr.DateBuilder=Af;Af.prototype._setValue=kg.setDate;class bI extends Af{}Tr.DateDayBuilder=bI;bI.prototype._setValue=kg.setDateDay;class vI extends Af{}Tr.DateMillisecondBuilder=vI;vI.prototype._setValue=kg.setDateMillisecond;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.DecimalBuilder=void 0;const KR=he,qR=Sn();class SI extends KR.FixedWidthBuilder{}Tu.DecimalBuilder=SI;SI.prototype._setValue=qR.setDecimal;var ja={},Tb;function wI(){if(Tb)return ja;Tb=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.DictionaryBuilder=void 0;const t=R,e=he,n=Cf();class r extends e.Builder{constructor({type:s,nullValues:o,dictionaryHashFunction:a}){super({type:new t.Dictionary(s.dictionary,s.indices,s.id,s.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=(0,n.makeBuilder)({type:this.type.indices,nullValues:o}),this.dictionary=(0,n.makeBuilder)({type:this.type.dictionary,nullValues:null}),typeof a=="function"&&(this.valueToKey=a)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(s){return this.indices.isValid(s)}setValid(s,o){const a=this.indices;return o=a.setValid(s,o),this.length=a.length,o}setValue(s,o){const a=this._keysToIndices,l=this.valueToKey(o);let u=a[l];return u===void 0&&(a[l]=u=this._dictionaryOffset+this.dictionary.append(o).length-1),this.indices.setValue(s,u)}flush(){const s=this.type,o=this._dictionary,a=this.dictionary.toVector(),l=this.indices.flush().clone(s);return l.dictionary=o?o.concat(a):a,this.finished||(this._dictionaryOffset+=a.length),this._dictionary=l.dictionary,this.clear(),l}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(s){return typeof s=="string"?s:`${s}`}}return ja.DictionaryBuilder=r,ja}var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.FixedSizeBinaryBuilder=void 0;const JR=he,GR=Sn();class TI extends JR.FixedWidthBuilder{}Iu.FixedSizeBinaryBuilder=TI;TI.prototype._setValue=GR.setFixedSizeBinary;var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.FixedSizeListBuilder=void 0;const YR=Ze,QR=he,XR=R;class ZR extends QR.Builder{setValue(e,n){const[r]=this.children,i=e*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(e,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(e);return this.type=new XR.FixedSizeList(this.type.listSize,new YR.Field(n,e.type,!0)),r}}Ou.FixedSizeListBuilder=ZR;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.Float64Builder=Cn.Float32Builder=Cn.Float16Builder=Cn.FloatBuilder=void 0;const eC=Nr,tC=he;class Nf extends tC.FixedWidthBuilder{setValue(e,n){this._values.set(e,n)}}Cn.FloatBuilder=Nf;class nC extends Nf{setValue(e,n){super.setValue(e,(0,eC.float64ToUint16)(n))}}Cn.Float16Builder=nC;class rC extends Nf{}Cn.Float32Builder=rC;class iC extends Nf{}Cn.Float64Builder=iC;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.IntervalYearMonthBuilder=Ir.IntervalDayTimeBuilder=Ir.IntervalBuilder=void 0;const sC=he,Eg=Sn();class Rf extends sC.FixedWidthBuilder{}Ir.IntervalBuilder=Rf;Rf.prototype._setValue=Eg.setIntervalValue;class II extends Rf{}Ir.IntervalDayTimeBuilder=II;II.prototype._setValue=Eg.setIntervalDayTime;class OI extends Rf{}Ir.IntervalYearMonthBuilder=OI;OI.prototype._setValue=Eg.setIntervalYearMonth;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.DurationNanosecondBuilder=Ht.DurationMicrosecondBuilder=Ht.DurationMillisecondBuilder=Ht.DurationSecondBuilder=Ht.DurationBuilder=void 0;const oC=he,Bu=Sn();class Ta extends oC.FixedWidthBuilder{}Ht.DurationBuilder=Ta;Ta.prototype._setValue=Bu.setDuration;class BI extends Ta{}Ht.DurationSecondBuilder=BI;BI.prototype._setValue=Bu.setDurationSecond;class MI extends Ta{}Ht.DurationMillisecondBuilder=MI;MI.prototype._setValue=Bu.setDurationMillisecond;class kI extends Ta{}Ht.DurationMicrosecondBuilder=kI;kI.prototype._setValue=Bu.setDurationMicrosecond;class EI extends Ta{}Ht.DurationNanosecondBuilder=EI;EI.prototype._setValue=Bu.setDurationNanosecond;var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.Uint64Builder=Le.Uint32Builder=Le.Uint16Builder=Le.Uint8Builder=Le.Int64Builder=Le.Int32Builder=Le.Int16Builder=Le.Int8Builder=Le.IntBuilder=void 0;const aC=he;class jr extends aC.FixedWidthBuilder{setValue(e,n){this._values.set(e,n)}}Le.IntBuilder=jr;class lC extends jr{}Le.Int8Builder=lC;class uC extends jr{}Le.Int16Builder=uC;class cC extends jr{}Le.Int32Builder=cC;class dC extends jr{}Le.Int64Builder=dC;class fC extends jr{}Le.Uint8Builder=fC;class hC extends jr{}Le.Uint16Builder=hC;class pC extends jr{}Le.Uint32Builder=pC;class mC extends jr{}Le.Uint64Builder=mC;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.ListBuilder=void 0;const yC=Ze,gC=R,_C=st,bC=he;class vC extends bC.VariableWidthBuilder{constructor(e){super(e),this._offsets=new _C.OffsetsBufferBuilder(e.type)}addChild(e,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new gC.List(new yC.Field(n,e.type,!0)),this.numChildren-1}_flushPending(e){const n=this._offsets,[r]=this.children;for(const[i,s]of e)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,l=n.set(i,a).buffer[i];for(let u=-1;++u<a;)r.set(l+u,o[u])}}}Mu.ListBuilder=vC;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.MapBuilder=void 0;const SC=Ze,wC=R,TC=he;class IC extends TC.VariableWidthBuilder{set(e,n){return super.set(e,n)}setValue(e,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(e);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(e,r)}addChild(e,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new wC.Map_(new SC.Field(n,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const n=this._offsets,[r]=this.children;for(const[i,s]of e)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const l of s.entries())if(r.set(o,l),++o>=a)break}}}ku.MapBuilder=IC;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.NullBuilder=void 0;const OC=he;class BC extends OC.Builder{setValue(e,n){}setValid(e,n){return this.length=Math.max(e+1,this.length),n}}Eu.NullBuilder=BC;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.StructBuilder=void 0;const MC=Ze,kC=he,EC=R;class DC extends kC.Builder{setValue(e,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(e,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(e,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(e,n[s.name]))}}setValid(e,n){return super.setValid(e,n)||this.children.forEach(r=>r.setValid(e,n)),n}addChild(e,n=`${this.numChildren}`){const r=this.children.push(e);return this.type=new EC.Struct([...this.type.children,new MC.Field(n,e.type,!0)]),r}}Du.StructBuilder=DC;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.TimestampNanosecondBuilder=Wt.TimestampMicrosecondBuilder=Wt.TimestampMillisecondBuilder=Wt.TimestampSecondBuilder=Wt.TimestampBuilder=void 0;const AC=he,Au=Sn();class Ia extends AC.FixedWidthBuilder{}Wt.TimestampBuilder=Ia;Ia.prototype._setValue=Au.setTimestamp;class DI extends Ia{}Wt.TimestampSecondBuilder=DI;DI.prototype._setValue=Au.setTimestampSecond;class AI extends Ia{}Wt.TimestampMillisecondBuilder=AI;AI.prototype._setValue=Au.setTimestampMillisecond;class NI extends Ia{}Wt.TimestampMicrosecondBuilder=NI;NI.prototype._setValue=Au.setTimestampMicrosecond;class RI extends Ia{}Wt.TimestampNanosecondBuilder=RI;RI.prototype._setValue=Au.setTimestampNanosecond;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.TimeNanosecondBuilder=Kt.TimeMicrosecondBuilder=Kt.TimeMillisecondBuilder=Kt.TimeSecondBuilder=Kt.TimeBuilder=void 0;const NC=he,Nu=Sn();class Oa extends NC.FixedWidthBuilder{}Kt.TimeBuilder=Oa;Oa.prototype._setValue=Nu.setTime;class CI extends Oa{}Kt.TimeSecondBuilder=CI;CI.prototype._setValue=Nu.setTimeSecond;class FI extends Oa{}Kt.TimeMillisecondBuilder=FI;FI.prototype._setValue=Nu.setTimeMillisecond;class PI extends Oa{}Kt.TimeMicrosecondBuilder=PI;PI.prototype._setValue=Nu.setTimeMicrosecond;class jI extends Oa{}Kt.TimeNanosecondBuilder=jI;jI.prototype._setValue=Nu.setTimeNanosecond;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});Or.DenseUnionBuilder=Or.SparseUnionBuilder=Or.UnionBuilder=void 0;const RC=Ze,LI=st,CC=he,FC=R;class Dg extends CC.Builder{constructor(e){super(e),this._typeIds=new LI.DataBufferBuilder(Int8Array,0,1),typeof e.valueToChildTypeId=="function"&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,n){return this.set(this.length,e,n)}set(e,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,e)),this.setValue(e,n,r),this}setValue(e,n,r){this._typeIds.set(e,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(e,n)}addChild(e,n=`${this.children.length}`){const r=this.children.push(e),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new RC.Field(n,e.type)];return this.type=new FC.Union(s,[...o,r],a),r}_valueToChildTypeId(e,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}Or.UnionBuilder=Dg;class PC extends Dg{}Or.SparseUnionBuilder=PC;class jC extends Dg{constructor(e){super(e),this._offsets=new LI.DataBufferBuilder(Int32Array)}setValue(e,n,r){const i=this._typeIds.set(e,r).buffer[e],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(e,s.length).buffer[e];s==null||s.set(o,n)}}Or.DenseUnionBuilder=jC;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.Utf8Builder=void 0;const LC=bn,UC=Sa,xC=st,VC=he;class UI extends VC.VariableWidthBuilder{constructor(e){super(e),this._values=new xC.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,(0,LC.encodeUtf8)(n))}_flushPending(e,n){}}Ru.Utf8Builder=UI;UI.prototype._flushPending=UC.BinaryBuilder.prototype._flushPending;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.LargeUtf8Builder=void 0;const zC=bn,$C=st,HC=he,WC=wa;class xI extends HC.VariableWidthBuilder{constructor(e){super(e),this._values=new $C.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,(0,zC.encodeUtf8)(n))}_flushPending(e,n){}}Cu.LargeUtf8Builder=xI;xI.prototype._flushPending=WC.LargeBinaryBuilder.prototype._flushPending;var Ib;function KC(){if(Ib)return Wi;Ib=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.instance=Wi.GetBuilderCtor=void 0;const t=mt,e=Sa,n=wa,r=wu,i=Tr,s=Tu,o=wI(),a=Iu,l=Ou,u=Cn,c=Ir,f=Ht,d=Le,h=Mu,m=ku,b=Eu,_=Du,p=Wt,g=Kt,y=Or,S=Ru,T=Cu;class v extends t.Visitor{visitNull(){return b.NullBuilder}visitBool(){return r.BoolBuilder}visitInt(){return d.IntBuilder}visitInt8(){return d.Int8Builder}visitInt16(){return d.Int16Builder}visitInt32(){return d.Int32Builder}visitInt64(){return d.Int64Builder}visitUint8(){return d.Uint8Builder}visitUint16(){return d.Uint16Builder}visitUint32(){return d.Uint32Builder}visitUint64(){return d.Uint64Builder}visitFloat(){return u.FloatBuilder}visitFloat16(){return u.Float16Builder}visitFloat32(){return u.Float32Builder}visitFloat64(){return u.Float64Builder}visitUtf8(){return S.Utf8Builder}visitLargeUtf8(){return T.LargeUtf8Builder}visitBinary(){return e.BinaryBuilder}visitLargeBinary(){return n.LargeBinaryBuilder}visitFixedSizeBinary(){return a.FixedSizeBinaryBuilder}visitDate(){return i.DateBuilder}visitDateDay(){return i.DateDayBuilder}visitDateMillisecond(){return i.DateMillisecondBuilder}visitTimestamp(){return p.TimestampBuilder}visitTimestampSecond(){return p.TimestampSecondBuilder}visitTimestampMillisecond(){return p.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return p.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return p.TimestampNanosecondBuilder}visitTime(){return g.TimeBuilder}visitTimeSecond(){return g.TimeSecondBuilder}visitTimeMillisecond(){return g.TimeMillisecondBuilder}visitTimeMicrosecond(){return g.TimeMicrosecondBuilder}visitTimeNanosecond(){return g.TimeNanosecondBuilder}visitDecimal(){return s.DecimalBuilder}visitList(){return h.ListBuilder}visitStruct(){return _.StructBuilder}visitUnion(){return y.UnionBuilder}visitDenseUnion(){return y.DenseUnionBuilder}visitSparseUnion(){return y.SparseUnionBuilder}visitDictionary(){return o.DictionaryBuilder}visitInterval(){return c.IntervalBuilder}visitIntervalDayTime(){return c.IntervalDayTimeBuilder}visitIntervalYearMonth(){return c.IntervalYearMonthBuilder}visitDuration(){return f.DurationBuilder}visitDurationSecond(){return f.DurationSecondBuilder}visitDurationMillisecond(){return f.DurationMillisecondBuilder}visitDurationMicrosecond(){return f.DurationMicrosecondBuilder}visitDurationNanosecond(){return f.DurationNanosecondBuilder}visitFixedSizeList(){return l.FixedSizeListBuilder}visitMap(){return m.MapBuilder}}return Wi.GetBuilderCtor=v,Wi.instance=new v,Wi}var Fu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.compareTypes=t.compareFields=t.compareSchemas=t.instance=t.TypeComparator=void 0;const e=mt;class n extends e.Visitor{compareSchemas(w,M){return w===M||M instanceof w.constructor&&this.compareManyFields(w.fields,M.fields)}compareManyFields(w,M){return w===M||Array.isArray(w)&&Array.isArray(M)&&w.length===M.length&&w.every((F,C)=>this.compareFields(F,M[C]))}compareFields(w,M){return w===M||M instanceof w.constructor&&w.name===M.name&&w.nullable===M.nullable&&this.visit(w.type,M.type)}}t.TypeComparator=n;function r(v,w){return w instanceof v.constructor}function i(v,w){return v===w||r(v,w)}function s(v,w){return v===w||r(v,w)&&v.bitWidth===w.bitWidth&&v.isSigned===w.isSigned}function o(v,w){return v===w||r(v,w)&&v.precision===w.precision}function a(v,w){return v===w||r(v,w)&&v.byteWidth===w.byteWidth}function l(v,w){return v===w||r(v,w)&&v.unit===w.unit}function u(v,w){return v===w||r(v,w)&&v.unit===w.unit&&v.timezone===w.timezone}function c(v,w){return v===w||r(v,w)&&v.unit===w.unit&&v.bitWidth===w.bitWidth}function f(v,w){return v===w||r(v,w)&&v.children.length===w.children.length&&t.instance.compareManyFields(v.children,w.children)}function d(v,w){return v===w||r(v,w)&&v.children.length===w.children.length&&t.instance.compareManyFields(v.children,w.children)}function h(v,w){return v===w||r(v,w)&&v.mode===w.mode&&v.typeIds.every((M,F)=>M===w.typeIds[F])&&t.instance.compareManyFields(v.children,w.children)}function m(v,w){return v===w||r(v,w)&&v.id===w.id&&v.isOrdered===w.isOrdered&&t.instance.visit(v.indices,w.indices)&&t.instance.visit(v.dictionary,w.dictionary)}function b(v,w){return v===w||r(v,w)&&v.unit===w.unit}function _(v,w){return v===w||r(v,w)&&v.unit===w.unit}function p(v,w){return v===w||r(v,w)&&v.listSize===w.listSize&&v.children.length===w.children.length&&t.instance.compareManyFields(v.children,w.children)}function g(v,w){return v===w||r(v,w)&&v.keysSorted===w.keysSorted&&v.children.length===w.children.length&&t.instance.compareManyFields(v.children,w.children)}n.prototype.visitNull=i,n.prototype.visitBool=i,n.prototype.visitInt=s,n.prototype.visitInt8=s,n.prototype.visitInt16=s,n.prototype.visitInt32=s,n.prototype.visitInt64=s,n.prototype.visitUint8=s,n.prototype.visitUint16=s,n.prototype.visitUint32=s,n.prototype.visitUint64=s,n.prototype.visitFloat=o,n.prototype.visitFloat16=o,n.prototype.visitFloat32=o,n.prototype.visitFloat64=o,n.prototype.visitUtf8=i,n.prototype.visitLargeUtf8=i,n.prototype.visitBinary=i,n.prototype.visitLargeBinary=i,n.prototype.visitFixedSizeBinary=a,n.prototype.visitDate=l,n.prototype.visitDateDay=l,n.prototype.visitDateMillisecond=l,n.prototype.visitTimestamp=u,n.prototype.visitTimestampSecond=u,n.prototype.visitTimestampMillisecond=u,n.prototype.visitTimestampMicrosecond=u,n.prototype.visitTimestampNanosecond=u,n.prototype.visitTime=c,n.prototype.visitTimeSecond=c,n.prototype.visitTimeMillisecond=c,n.prototype.visitTimeMicrosecond=c,n.prototype.visitTimeNanosecond=c,n.prototype.visitDecimal=i,n.prototype.visitList=f,n.prototype.visitStruct=d,n.prototype.visitUnion=h,n.prototype.visitDenseUnion=h,n.prototype.visitSparseUnion=h,n.prototype.visitDictionary=m,n.prototype.visitInterval=b,n.prototype.visitIntervalDayTime=b,n.prototype.visitIntervalYearMonth=b,n.prototype.visitDuration=_,n.prototype.visitDurationSecond=_,n.prototype.visitDurationMillisecond=_,n.prototype.visitDurationMicrosecond=_,n.prototype.visitDurationNanosecond=_,n.prototype.visitFixedSizeList=p,n.prototype.visitMap=g,t.instance=new n;function y(v,w){return t.instance.compareSchemas(v,w)}t.compareSchemas=y;function S(v,w){return t.instance.compareFields(v,w)}t.compareFields=S;function T(v,w){return t.instance.visit(v,w)}t.compareTypes=T})(Fu);var Ob;function Cf(){if(Ob)return Vt;Ob=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.builderThroughAsyncIterable=Vt.builderThroughIterable=Vt.tableFromJSON=Vt.vectorFromArray=Vt.makeBuilder=void 0;const t=en,e=Ze,n=R,r=Fr(),i=Ut(),s=KC(),o=Pu(),a=Fs(),l=Fu;function u(b){const _=b.type,p=new(s.instance.getVisitFn(_)())(b);if(_.children&&_.children.length>0){const g=b.children||[],y={nullValues:b.nullValues},S=Array.isArray(g)?(T,v)=>g[v]||y:({name:T})=>g[T]||y;for(const[T,v]of _.children.entries()){const{type:w}=v,M=S(v,T);p.children.push(u(Object.assign(Object.assign({},M),{type:w})))}}return p}Vt.makeBuilder=u;function c(b,_){if(b instanceof r.Data||b instanceof i.Vector||b.type instanceof n.DataType||ArrayBuffer.isView(b))return(0,i.makeVector)(b);const p={type:_??d(b),nullValues:[null]},g=[...h(p)(b)],y=g.length===1?g[0]:g.reduce((S,T)=>S.concat(T));return n.DataType.isDictionary(y.type)?y.memoize():y}Vt.vectorFromArray=c;function f(b){const _=c(b),p=new a.RecordBatch(new e.Schema(_.type.children),_.data[0]);return new o.Table(p)}Vt.tableFromJSON=f;function d(b){if(b.length===0)return new n.Null;let _=0,p=0,g=0,y=0,S=0,T=0,v=0,w=0;for(const M of b){if(M==null){++_;continue}switch(typeof M){case"bigint":++T;continue;case"boolean":++v;continue;case"number":++y;continue;case"string":++S;continue;case"object":Array.isArray(M)?++p:Object.prototype.toString.call(M)==="[object Date]"?++w:++g;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(y+_===b.length)return new n.Float64;if(S+_===b.length)return new n.Dictionary(new n.Utf8,new n.Int32);if(T+_===b.length)return new n.Int64;if(v+_===b.length)return new n.Bool;if(w+_===b.length)return new n.DateMillisecond;if(p+_===b.length){const M=b,F=d(M[M.findIndex(C=>C!=null)]);if(M.every(C=>C==null||(0,l.compareTypes)(F,d(C))))return new n.List(new e.Field("",F,!0))}else if(g+_===b.length){const M=new Map;for(const F of b)for(const C of Object.keys(F))!M.has(C)&&F[C]!=null&&M.set(C,new e.Field(C,d([F[C]]),!0));return new n.Struct([...M.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function h(b){const{["queueingStrategy"]:_="count"}=b,{["highWaterMark"]:p=_!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=b,g=_!=="bytes"?"length":"byteLength";return function*(y){let S=0;const T=u(b);for(const v of y)T.append(v)[g]>=p&&++S&&(yield T.toVector());(T.finish().length>0||S===0)&&(yield T.toVector())}}Vt.builderThroughIterable=h;function m(b){const{["queueingStrategy"]:_="count"}=b,{["highWaterMark"]:p=_!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=b,g=_!=="bytes"?"length":"byteLength";return function(y){return t.__asyncGenerator(this,arguments,function*(){var S,T,v,w;let M=0;const F=u(b);try{for(var C=!0,V=t.__asyncValues(y),X;X=yield t.__await(V.next()),S=X.done,!S;C=!0){w=X.value,C=!1;const ve=w;F.append(ve)[g]>=p&&++M&&(yield yield t.__await(F.toVector()))}}catch(ve){T={error:ve}}finally{try{!C&&!S&&(v=V.return)&&(yield t.__await(v.call(V)))}finally{if(T)throw T.error}}(F.finish().length>0||M===0)&&(yield yield t.__await(F.toVector()))})}}return Vt.builderThroughAsyncIterable=m,Vt}var La={},Bb;function qC(){if(Bb)return La;Bb=1,Object.defineProperty(La,"__esModule",{value:!0}),La.distributeVectorsIntoRecordBatches=void 0;const t=Fr(),e=R,n=Fs();function r(o,a){return i(o,a.map(l=>l.data.concat()))}La.distributeVectorsIntoRecordBatches=r;function i(o,a){const l=[...o.fields],u=[],c={numBatches:a.reduce((p,g)=>Math.max(p,g.length),0)};let f=0,d=0,h=-1;const m=a.length;let b,_=[];for(;c.numBatches-- >0;){for(d=Number.POSITIVE_INFINITY,h=-1;++h<m;)_[h]=b=a[h].shift(),d=Math.min(d,b?b.length:d);Number.isFinite(d)&&(_=s(l,d,_,a,c),d>0&&(u[f++]=(0,t.makeData)({type:new e.Struct(l),length:d,nullCount:0,children:_.slice()})))}return[o=o.assign(l),u.map(p=>new n.RecordBatch(o,p))]}function s(o,a,l,u,c){var f;const d=(a+63&-64)>>3;for(let h=-1,m=u.length;++h<m;){const b=l[h],_=b==null?void 0:b.length;if(_>=a)_===a?l[h]=b:(l[h]=b.slice(0,a),c.numBatches=Math.max(c.numBatches,u[h].unshift(b.slice(a,_-a))));else{const p=o[h];o[h]=p.clone({nullable:!0}),l[h]=(f=b==null?void 0:b._changeLengthAndBackfillNullBitmap(a))!==null&&f!==void 0?f:(0,t.makeData)({type:p.type,length:a,nullCount:a,nullBitmap:new Uint8Array(d)})}}return l}return La}var Mb;function Pu(){if(Mb)return hr;Mb=1;var t;Object.defineProperty(hr,"__esModule",{value:!0}),hr.tableFromArrays=hr.makeTable=hr.Table=void 0;const e=Ne,n=Fr(),r=Cf(),i=Ut(),s=Ze,o=R,a=Fu,l=qC(),u=Be,c=va(),f=Sn(),d=wg(),h=ki,m=Bf(),b=Fs();class _{constructor(...S){var T,v;if(S.length===0)return this.batches=[],this.schema=new s.Schema([]),this._offsets=[0],this;let w,M;S[0]instanceof s.Schema&&(w=S.shift()),S.at(-1)instanceof Uint32Array&&(M=S.pop());const F=V=>{if(V){if(V instanceof b.RecordBatch)return[V];if(V instanceof _)return V.batches;if(V instanceof n.Data){if(V.type instanceof o.Struct)return[new b.RecordBatch(new s.Schema(V.type.children),V)]}else{if(Array.isArray(V))return V.flatMap(X=>F(X));if(typeof V[Symbol.iterator]=="function")return[...V].flatMap(X=>F(X));if(typeof V=="object"){const X=Object.keys(V),ve=X.map(ke=>new i.Vector([V[ke]])),Et=w??new s.Schema(X.map((ke,ge)=>new s.Field(String(ke),ve[ge].type,ve[ge].nullable))),[,ee]=(0,l.distributeVectorsIntoRecordBatches)(Et,ve);return ee.length===0?[new b.RecordBatch(V)]:ee}}}return[]},C=S.flatMap(V=>F(V));if(w=(v=w??((T=C[0])===null||T===void 0?void 0:T.schema))!==null&&v!==void 0?v:new s.Schema([]),!(w instanceof s.Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const V of C){if(!(V instanceof b.RecordBatch))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!(0,a.compareSchemas)(w,V.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=w,this.batches=C,this._offsets=M??(0,u.computeChunkOffsets)(this.data)}get data(){return this.batches.map(({data:S})=>S)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((S,T)=>S+T.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=(0,u.computeChunkNullCounts)(this.data)),this._nullCount}isValid(S){return!1}get(S){return null}set(S,T){}indexOf(S,T){return-1}[Symbol.iterator](){return this.batches.length>0?h.instance.visit(new i.Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...S){const T=this.schema,v=this.data.concat(S.flatMap(({data:w})=>w));return new _(T,v.map(w=>new b.RecordBatch(T,w)))}slice(S,T){const v=this.schema;[S,T]=(0,m.clampRange)({length:this.numRows},S,T);const w=(0,u.sliceChunks)(this.data,this._offsets,S,T);return new _(v,w.map(M=>new b.RecordBatch(v,M)))}getChild(S){return this.getChildAt(this.schema.fields.findIndex(T=>T.name===S))}getChildAt(S){if(S>-1&&S<this.schema.fields.length){const T=this.data.map(v=>v.children[S]);if(T.length===0){const{type:v}=this.schema.fields[S],w=(0,n.makeData)({type:v,length:0,nullCount:0});T.push(w._changeLengthAndBackfillNullBitmap(this.numRows))}return new i.Vector(T)}return null}setChild(S,T){var v;return this.setChildAt((v=this.schema.fields)===null||v===void 0?void 0:v.findIndex(w=>w.name===S),T)}setChildAt(S,T){let v=this.schema,w=[...this.batches];if(S>-1&&S<this.numCols){T||(T=new i.Vector([(0,n.makeData)({type:new o.Null,length:this.numRows})]));const M=v.fields.slice(),F=M[S].clone({type:T.type}),C=this.schema.fields.map((V,X)=>this.getChildAt(X));[M[S],C[S]]=[F,T],[v,w]=(0,l.distributeVectorsIntoRecordBatches)(v,C)}return new _(v,w)}select(S){const T=this.schema.fields.reduce((v,w,M)=>v.set(w.name,M),new Map);return this.selectAt(S.map(v=>T.get(v)).filter(v=>v>-1))}selectAt(S){const T=this.schema.selectAt(S),v=this.batches.map(w=>w.selectAt(S));return new _(T,v)}assign(S){const T=this.schema.fields,[v,w]=S.schema.fields.reduce((C,V,X)=>{const[ve,Et]=C,ee=T.findIndex(ke=>ke.name===V.name);return~ee?Et[ee]=X:ve.push(X),C},[[],[]]),M=this.schema.assign(S.schema),F=[...T.map((C,V)=>[V,w[V]]).map(([C,V])=>V===void 0?this.getChildAt(C):S.getChildAt(V)),...v.map(C=>S.getChildAt(C))].filter(Boolean);return new _(...(0,l.distributeVectorsIntoRecordBatches)(M,F))}}hr.Table=_,t=Symbol.toStringTag,_[t]=(y=>(y.schema=null,y.batches=[],y._offsets=new Uint32Array([0]),y._nullCount=-1,y[Symbol.isConcatSpreadable]=!0,y.isValid=(0,u.wrapChunkedCall1)(u.isChunkedValid),y.get=(0,u.wrapChunkedCall1)(c.instance.getVisitFn(e.Type.Struct)),y.set=(0,u.wrapChunkedCall2)(f.instance.getVisitFn(e.Type.Struct)),y.indexOf=(0,u.wrapChunkedIndexOf)(d.instance.getVisitFn(e.Type.Struct)),"Table"))(_.prototype);function p(y){const S={},T=Object.entries(y);for(const[v,w]of T)S[v]=(0,i.makeVector)(w);return new _(S)}hr.makeTable=p;function g(y){const S={},T=Object.entries(y);for(const[v,w]of T)S[v]=(0,r.vectorFromArray)(w);return new _(S)}return hr.tableFromArrays=g,hr}var kb;function Fs(){if(kb)return Hi;kb=1;var t;Object.defineProperty(Hi,"__esModule",{value:!0}),Hi._InternalEmptyPlaceholderRecordBatch=Hi.RecordBatch=void 0;const e=Fr(),n=Pu(),r=Ut(),i=Ze,s=R,o=va(),a=Sn(),l=wg(),u=ki;class c{constructor(...b){switch(b.length){case 2:{if([this.schema]=b,!(this.schema instanceof i.Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,e.makeData)({nullCount:0,type:new s.Struct(this.schema.fields),children:this.schema.fields.map(_=>(0,e.makeData)({type:_.type,nullCount:0}))})]=b,!(this.data instanceof e.Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=f(this.schema,this.data.children);break}case 1:{const[_]=b,{fields:p,children:g,length:y}=Object.keys(_).reduce((v,w,M)=>(v.children[M]=_[w],v.length=Math.max(v.length,_[w].length),v.fields[M]=i.Field.new({name:w,type:_[w].type,nullable:!0}),v),{length:0,fields:new Array,children:new Array}),S=new i.Schema(p),T=(0,e.makeData)({type:new s.Struct(p),length:y,children:g,nullCount:0});[this.schema,this.data]=f(S,T.children,y);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=d(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(b){return this.data.getValid(b)}get(b){return o.instance.visit(this.data,b)}set(b,_){return a.instance.visit(this.data,b,_)}indexOf(b,_){return l.instance.visit(this.data,b,_)}[Symbol.iterator](){return u.instance.visit(new r.Vector([this.data]))}toArray(){return[...this]}concat(...b){return new n.Table(this.schema,[this,...b])}slice(b,_){const[p]=new r.Vector([this.data]).slice(b,_).data;return new c(this.schema,p)}getChild(b){var _;return this.getChildAt((_=this.schema.fields)===null||_===void 0?void 0:_.findIndex(p=>p.name===b))}getChildAt(b){return b>-1&&b<this.schema.fields.length?new r.Vector([this.data.children[b]]):null}setChild(b,_){var p;return this.setChildAt((p=this.schema.fields)===null||p===void 0?void 0:p.findIndex(g=>g.name===b),_)}setChildAt(b,_){let p=this.schema,g=this.data;if(b>-1&&b<this.numCols){_||(_=new r.Vector([(0,e.makeData)({type:new s.Null,length:this.numRows})]));const y=p.fields.slice(),S=g.children.slice(),T=y[b].clone({type:_.type});[y[b],S[b]]=[T,_.data[0]],p=new i.Schema(y,new Map(this.schema.metadata)),g=(0,e.makeData)({type:new s.Struct(y),children:S})}return new c(p,g)}select(b){const _=this.schema.select(b),p=new s.Struct(_.fields),g=[];for(const y of b){const S=this.schema.fields.findIndex(T=>T.name===y);~S&&(g[S]=this.data.children[S])}return new c(_,(0,e.makeData)({type:p,length:this.numRows,children:g}))}selectAt(b){const _=this.schema.selectAt(b),p=b.map(y=>this.data.children[y]).filter(Boolean),g=(0,e.makeData)({type:new s.Struct(_.fields),length:this.numRows,children:p});return new c(_,g)}}Hi.RecordBatch=c,t=Symbol.toStringTag,c[t]=(m=>(m._nullCount=-1,m[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(c.prototype);function f(m,b,_=b.reduce((p,g)=>Math.max(p,g.length),0)){var p;const g=[...m.fields],y=[...b],S=(_+63&-64)>>3;for(const[T,v]of m.fields.entries()){const w=b[T];(!w||w.length!==_)&&(g[T]=v.clone({nullable:!0}),y[T]=(p=w==null?void 0:w._changeLengthAndBackfillNullBitmap(_))!==null&&p!==void 0?p:(0,e.makeData)({type:v.type,length:_,nullCount:_,nullBitmap:new Uint8Array(S)}))}return[m.assign(g),(0,e.makeData)({type:new s.Struct(g),length:_,children:y})]}function d(m,b,_=new Map){var p,g;if(((p=m==null?void 0:m.length)!==null&&p!==void 0?p:0)>0&&(m==null?void 0:m.length)===(b==null?void 0:b.length))for(let y=-1,S=m.length;++y<S;){const{type:T}=m[y],v=b[y];for(const w of[v,...((g=v==null?void 0:v.dictionary)===null||g===void 0?void 0:g.data)||[]])d(T.children,w==null?void 0:w.children,_);if(s.DataType.isDictionary(T)){const{id:w}=T;if(!_.has(w))v!=null&&v.dictionary&&_.set(w,v.dictionary);else if(_.get(w)!==v.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return _}class h extends c{constructor(b){const _=b.fields.map(g=>(0,e.makeData)({type:g.type})),p=(0,e.makeData)({type:new s.Struct(b.fields),nullCount:0,children:_});super(b,p)}}return Hi._InternalEmptyPlaceholderRecordBatch=h,Hi}var Ff={},zt={},Pf={};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.Message=void 0;const JC=ie,GC=Fi,Eb=ir,Db=oa;class Bn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new Bn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+JC.SIZE_PREFIX_LENGTH),(n||new Bn).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Db.MetadataVersion.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Eb.MessageHeader.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new GC.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,Db.MetadataVersion.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,Eb.MessageHeader.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,i,s,o){return Bn.startMessage(e),Bn.addVersion(e,n),Bn.addHeaderType(e,r),Bn.addHeader(e,i),Bn.addBodyLength(e,s),Bn.addCustomMetadata(e,o),Bn.endMessage(e)}}Pf.Message=Bn;var $o={};Object.defineProperty($o,"__esModule",{value:!0});$o.instance=$o.TypeAssembler=void 0;const YC=mt,Ab=yu,uc=cr,Hh=pa,Nb=du,Rb=hu,Cb=fu,Fb=_u,Pb=pu,Ua=ca,Wh=ua,cc=ga,dc=_a,Kh=ma,qh=da,jb=mu,Lb=gu,Ws=ba,xa=cu,Jh=fa,Gh=ha,Yh=ya;class VI extends YC.Visitor{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return Ab.Null.startNull(n),Ab.Null.endNull(n)}visitInt(e,n){return uc.Int.startInt(n),uc.Int.addBitWidth(n,e.bitWidth),uc.Int.addIsSigned(n,e.isSigned),uc.Int.endInt(n)}visitFloat(e,n){return Hh.FloatingPoint.startFloatingPoint(n),Hh.FloatingPoint.addPrecision(n,e.precision),Hh.FloatingPoint.endFloatingPoint(n)}visitBinary(e,n){return Nb.Binary.startBinary(n),Nb.Binary.endBinary(n)}visitLargeBinary(e,n){return Rb.LargeBinary.startLargeBinary(n),Rb.LargeBinary.endLargeBinary(n)}visitBool(e,n){return Cb.Bool.startBool(n),Cb.Bool.endBool(n)}visitUtf8(e,n){return Fb.Utf8.startUtf8(n),Fb.Utf8.endUtf8(n)}visitLargeUtf8(e,n){return Pb.LargeUtf8.startLargeUtf8(n),Pb.LargeUtf8.endLargeUtf8(n)}visitDecimal(e,n){return Ua.Decimal.startDecimal(n),Ua.Decimal.addScale(n,e.scale),Ua.Decimal.addPrecision(n,e.precision),Ua.Decimal.addBitWidth(n,e.bitWidth),Ua.Decimal.endDecimal(n)}visitDate(e,n){return Wh.Date.startDate(n),Wh.Date.addUnit(n,e.unit),Wh.Date.endDate(n)}visitTime(e,n){return cc.Time.startTime(n),cc.Time.addUnit(n,e.unit),cc.Time.addBitWidth(n,e.bitWidth),cc.Time.endTime(n)}visitTimestamp(e,n){const r=e.timezone&&n.createString(e.timezone)||void 0;return dc.Timestamp.startTimestamp(n),dc.Timestamp.addUnit(n,e.unit),r!==void 0&&dc.Timestamp.addTimezone(n,r),dc.Timestamp.endTimestamp(n)}visitInterval(e,n){return Kh.Interval.startInterval(n),Kh.Interval.addUnit(n,e.unit),Kh.Interval.endInterval(n)}visitDuration(e,n){return qh.Duration.startDuration(n),qh.Duration.addUnit(n,e.unit),qh.Duration.endDuration(n)}visitList(e,n){return jb.List.startList(n),jb.List.endList(n)}visitStruct(e,n){return Lb.Struct_.startStruct_(n),Lb.Struct_.endStruct_(n)}visitUnion(e,n){Ws.Union.startTypeIdsVector(n,e.typeIds.length);const r=Ws.Union.createTypeIdsVector(n,e.typeIds);return Ws.Union.startUnion(n),Ws.Union.addMode(n,e.mode),Ws.Union.addTypeIds(n,r),Ws.Union.endUnion(n)}visitDictionary(e,n){const r=this.visit(e.indices,n);return xa.DictionaryEncoding.startDictionaryEncoding(n),xa.DictionaryEncoding.addId(n,BigInt(e.id)),xa.DictionaryEncoding.addIsOrdered(n,e.isOrdered),r!==void 0&&xa.DictionaryEncoding.addIndexType(n,r),xa.DictionaryEncoding.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return Jh.FixedSizeBinary.startFixedSizeBinary(n),Jh.FixedSizeBinary.addByteWidth(n,e.byteWidth),Jh.FixedSizeBinary.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return Gh.FixedSizeList.startFixedSizeList(n),Gh.FixedSizeList.addListSize(n,e.listSize),Gh.FixedSizeList.endFixedSizeList(n)}visitMap(e,n){return Yh.Map.startMap(n),Yh.Map.addKeysSorted(n,e.keysSorted),Yh.Map.endMap(n)}}$o.TypeAssembler=VI;$o.instance=new VI;var In={},Ub;function QC(){if(Ub)return In;Ub=1,Object.defineProperty(In,"__esModule",{value:!0}),In.fieldFromJSON=In.dictionaryBatchFromJSON=In.recordBatchFromJSON=In.schemaFromJSON=void 0;const t=Ze,e=R,n=Ba(),r=Ne;function i(_,p=new Map){return new t.Schema(a(_,p),h(_.metadata),p)}In.schemaFromJSON=i;function s(_){return new n.RecordBatch(_.count,u(_.columns),c(_.columns))}In.recordBatchFromJSON=s;function o(_){return new n.DictionaryBatch(s(_.data),_.id,_.isDelta)}In.dictionaryBatchFromJSON=o;function a(_,p){return(_.fields||[]).filter(Boolean).map(g=>t.Field.fromJSON(g,p))}function l(_,p){return(_.children||[]).filter(Boolean).map(g=>t.Field.fromJSON(g,p))}function u(_){return(_||[]).reduce((p,g)=>[...p,new n.FieldNode(g.count,f(g.VALIDITY)),...u(g.children)],[])}function c(_,p=[]){for(let g=-1,y=(_||[]).length;++g<y;){const S=_[g];S.VALIDITY&&p.push(new n.BufferRegion(p.length,S.VALIDITY.length)),S.TYPE_ID&&p.push(new n.BufferRegion(p.length,S.TYPE_ID.length)),S.OFFSET&&p.push(new n.BufferRegion(p.length,S.OFFSET.length)),S.DATA&&p.push(new n.BufferRegion(p.length,S.DATA.length)),p=c(S.children,p)}return p}function f(_){return(_||[]).reduce((p,g)=>p+ +(g===0),0)}function d(_,p){let g,y,S,T,v,w;return!p||!(T=_.dictionary)?(v=b(_,l(_,p)),S=new t.Field(_.name,v,_.nullable,h(_.metadata))):p.has(g=T.id)?(y=(y=T.indexType)?m(y):new e.Int32,w=new e.Dictionary(p.get(g),y,g,T.isOrdered),S=new t.Field(_.name,w,_.nullable,h(_.metadata))):(y=(y=T.indexType)?m(y):new e.Int32,p.set(g,v=b(_,l(_,p))),w=new e.Dictionary(v,y,g,T.isOrdered),S=new t.Field(_.name,w,_.nullable,h(_.metadata))),S||null}In.fieldFromJSON=d;function h(_=[]){return new Map(_.map(({key:p,value:g})=>[p,g]))}function m(_){return new e.Int(_.isSigned,_.bitWidth)}function b(_,p){const g=_.type.name;switch(g){case"NONE":return new e.Null;case"null":return new e.Null;case"binary":return new e.Binary;case"largebinary":return new e.LargeBinary;case"utf8":return new e.Utf8;case"largeutf8":return new e.LargeUtf8;case"bool":return new e.Bool;case"list":return new e.List((p||[])[0]);case"struct":return new e.Struct(p||[]);case"struct_":return new e.Struct(p||[])}switch(g){case"int":{const y=_.type;return new e.Int(y.isSigned,y.bitWidth)}case"floatingpoint":{const y=_.type;return new e.Float(r.Precision[y.precision])}case"decimal":{const y=_.type;return new e.Decimal(y.scale,y.precision,y.bitWidth)}case"date":{const y=_.type;return new e.Date_(r.DateUnit[y.unit])}case"time":{const y=_.type;return new e.Time(r.TimeUnit[y.unit],y.bitWidth)}case"timestamp":{const y=_.type;return new e.Timestamp(r.TimeUnit[y.unit],y.timezone)}case"interval":{const y=_.type;return new e.Interval(r.IntervalUnit[y.unit])}case"duration":{const y=_.type;return new e.Duration(r.TimeUnit[y.unit])}case"union":{const y=_.type,[S,...T]=(y.mode+"").toLowerCase(),v=S.toUpperCase()+T.join("");return new e.Union(r.UnionMode[v],y.typeIds||[],p||[])}case"fixedsizebinary":{const y=_.type;return new e.FixedSizeBinary(y.byteWidth)}case"fixedsizelist":{const y=_.type;return new e.FixedSizeList(y.listSize,(p||[])[0])}case"map":{const y=_.type;return new e.Map_((p||[])[0],y.keysSorted)}}throw new Error(`Unrecognized type: "${g}"`)}return In}var xb;function Ba(){if(xb)return zt;xb=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.FieldNode=zt.BufferRegion=zt.DictionaryBatch=zt.RecordBatch=zt.Message=void 0;const t=ie,e=la,n=cr,r=aa,i=ou,s=ur,o=uu,a=au,l=pn,u=Fi,c=lu,f=pa,d=ca,h=ua,m=ga,b=_a,_=ma,p=da,g=ba,y=fa,S=ha,T=ya,v=Pf,w=Ze,M=L,F=Cr,C=Ne,V=$o,X=QC();var ve=t.Builder,Et=t.ByteBuffer;const ee=R;class ke{static fromJSON(I,O){const E=new ke(0,C.MetadataVersion.V5,O);return E._createHeader=de(I,O),E}static decode(I){I=new Et((0,M.toUint8Array)(I));const O=v.Message.getRootAsMessage(I),E=O.bodyLength(),$=O.version(),Q=O.headerType(),ue=new ke(E,$,Q);return ue._createHeader=pe(O,Q),ue}static encode(I){const O=new ve;let E=-1;return I.isSchema()?E=w.Schema.encode(O,I.header()):I.isRecordBatch()?E=ge.encode(O,I.header()):I.isDictionaryBatch()&&(E=U.encode(O,I.header())),v.Message.startMessage(O),v.Message.addVersion(O,C.MetadataVersion.V5),v.Message.addHeader(O,E),v.Message.addHeaderType(O,I.headerType),v.Message.addBodyLength(O,BigInt(I.bodyLength)),v.Message.finishMessageBuffer(O,v.Message.endMessage(O)),O.asUint8Array()}static from(I,O=0){if(I instanceof w.Schema)return new ke(0,C.MetadataVersion.V5,C.MessageHeader.Schema,I);if(I instanceof ge)return new ke(O,C.MetadataVersion.V5,C.MessageHeader.RecordBatch,I);if(I instanceof U)return new ke(O,C.MetadataVersion.V5,C.MessageHeader.DictionaryBatch,I);throw new Error(`Unrecognized Message header: ${I}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===C.MessageHeader.Schema}isRecordBatch(){return this.headerType===C.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===C.MessageHeader.DictionaryBatch}constructor(I,O,E,$){this._version=O,this._headerType=E,this.body=new Uint8Array(0),$&&(this._createHeader=()=>$),this._bodyLength=(0,F.bigIntToNumber)(I)}}zt.Message=ke;class ge{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(I,O,E){this._nodes=O,this._buffers=E,this._length=(0,F.bigIntToNumber)(I)}}zt.RecordBatch=ge;class U{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(I,O,E=!1){this._data=I,this._isDelta=E,this._id=(0,F.bigIntToNumber)(O)}}zt.DictionaryBatch=U;class K{constructor(I,O){this.offset=(0,F.bigIntToNumber)(I),this.length=(0,F.bigIntToNumber)(O)}}zt.BufferRegion=K;class q{constructor(I,O){this.length=(0,F.bigIntToNumber)(I),this.nullCount=(0,F.bigIntToNumber)(O)}}zt.FieldNode=q;function de(B,I){return()=>{switch(I){case C.MessageHeader.Schema:return w.Schema.fromJSON(B);case C.MessageHeader.RecordBatch:return ge.fromJSON(B);case C.MessageHeader.DictionaryBatch:return U.fromJSON(B)}throw new Error(`Unrecognized Message type: { name: ${C.MessageHeader[I]}, type: ${I} }`)}}function pe(B,I){return()=>{switch(I){case C.MessageHeader.Schema:return w.Schema.decode(B.header(new e.Schema),new Map,B.version());case C.MessageHeader.RecordBatch:return ge.decode(B.header(new r.RecordBatch),B.version());case C.MessageHeader.DictionaryBatch:return U.decode(B.header(new i.DictionaryBatch),B.version())}throw new Error(`Unrecognized Message type: { name: ${C.MessageHeader[I]}, type: ${I} }`)}}w.Field.encode=Us,w.Field.decode=$n,w.Field.fromJSON=X.fieldFromJSON,w.Schema.encode=Ls,w.Schema.decode=xt,w.Schema.fromJSON=X.schemaFromJSON,ge.encode=xs,ge.decode=lt,ge.fromJSON=X.recordBatchFromJSON,U.encode=Vs,U.decode=tn,U.fromJSON=X.dictionaryBatchFromJSON,q.encode=D,q.decode=nn,K.encode=A,K.decode=gt;function xt(B,I=new Map,O=C.MetadataVersion.V5){const E=xi(B,I);return new w.Schema(E,dr(B),I,O)}function lt(B,I=C.MetadataVersion.V5){if(B.compression()!==null)throw new Error("Record batch compression not implemented");return new ge(B.length(),Ur(B),xr(B,I))}function tn(B,I=C.MetadataVersion.V5){return new U(ge.decode(B.data(),I),B.id(),B.isDelta())}function gt(B){return new K(B.offset(),B.length())}function nn(B){return new q(B.length(),B.nullCount())}function Ur(B){const I=[];for(let O,E=-1,$=-1,Q=B.nodesLength();++E<Q;)(O=B.nodes(E))&&(I[++$]=q.decode(O));return I}function xr(B,I){const O=[];for(let E,$=-1,Q=-1,ue=B.buffersLength();++$<ue;)(E=B.buffers($))&&(I<C.MetadataVersion.V4&&(E.bb_pos+=8*($+1)),O[++Q]=K.decode(E));return O}function xi(B,I){const O=[];for(let E,$=-1,Q=-1,ue=B.fieldsLength();++$<ue;)(E=B.fields($))&&(O[++Q]=w.Field.decode(E,I));return O}function Vr(B,I){const O=[];for(let E,$=-1,Q=-1,ue=B.childrenLength();++$<ue;)(E=B.children($))&&(O[++Q]=w.Field.decode(E,I));return O}function $n(B,I){let O,E,$,Q,ue,Dt;return!I||!(Dt=B.dictionary())?($=js(B,Vr(B,I)),E=new w.Field(B.name(),$,B.nullable(),dr(B))):I.has(O=(0,F.bigIntToNumber)(Dt.id()))?(Q=(Q=Dt.indexType())?Ps(Q):new ee.Int32,ue=new ee.Dictionary(I.get(O),Q,O,Dt.isOrdered()),E=new w.Field(B.name(),ue,B.nullable(),dr(B))):(Q=(Q=Dt.indexType())?Ps(Q):new ee.Int32,I.set(O,$=js(B,Vr(B,I))),ue=new ee.Dictionary($,Q,O,Dt.isOrdered()),E=new w.Field(B.name(),ue,B.nullable(),dr(B))),E||null}function dr(B){const I=new Map;if(B)for(let O,E,$=-1,Q=Math.trunc(B.customMetadataLength());++$<Q;)(O=B.customMetadata($))&&(E=O.key())!=null&&I.set(E,O.value());return I}function Ps(B){return new ee.Int(B.isSigned(),B.bitWidth())}function js(B,I){const O=B.typeType();switch(O){case l.Type.NONE:return new ee.Null;case l.Type.Null:return new ee.Null;case l.Type.Binary:return new ee.Binary;case l.Type.LargeBinary:return new ee.LargeBinary;case l.Type.Utf8:return new ee.Utf8;case l.Type.LargeUtf8:return new ee.LargeUtf8;case l.Type.Bool:return new ee.Bool;case l.Type.List:return new ee.List((I||[])[0]);case l.Type.Struct_:return new ee.Struct(I||[])}switch(O){case l.Type.Int:{const E=B.type(new n.Int);return new ee.Int(E.isSigned(),E.bitWidth())}case l.Type.FloatingPoint:{const E=B.type(new f.FloatingPoint);return new ee.Float(E.precision())}case l.Type.Decimal:{const E=B.type(new d.Decimal);return new ee.Decimal(E.scale(),E.precision(),E.bitWidth())}case l.Type.Date:{const E=B.type(new h.Date);return new ee.Date_(E.unit())}case l.Type.Time:{const E=B.type(new m.Time);return new ee.Time(E.unit(),E.bitWidth())}case l.Type.Timestamp:{const E=B.type(new b.Timestamp);return new ee.Timestamp(E.unit(),E.timezone())}case l.Type.Interval:{const E=B.type(new _.Interval);return new ee.Interval(E.unit())}case l.Type.Duration:{const E=B.type(new p.Duration);return new ee.Duration(E.unit())}case l.Type.Union:{const E=B.type(new g.Union);return new ee.Union(E.mode(),E.typeIdsArray()||[],I||[])}case l.Type.FixedSizeBinary:{const E=B.type(new y.FixedSizeBinary);return new ee.FixedSizeBinary(E.byteWidth())}case l.Type.FixedSizeList:{const E=B.type(new S.FixedSizeList);return new ee.FixedSizeList(E.listSize(),(I||[])[0])}case l.Type.Map:{const E=B.type(new T.Map);return new ee.Map_((I||[])[0],E.keysSorted())}}throw new Error(`Unrecognized type: "${l.Type[O]}" (${O})`)}function Ls(B,I){const O=I.fields.map(Q=>w.Field.encode(B,Q));e.Schema.startFieldsVector(B,O.length);const E=e.Schema.createFieldsVector(B,O),$=I.metadata&&I.metadata.size>0?e.Schema.createCustomMetadataVector(B,[...I.metadata].map(([Q,ue])=>{const Dt=B.createString(`${Q}`),Vu=B.createString(`${ue}`);return u.KeyValue.startKeyValue(B),u.KeyValue.addKey(B,Dt),u.KeyValue.addValue(B,Vu),u.KeyValue.endKeyValue(B)})):-1;return e.Schema.startSchema(B),e.Schema.addFields(B,E),e.Schema.addEndianness(B,N?c.Endianness.Little:c.Endianness.Big),$!==-1&&e.Schema.addCustomMetadata(B,$),e.Schema.endSchema(B)}function Us(B,I){let O=-1,E=-1,$=-1;const Q=I.type;let ue=I.typeId;ee.DataType.isDictionary(Q)?(ue=Q.dictionary.typeId,$=V.instance.visit(Q,B),E=V.instance.visit(Q.dictionary,B)):E=V.instance.visit(Q,B);const Dt=(Q.children||[]).map(uh=>w.Field.encode(B,uh)),Vu=o.Field.createChildrenVector(B,Dt),zu=I.metadata&&I.metadata.size>0?o.Field.createCustomMetadataVector(B,[...I.metadata].map(([uh,TM])=>{const IM=B.createString(`${uh}`),OM=B.createString(`${TM}`);return u.KeyValue.startKeyValue(B),u.KeyValue.addKey(B,IM),u.KeyValue.addValue(B,OM),u.KeyValue.endKeyValue(B)})):-1;return I.name&&(O=B.createString(I.name)),o.Field.startField(B),o.Field.addType(B,E),o.Field.addTypeType(B,ue),o.Field.addChildren(B,Vu),o.Field.addNullable(B,!!I.nullable),O!==-1&&o.Field.addName(B,O),$!==-1&&o.Field.addDictionary(B,$),zu!==-1&&o.Field.addCustomMetadata(B,zu),o.Field.endField(B)}function xs(B,I){const O=I.nodes||[],E=I.buffers||[];r.RecordBatch.startNodesVector(B,O.length);for(const ue of O.slice().reverse())q.encode(B,ue);const $=B.endVector();r.RecordBatch.startBuffersVector(B,E.length);for(const ue of E.slice().reverse())K.encode(B,ue);const Q=B.endVector();return r.RecordBatch.startRecordBatch(B),r.RecordBatch.addLength(B,BigInt(I.length)),r.RecordBatch.addNodes(B,$),r.RecordBatch.addBuffers(B,Q),r.RecordBatch.endRecordBatch(B)}function Vs(B,I){const O=ge.encode(B,I.data);return i.DictionaryBatch.startDictionaryBatch(B),i.DictionaryBatch.addId(B,BigInt(I.id)),i.DictionaryBatch.addIsDelta(B,I.isDelta),i.DictionaryBatch.addData(B,O),i.DictionaryBatch.endDictionaryBatch(B)}function D(B,I){return a.FieldNode.createFieldNode(B,BigInt(I.length),BigInt(I.nullCount))}function A(B,I){return s.Buffer.createBuffer(B,BigInt(I.offset),BigInt(I.length))}const N=(()=>{const B=new ArrayBuffer(2);return new DataView(B).setInt16(0,256,!0),new Int16Array(B)[0]===256})();return zt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.magicX2AndPadding=t.magicAndPadding=t.magicLength=t.checkForMagicArrowString=t.MAGIC=t.MAGIC_STR=t.PADDING=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=void 0;const e=en,n=Ne,r=ie,i=Ba(),s=Ci,o=Ms,a=L,l=jt,u=Su,c=g=>`Expected ${n.MessageHeader[g]} Message in stream, but was null or length 0.`,f=g=>`Header pointer of flatbuffer-encoded ${n.MessageHeader[g]} Message is null or length 0.`,d=(g,y)=>`Expected to read ${g} metadata bytes, but only read ${y}.`,h=(g,y)=>`Expected to read ${g} bytes for message body, but only read ${y}.`;class m{constructor(y){this.source=y instanceof l.ByteStream?y:new l.ByteStream(y)}[Symbol.iterator](){return this}next(){let y;return(y=this.readMetadataLength()).done||y.value===-1&&(y=this.readMetadataLength()).done||(y=this.readMetadata(y.value)).done?u.ITERATOR_DONE:y}throw(y){return this.source.throw(y)}return(y){return this.source.return(y)}readMessage(y){let S;if((S=this.next()).done)return null;if(y!=null&&S.value.headerType!==y)throw new Error(c(y));return S.value}readMessageBody(y){if(y<=0)return new Uint8Array(0);const S=(0,a.toUint8Array)(this.source.read(y));if(S.byteLength<y)throw new Error(h(y,S.byteLength));return S.byteOffset%8===0&&S.byteOffset+S.byteLength<=S.buffer.byteLength?S:S.slice()}readSchema(y=!1){const S=n.MessageHeader.Schema,T=this.readMessage(S),v=T==null?void 0:T.header();if(y&&!v)throw new Error(f(S));return v}readMetadataLength(){const y=this.source.read(t.PADDING),S=y&&new r.ByteBuffer(y),T=(S==null?void 0:S.readInt32(0))||0;return{done:T===0,value:T}}readMetadata(y){const S=this.source.read(y);if(!S)return u.ITERATOR_DONE;if(S.byteLength<y)throw new Error(d(y,S.byteLength));return{done:!1,value:i.Message.decode(S)}}}t.MessageReader=m;class b{constructor(y,S){this.source=y instanceof l.AsyncByteStream?y:(0,s.isFileHandle)(y)?new o.AsyncRandomAccessFile(y,S):new l.AsyncByteStream(y)}[Symbol.asyncIterator](){return this}next(){return e.__awaiter(this,void 0,void 0,function*(){let y;return(y=yield this.readMetadataLength()).done||y.value===-1&&(y=yield this.readMetadataLength()).done||(y=yield this.readMetadata(y.value)).done?u.ITERATOR_DONE:y})}throw(y){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.throw(y)})}return(y){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.return(y)})}readMessage(y){return e.__awaiter(this,void 0,void 0,function*(){let S;if((S=yield this.next()).done)return null;if(y!=null&&S.value.headerType!==y)throw new Error(c(y));return S.value})}readMessageBody(y){return e.__awaiter(this,void 0,void 0,function*(){if(y<=0)return new Uint8Array(0);const S=(0,a.toUint8Array)(yield this.source.read(y));if(S.byteLength<y)throw new Error(h(y,S.byteLength));return S.byteOffset%8===0&&S.byteOffset+S.byteLength<=S.buffer.byteLength?S:S.slice()})}readSchema(y=!1){return e.__awaiter(this,void 0,void 0,function*(){const S=n.MessageHeader.Schema,T=yield this.readMessage(S),v=T==null?void 0:T.header();if(y&&!v)throw new Error(f(S));return v})}readMetadataLength(){return e.__awaiter(this,void 0,void 0,function*(){const y=yield this.source.read(t.PADDING),S=y&&new r.ByteBuffer(y),T=(S==null?void 0:S.readInt32(0))||0;return{done:T===0,value:T}})}readMetadata(y){return e.__awaiter(this,void 0,void 0,function*(){const S=yield this.source.read(y);if(!S)return u.ITERATOR_DONE;if(S.byteLength<y)throw new Error(d(y,S.byteLength));return{done:!1,value:i.Message.decode(S)}})}}t.AsyncMessageReader=b;class _ extends m{constructor(y){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=y instanceof u.ArrowJSON?y:new u.ArrowJSON(y)}next(){const{_json:y}=this;if(!this._schema)return this._schema=!0,{done:!1,value:i.Message.fromJSON(y.schema,n.MessageHeader.Schema)};if(this._dictionaryIndex<y.dictionaries.length){const S=y.dictionaries[this._dictionaryIndex++];return this._body=S.data.columns,{done:!1,value:i.Message.fromJSON(S,n.MessageHeader.DictionaryBatch)}}if(this._batchIndex<y.batches.length){const S=y.batches[this._batchIndex++];return this._body=S.columns,{done:!1,value:i.Message.fromJSON(S,n.MessageHeader.RecordBatch)}}return this._body=[],u.ITERATOR_DONE}readMessageBody(y){return S(this._body);function S(T){return(T||[]).reduce((v,w)=>[...v,...w.VALIDITY&&[w.VALIDITY]||[],...w.TYPE_ID&&[w.TYPE_ID]||[],...w.OFFSET&&[w.OFFSET]||[],...w.DATA&&[w.DATA]||[],...S(w.children)],[])}}readMessage(y){let S;if((S=this.next()).done)return null;if(y!=null&&S.value.headerType!==y)throw new Error(c(y));return S.value}readSchema(){const y=n.MessageHeader.Schema,S=this.readMessage(y),T=S==null?void 0:S.header();if(!S||!T)throw new Error(f(y));return T}}t.JSONMessageReader=_,t.PADDING=4,t.MAGIC_STR="ARROW1",t.MAGIC=new Uint8Array(t.MAGIC_STR.length);for(let g=0;g<t.MAGIC_STR.length;g+=1)t.MAGIC[g]=t.MAGIC_STR.codePointAt(g);function p(g,y=0){for(let S=-1,T=t.MAGIC.length;++S<T;)if(t.MAGIC[S]!==g[y+S])return!1;return!0}t.checkForMagicArrowString=p,t.magicLength=t.MAGIC.length,t.magicAndPadding=t.magicLength+t.PADDING,t.magicX2AndPadding=t.magicLength*2+t.PADDING})(Ff);Object.defineProperty(vt,"__esModule",{value:!0});vt.AsyncRecordBatchFileReader=vt.RecordBatchFileReader=vt.AsyncRecordBatchStreamReader=vt.RecordBatchStreamReader=vt.RecordBatchReader=void 0;const _e=en,XC=Fr(),Vb=Ut(),ZC=R,kd=Ne,zI=Os,zb=sa,$b=jt,xl=Ms,$I=Vo,Ag=Fs(),cs=Su,mn=Ff,sn=Ci;class Br extends cs.ReadableInterop{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return(0,sn.isPromise)(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return zb.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return zb.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Br?e:(0,sn.isArrowJSON)(e)?nF(e):(0,sn.isFileHandle)(e)?sF(e):(0,sn.isPromise)(e)?_e.__awaiter(this,void 0,void 0,function*(){return yield Br.from(yield e)}):(0,sn.isFetchResponse)(e)||(0,sn.isReadableDOMStream)(e)||(0,sn.isReadableNodeStream)(e)||(0,sn.isAsyncIterable)(e)?iF(new $b.AsyncByteStream(e)):rF(new $b.ByteStream(e))}static readAll(e){return e instanceof Br?e.isSync()?Hb(e):Wb(e):(0,sn.isArrowJSON)(e)||ArrayBuffer.isView(e)||(0,sn.isIterable)(e)||(0,sn.isIteratorResult)(e)?Hb(e):Wb(e)}}vt.RecordBatchReader=Br;class Vl extends Br{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return _e.__asyncGenerator(this,arguments,function*(){yield _e.__await(yield*_e.__asyncDelegator(_e.__asyncValues(this[Symbol.iterator]())))})}}vt.RecordBatchStreamReader=Vl;class zl extends Br{constructor(e){super(e),this._impl=e}readAll(){var e,n,r,i;return _e.__awaiter(this,void 0,void 0,function*(){const s=new Array;try{for(var o=!0,a=_e.__asyncValues(this),l;l=yield a.next(),e=l.done,!e;o=!0){i=l.value,o=!1;const u=i;s.push(u)}}catch(u){n={error:u}}finally{try{!o&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}vt.AsyncRecordBatchStreamReader=zl;class Ng extends Vl{constructor(e){super(e),this._impl=e}}vt.RecordBatchFileReader=Ng;class HI extends zl{constructor(e){super(e),this._impl=e}}vt.AsyncRecordBatchFileReader=HI;class WI{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const r=this._loadVectors(e,n,this.schema.fields),i=(0,XC.makeData)({type:new ZC.Struct(this.schema.fields),length:e.length,children:r});return new Ag.RecordBatch(this.schema,i)}_loadDictionaryBatch(e,n){const{id:r,isDelta:i}=e,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),u=this._loadVectors(e.data,n,[l]);return(a&&i?a.concat(new Vb.Vector(u)):new Vb.Vector(u)).memoize()}return a.memoize()}_loadVectors(e,n,r){return new $I.VectorLoader(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class Ed extends WI{constructor(e,n){super(n),this._reader=(0,sn.isArrowJSON)(e)?new mn.JSONMessageReader(this._handle=e):new mn.MessageReader(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=qI(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):cs.ITERATOR_DONE}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):cs.ITERATOR_DONE}next(){if(this.closed)return cs.ITERATOR_DONE;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ag._InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Dd extends WI{constructor(e,n){super(n),this._reader=new mn.AsyncMessageReader(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return _e.__awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return _e.__awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=qI(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return _e.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):cs.ITERATOR_DONE})}return(e){return _e.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):cs.ITERATOR_DONE})}next(){return _e.__awaiter(this,void 0,void 0,function*(){if(this.closed)return cs.ITERATOR_DONE;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ag._InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return _e.__awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class KI extends Ed{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,n){super(e instanceof xl.RandomAccessFile?e:new xl.RandomAccessFile(e),n)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(kd.MessageHeader.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(kd.MessageHeader.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:e}=this,n=e.size-mn.magicAndPadding,r=e.readInt32(n),i=e.readAt(n-r,r);return zI.Footer.decode(i)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class eF extends Dd{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(e instanceof xl.AsyncRandomAccessFile?e:new xl.AsyncRandomAccessFile(e,r),i)}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return _e.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return _e.__awaiter(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(kd.MessageHeader.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){var n;return _e.__awaiter(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(kd.MessageHeader.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return _e.__awaiter(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-mn.magicAndPadding,r=yield e.readInt32(n),i=yield e.readAt(n-r,r);return zI.Footer.decode(i)})}_readNextMessageAndValidate(e){return _e.__awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class tF extends Ed{constructor(e,n){super(e,n)}_loadVectors(e,n,r){return new $I.JSONVectorLoader(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function qI(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*Hb(t){const e=Br.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function Wb(t){return _e.__asyncGenerator(this,arguments,function*(){const n=yield _e.__await(Br.from(t));try{if(!(yield _e.__await(n.open({autoDestroy:!1}))).closed)do yield yield _e.__await(n);while(!(yield _e.__await(n.reset().open())).closed)}finally{yield _e.__await(n.cancel())}})}function nF(t){return new Vl(new tF(t))}function rF(t){const e=t.peek(mn.magicLength+7&-8);return e&&e.byteLength>=4?(0,mn.checkForMagicArrowString)(e)?new Ng(new KI(t.read())):new Vl(new Ed(t)):new Vl(new Ed(function*(){}()))}function iF(t){return _e.__awaiter(this,void 0,void 0,function*(){const e=yield t.peek(mn.magicLength+7&-8);return e&&e.byteLength>=4?(0,mn.checkForMagicArrowString)(e)?new Ng(new KI(yield t.read())):new zl(new Dd(t)):new zl(new Dd(function(){return _e.__asyncGenerator(this,arguments,function*(){})}()))})}function sF(t){return _e.__awaiter(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new xl.AsyncRandomAccessFile(t,e);return e>=mn.magicX2AndPadding&&(0,mn.checkForMagicArrowString)(yield n.readAt(0,mn.magicLength+7&-8))?new HI(new eF(n)):new zl(new Dd(n))})}var dn={},jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.VectorAssembler=void 0;const oF=Ut(),aF=mt,Kb=Ne,lF=Fs(),JI=L,Hm=Ie,Wm=Ba(),Qh=R,qb=Cr;class Pe extends aF.Visitor{static assemble(...e){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof lF.RecordBatch?s.data.children:s.data),r=new Pe;return r.visitMany(n(e)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof oF.Vector)return this.visitMany(e.data),this;const{type:n}=e;if(!Qh.DataType.isDictionary(n)){const{length:r}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Qh.DataType.isUnion(n))this.nodes.push(new Wm.FieldNode(r,0));else{const{nullCount:i}=e;Qh.DataType.isNull(n)||jn.call(this,i<=0?new Uint8Array(0):(0,Hm.truncateBitmap)(e.offset,r,e.nullBitmap)),this.nodes.push(new Wm.FieldNode(r,i))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}jf.VectorAssembler=Pe;function jn(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Wm.BufferRegion(this._byteLength,e)),this._byteLength+=e,this}function uF(t){var e;const{type:n,length:r,typeIds:i,valueOffsets:s}=t;if(jn.call(this,i),n.mode===Kb.UnionMode.Sparse)return Km.call(this,t);if(n.mode===Kb.UnionMode.Dense){if(t.offset<=0)return jn.call(this,s),Km.call(this,t);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let u,c,f=-1;++f<r;)(u=i[f])!==void 0&&((c=a[u])===void 0&&(c=a[u]=s[f]),o[f]=s[f]-c,l[u]=((e=l[u])!==null&&e!==void 0?e:0)+1);jn.call(this,o),this.visitMany(t.children.map((u,c)=>{const f=n.typeIds[c],d=a[f],h=l[f];return u.slice(d,Math.min(r,h))}))}}return this}function cF(t){let e;return t.nullCount>=t.length?jn.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?jn.call(this,(0,Hm.truncateBitmap)(t.offset,t.length,e)):jn.call(this,(0,Hm.packBools)(t.values))}function Lr(t){return jn.call(this,t.values.subarray(0,t.length*t.stride))}function Lf(t){const{length:e,values:n,valueOffsets:r}=t,i=(0,qb.bigIntToNumber)(r[0]),s=(0,qb.bigIntToNumber)(r[e]),o=Math.min(s-i,n.byteLength-i);return jn.call(this,(0,JI.rebaseValueOffsets)(-i,e+1,r)),jn.call(this,n.subarray(i,i+o)),this}function Rg(t){const{length:e,valueOffsets:n}=t;if(n){const{[0]:r,[e]:i}=n;return jn.call(this,(0,JI.rebaseValueOffsets)(-r,e+1,n)),this.visit(t.children[0].slice(r,i-r))}return this.visit(t.children[0])}function Km(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}Pe.prototype.visitBool=cF;Pe.prototype.visitInt=Lr;Pe.prototype.visitFloat=Lr;Pe.prototype.visitUtf8=Lf;Pe.prototype.visitLargeUtf8=Lf;Pe.prototype.visitBinary=Lf;Pe.prototype.visitLargeBinary=Lf;Pe.prototype.visitFixedSizeBinary=Lr;Pe.prototype.visitDate=Lr;Pe.prototype.visitTimestamp=Lr;Pe.prototype.visitTime=Lr;Pe.prototype.visitDecimal=Lr;Pe.prototype.visitList=Rg;Pe.prototype.visitStruct=Km;Pe.prototype.visitUnion=uF;Pe.prototype.visitInterval=Lr;Pe.prototype.visitDuration=Lr;Pe.prototype.visitFixedSizeList=Rg;Pe.prototype.visitMap=Rg;var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.JSONTypeAssembler=void 0;const dF=mt,Ve=pn,Ki=Ne;class fF extends dF.Visitor{visit(e){return e==null?void 0:super.visit(e)}visitNull({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitInt({typeId:e,bitWidth:n,isSigned:r}){return{name:Ve.Type[e].toLowerCase(),bitWidth:n,isSigned:r}}visitFloat({typeId:e,precision:n}){return{name:Ve.Type[e].toLowerCase(),precision:Ki.Precision[n]}}visitBinary({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitLargeBinary({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitBool({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitUtf8({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitLargeUtf8({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitDecimal({typeId:e,scale:n,precision:r,bitWidth:i}){return{name:Ve.Type[e].toLowerCase(),scale:n,precision:r,bitWidth:i}}visitDate({typeId:e,unit:n}){return{name:Ve.Type[e].toLowerCase(),unit:Ki.DateUnit[n]}}visitTime({typeId:e,unit:n,bitWidth:r}){return{name:Ve.Type[e].toLowerCase(),unit:Ki.TimeUnit[n],bitWidth:r}}visitTimestamp({typeId:e,timezone:n,unit:r}){return{name:Ve.Type[e].toLowerCase(),unit:Ki.TimeUnit[r],timezone:n}}visitInterval({typeId:e,unit:n}){return{name:Ve.Type[e].toLowerCase(),unit:Ki.IntervalUnit[n]}}visitDuration({typeId:e,unit:n}){return{name:Ve.Type[e].toLocaleLowerCase(),unit:Ki.TimeUnit[n]}}visitList({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitStruct({typeId:e}){return{name:Ve.Type[e].toLowerCase()}}visitUnion({typeId:e,mode:n,typeIds:r}){return{name:Ve.Type[e].toLowerCase(),mode:Ki.UnionMode[n].toUpperCase(),typeIds:[...r]}}visitDictionary(e){return this.visit(e.dictionary)}visitFixedSizeBinary({typeId:e,byteWidth:n}){return{name:Ve.Type[e].toLowerCase(),byteWidth:n}}visitFixedSizeList({typeId:e,listSize:n}){return{name:Ve.Type[e].toLowerCase(),listSize:n}}visitMap({typeId:e,keysSorted:n}){return{name:Ve.Type[e].toLowerCase(),keysSorted:n}}}Uf.JSONTypeAssembler=fF;var xf={};Object.defineProperty(xf,"__esModule",{value:!0});xf.JSONVectorAssembler=void 0;const hF=If,Va=Ut(),pF=mt,mF=Ne,Xh=Ne,fc=Ie,Zh=R;class Cg extends pF.Visitor{static assemble(...e){const n=new Cg;return e.map(({schema:r,data:i})=>n.visitMany(r.fields,i.children))}visit({name:e},n){const{length:r}=n,{offset:i,nullCount:s,nullBitmap:o}=n,a=Zh.DataType.isDictionary(n.type)?n.type.indices:n.type,l=Object.assign([],n.buffers,{[mF.BufferType.VALIDITY]:void 0});return Object.assign({name:e,count:r,VALIDITY:Zh.DataType.isNull(a)||Zh.DataType.isUnion(a)?void 0:s<=0?Array.from({length:r},()=>1):[...new fc.BitIterator(o,i,r,null,fc.getBit)]},super.visit(n.clone(a,i,r,0,l)))}visitNull(){return{}}visitBool({values:e,offset:n,length:r}){return{DATA:[...new fc.BitIterator(e,n,r,null,fc.getBool)]}}visitInt(e){return{DATA:e.type.bitWidth<64?[...e.values]:[...Hr(e.values,2)]}}visitFloat(e){return{DATA:[...e.values]}}visitUtf8(e){return{DATA:[...new Va.Vector([e])],OFFSET:[...e.valueOffsets]}}visitLargeUtf8(e){return{DATA:[...new Va.Vector([e])],OFFSET:[...Hr(e.valueOffsets,2)]}}visitBinary(e){return{DATA:[...ep(new Va.Vector([e]))],OFFSET:[...e.valueOffsets]}}visitLargeBinary(e){return{DATA:[...ep(new Va.Vector([e]))],OFFSET:[...Hr(e.valueOffsets,2)]}}visitFixedSizeBinary(e){return{DATA:[...ep(new Va.Vector([e]))]}}visitDate(e){return{DATA:e.type.unit===Xh.DateUnit.DAY?[...e.values]:[...Hr(e.values,2)]}}visitTimestamp(e){return{DATA:[...Hr(e.values,2)]}}visitTime(e){return{DATA:e.type.unit<Xh.TimeUnit.MICROSECOND?[...e.values]:[...Hr(e.values,2)]}}visitDecimal(e){return{DATA:[...Hr(e.values,4)]}}visitList(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}visitStruct(e){return{children:this.visitMany(e.type.children,e.children)}}visitUnion(e){return{TYPE_ID:[...e.typeIds],OFFSET:e.type.mode===Xh.UnionMode.Dense?[...e.valueOffsets]:void 0,children:this.visitMany(e.type.children,e.children)}}visitInterval(e){return{DATA:[...e.values]}}visitDuration(e){return{DATA:[...Hr(e.values,2)]}}visitFixedSizeList(e){return{children:this.visitMany(e.type.children,e.children)}}visitMap(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}}xf.JSONVectorAssembler=Cg;function*ep(t){for(const e of t)yield e.reduce((n,r)=>`${n}${("0"+(r&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*Hr(t,e){const n=new Uint32Array(t.buffer);for(let r=-1,i=n.length/e;++r<i;)yield`${hF.BN.new(n.subarray((r+0)*e,(r+1)*e),!1)}`}Object.defineProperty(dn,"__esModule",{value:!0});dn.RecordBatchJSONWriter=dn.RecordBatchFileWriter=dn.RecordBatchStreamWriter=dn.RecordBatchWriter=void 0;const Jb=en,qm=Pu(),yF=Ff,gF=Ut(),_F=R,hc=Ba(),tp=Ba(),Ho=Os,Jm=Ne,Gb=Fu,np=jt,Yb=jf,bF=Uf,GI=xf,vF=L,Lc=Fs(),SF=Su,Yn=Ci;class Vf extends SF.ReadableInterop{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new np.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(0,Yn.isObject)(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return(0,Yn.isPromise)(e)?e.then(n=>this.writeAll(n)):(0,Yn.isAsyncIterable)(e)?Ug(this,e):Lg(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof np.AsyncByteQueue?this._sink=e:(this._sink=new np.AsyncByteQueue,e&&(0,Yn.isWritableDOMStream)(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&(0,Yn.isWritableNodeStream)(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!(0,Gb.compareSchemas)(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof qm.Table&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof Lc.RecordBatch&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!(0,Gb.compareSchemas)(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof Lc.RecordBatch?e instanceof Lc._InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(e):e instanceof qm.Table?this.writeAll(e.batches):(0,Yn.isIterable)(e)&&this.writeAll(e)}_writeMessage(e,n=8){const r=n-1,i=hc.Message.encode(e),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return e.headerType===Jm.MessageHeader.RecordBatch?this._recordBatchBlocks.push(new Ho.FileBlock(a,e.bodyLength,this._position)):e.headerType===Jm.MessageHeader.DictionaryBatch&&this._dictionaryBlocks.push(new Ho.FileBlock(a,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(e){if(this._started){const n=(0,vF.toUint8Array)(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(hc.Message.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(yF.MAGIC)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Yb.VectorAssembler.assemble(e),o=new tp.RecordBatch(e.numRows,r,i),a=hc.Message.from(o,n);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,r=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Yb.VectorAssembler.assemble(new gF.Vector([e])),l=new tp.RecordBatch(e.length,s,o),u=new tp.DictionaryBatch(l,n,r),c=hc.Message.from(u,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(e){let n,r,i;for(let s=-1,o=e.length;++s<o;)(n=e[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(e){for(let[n,r]of e.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}dn.RecordBatchWriter=Vf;class Fg extends Vf{static writeAll(e,n){const r=new Fg(n);return(0,Yn.isPromise)(e)?e.then(i=>r.writeAll(i)):(0,Yn.isAsyncIterable)(e)?Ug(r,e):Lg(r,e)}}dn.RecordBatchStreamWriter=Fg;class Pg extends Vf{static writeAll(e){const n=new Pg;return(0,Yn.isPromise)(e)?e.then(r=>n.writeAll(r)):(0,Yn.isAsyncIterable)(e)?Ug(n,e):Lg(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=Ho.Footer.encode(new Ho.Footer(e,Jm.MetadataVersion.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}dn.RecordBatchFileWriter=Pg;class jg extends Vf{static writeAll(e){return new jg().writeAll(e)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}_writeMessage(){return this}_writeFooter(e){return this}_writeSchema(e){return this._write(`{
  "schema": ${JSON.stringify({fields:e.fields.map(n=>YI(n))},null,2)}`)}_writeDictionaries(e){return e.dictionaries.size>0&&this._dictionaries.push(e),this}_writeDictionaryBatch(e,n,r=!1){return this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0)),this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(wF(e,n,r)),this._dictionaryBlocks.push(new Ho.FileBlock(0,0,0)),this}_writeRecordBatch(e){return this._writeDictionaries(e),this._recordBatches.push(e),this}close(){if(this._dictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const e of this._dictionaries)super._writeDictionaries(e);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let e=-1,n=this._recordBatches.length;++e<n;)this._write(e===0?`,
  "batches": [
    `:`,
    `),this._write(TF(this._recordBatches[e])),this._recordBatchBlocks.push(new Ho.FileBlock(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}dn.RecordBatchJSONWriter=jg;function Lg(t,e){let n=e;e instanceof qm.Table&&(n=e.batches,t.reset(void 0,e.schema));for(const r of n)t.write(r);return t.finish()}function Ug(t,e){var n,r,i,s,o,a,l;return Jb.__awaiter(this,void 0,void 0,function*(){try{for(n=!0,r=Jb.__asyncValues(e);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const u=l;t.write(u)}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return t.finish()})}function YI({name:t,type:e,nullable:n}){const r=new bF.JSONTypeAssembler;return{name:t,nullable:n,type:r.visit(e),children:(e.children||[]).map(i=>YI(i)),dictionary:_F.DataType.isDictionary(e)?{id:e.id,isOrdered:e.isOrdered,indexType:r.visit(e.indices)}:void 0}}function wF(t,e,n=!1){const[r]=GI.JSONVectorAssembler.assemble(new Lc.RecordBatch({[e]:t}));return JSON.stringify({id:e,isDelta:n,data:{count:t.length,columns:r}},null,2)}function TF(t){const[e]=GI.JSONVectorAssembler.assemble(t);return JSON.stringify({count:t.numRows,columns:e},null,2)}var zf={};Object.defineProperty(zf,"__esModule",{value:!0});zf.toDOMStream=void 0;const pc=en,QI=L,Qb=Ci;function IF(t,e){if((0,Qb.isAsyncIterable)(t))return BF(t,e);if((0,Qb.isIterable)(t))return OF(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}zf.toDOMStream=IF;function OF(t,e){let n=null;const r=(e==null?void 0:e.type)==="bytes"||!1,i=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(o){s(o,n||(n=t[Symbol.iterator]()))},pull(o){n?s(o,n):o.close()},cancel(){(n!=null&&n.return&&n.return()||!0)&&(n=null)}}),Object.assign({highWaterMark:r?i:void 0},e));function s(o,a){let l,u=null,c=o.desiredSize||null;for(;!(u=a.next(r?c:null)).done;)if(ArrayBuffer.isView(u.value)&&(l=(0,QI.toUint8Array)(u.value))&&(c!=null&&r&&(c=c-l.byteLength+1),u.value=l),o.enqueue(u.value),c!=null&&--c<=0)return;o.close()}}function BF(t,e){let n=null;const r=(e==null?void 0:e.type)==="bytes"||!1,i=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(o){return pc.__awaiter(this,void 0,void 0,function*(){yield s(o,n||(n=t[Symbol.asyncIterator]()))})},pull(o){return pc.__awaiter(this,void 0,void 0,function*(){n?yield s(o,n):o.close()})},cancel(){return pc.__awaiter(this,void 0,void 0,function*(){(n!=null&&n.return&&(yield n.return())||!0)&&(n=null)})}}),Object.assign({highWaterMark:r?i:void 0},e));function s(o,a){return pc.__awaiter(this,void 0,void 0,function*(){let l,u=null,c=o.desiredSize||null;for(;!(u=yield a.next(r?c:null)).done;)if(ArrayBuffer.isView(u.value)&&(l=(0,QI.toUint8Array)(u.value))&&(c!=null&&r&&(c=c-l.byteLength+1),u.value=l),o.enqueue(u.value),c!=null&&--c<=0)return;o.close()})}}var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.BuilderTransform=Wo.builderThroughDOMStream=void 0;const MF=en,kF=Cf();function EF(t){return new XI(t)}Wo.builderThroughDOMStream=EF;class XI{constructor(e){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:n,["writableStrategy"]:r,["queueingStrategy"]:i="count"}=e,s=MF.__rest(e,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=(0,kF.makeBuilder)(s),this._getSize=i!=="bytes"?Xb:Zb;const{["highWaterMark"]:o=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n),{["highWaterMark"]:a=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},r);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:l=>{this._maybeFlush(this._builder,this._controller=l)},start:l=>{this._maybeFlush(this._builder,this._controller=l)}},{highWaterMark:o,size:i!=="bytes"?Xb:Zb}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:l=>this._writeValueAndReturnChunkSize(l)})}_writeValueAndReturnChunkSize(e){const n=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(e)),this._bufferedSize-n}_maybeFlush(e,n){n!=null&&(this._bufferedSize>=n.desiredSize&&++this._numChunks&&this._enqueue(n,e.toVector()),e.finished&&((e.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(n,e.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(n,null)))}_enqueue(e,n){this._bufferedSize=0,this._controller=null,n==null?e.close():e.enqueue(n)}}Wo.BuilderTransform=XI;const Xb=t=>{var e;return(e=t==null?void 0:t.length)!==null&&e!==void 0?e:0},Zb=t=>{var e;return(e=t==null?void 0:t.byteLength)!==null&&e!==void 0?e:0};var $f={};Object.defineProperty($f,"__esModule",{value:!0});$f.recordBatchReaderThroughDOMStream=void 0;const za=en,DF=jt,AF=vt;function NF(t,e){const n=new DF.AsyncByteQueue;let r=null;const i=new ReadableStream({cancel(){return za.__awaiter(this,void 0,void 0,function*(){yield n.close()})},start(a){return za.__awaiter(this,void 0,void 0,function*(){yield o(a,r||(r=yield s()))})},pull(a){return za.__awaiter(this,void 0,void 0,function*(){r?yield o(a,r):a.close()})}});return{writable:new WritableStream(n,Object.assign({highWaterMark:Math.pow(2,14)},t)),readable:i};function s(){return za.__awaiter(this,void 0,void 0,function*(){return yield(yield AF.RecordBatchReader.from(n)).open(e)})}function o(a,l){return za.__awaiter(this,void 0,void 0,function*(){let u=a.desiredSize,c=null;for(;!(c=yield l.next()).done;)if(a.enqueue(c.value),u!=null&&--u<=0)return;a.close()})}}$f.recordBatchReaderThroughDOMStream=NF;var Hf={};Object.defineProperty(Hf,"__esModule",{value:!0});Hf.recordBatchWriterThroughDOMStream=void 0;const mc=en,RF=jt;function CF(t,e){const n=new this(t),r=new RF.AsyncByteStream(n),i=new ReadableStream({cancel(){return mc.__awaiter(this,void 0,void 0,function*(){yield r.cancel()})},pull(o){return mc.__awaiter(this,void 0,void 0,function*(){yield s(o)})},start(o){return mc.__awaiter(this,void 0,void 0,function*(){yield s(o)})}},Object.assign({highWaterMark:Math.pow(2,14)},e));return{writable:new WritableStream(n,t),readable:i};function s(o){return mc.__awaiter(this,void 0,void 0,function*(){let a=null,l=o.desiredSize;for(;a=yield r.read(l||null);)if(o.enqueue(a),l!=null&&(l-=a.byteLength)<=0)return;o.close()})}}Hf.recordBatchWriterThroughDOMStream=CF;var Gm={},Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.tableToIPC=Ko.tableFromIPC=void 0;const ev=Pu(),FF=Ci,PF=vt,tv=dn;function ZI(t){const e=PF.RecordBatchReader.from(t);return(0,FF.isPromise)(e)?e.then(n=>ZI(n)):e.isAsync()?e.readAll().then(n=>new ev.Table(n)):new ev.Table(e.readAll())}Ko.tableFromIPC=ZI;function jF(t,e="stream"){return(e==="stream"?tv.RecordBatchStreamWriter:tv.RecordBatchFileWriter).writeAll(t).toUint8Array(!0)}Ko.tableToIPC=jF;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DenseUnion=t.Union=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.MetadataVersion=t.IntervalUnit=t.UnionMode=t.Precision=t.TimeUnit=t.DateUnit=t.BufferType=t.Type=t.MessageHeader=void 0,t.TimeBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.NullBuilder=t.BoolBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.tableFromJSON=t.vectorFromArray=t.makeBuilder=t.Builder=t.StructRow=t.MapRow=t.Field=t.Schema=t.Visitor=t.makeVector=t.Vector=t.tableFromArrays=t.makeTable=t.Table=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=void 0,t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableFromIPC=t.tableToIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.DenseUnionBuilder=t.SparseUnionBuilder=t.UnionBuilder=t.StructBuilder=t.MapBuilder=t.FixedSizeListBuilder=t.ListBuilder=t.LargeBinaryBuilder=t.BinaryBuilder=t.LargeUtf8Builder=t.Utf8Builder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=void 0;var e=ir;Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return e.MessageHeader}});var n=Ne;Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return n.Type}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return n.BufferType}}),Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return n.DateUnit}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return n.TimeUnit}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return n.Precision}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return n.UnionMode}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return n.IntervalUnit}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return n.MetadataVersion}});var r=Fr();Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return r.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return r.makeData}});var i=R;Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return i.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return i.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return i.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return i.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return i.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return i.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return i.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return i.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return i.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return i.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return i.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return i.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return i.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return i.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return i.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return i.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return i.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return i.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return i.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return i.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return i.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return i.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return i.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return i.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return i.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return i.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return i.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return i.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return i.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return i.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return i.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return i.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return i.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return i.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return i.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return i.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return i.Struct}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return i.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return i.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return i.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return i.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return i.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return i.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return i.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return i.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return i.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return i.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return i.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return i.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return i.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return i.Map_}});var s=Pu();Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return s.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return s.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return s.tableFromArrays}});var o=Ut();Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return o.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return o.makeVector}});var a=mt;Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return a.Visitor}});var l=Ze;Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return l.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return l.Field}});var u=Of();Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return u.MapRow}});var c=vg();Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return c.StructRow}});var f=he;Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return f.Builder}});var d=Cf();Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return d.makeBuilder}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return d.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return d.tableFromJSON}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return d.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return d.builderThroughAsyncIterable}});var h=wu;Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return h.BoolBuilder}});var m=Eu;Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return m.NullBuilder}});var b=Tr;Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return b.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return b.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return b.DateMillisecondBuilder}});var _=Tu;Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return _.DecimalBuilder}});var p=wI();Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return p.DictionaryBuilder}});var g=Iu;Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return g.FixedSizeBinaryBuilder}});var y=Cn;Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return y.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return y.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return y.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return y.Float64Builder}});var S=Le;Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return S.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return S.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return S.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return S.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return S.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return S.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return S.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return S.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return S.Uint64Builder}});var T=Kt;Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return T.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return T.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return T.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return T.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return T.TimeNanosecondBuilder}});var v=Wt;Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return v.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return v.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return v.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return v.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return v.TimestampNanosecondBuilder}});var w=Ir;Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return w.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return w.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return w.IntervalYearMonthBuilder}});var M=Ht;Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return M.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return M.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return M.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return M.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return M.DurationNanosecondBuilder}});var F=Ru;Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return F.Utf8Builder}});var C=Cu;Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return C.LargeUtf8Builder}});var V=Sa;Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return V.BinaryBuilder}});var X=wa;Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return X.LargeBinaryBuilder}});var ve=Mu;Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return ve.ListBuilder}});var Et=Ou;Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return Et.FixedSizeListBuilder}});var ee=ku;Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return ee.MapBuilder}});var ke=Du;Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return ke.StructBuilder}});var ge=Or;Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return ge.UnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return ge.SparseUnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return ge.DenseUnionBuilder}});var U=jt;Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return U.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return U.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return U.AsyncByteQueue}});var K=vt;Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return K.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return K.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return K.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return K.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return K.AsyncRecordBatchStreamReader}});var q=dn;Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return q.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return q.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return q.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return q.RecordBatchJSONWriter}});var de=Ko;Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return de.tableToIPC}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return de.tableFromIPC}});var pe=Ff;Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return pe.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return pe.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return pe.JSONMessageReader}});var xt=Ba();Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return xt.Message}});var lt=Fs();Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return lt.RecordBatch}});const tn=If,gt=Rn,nn=Ie,Ur=Nr,xr=L,xi=Bf(),Vr=Cs,$n=Fu;t.util=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tn),gt),nn),Ur),xr),xi),Vr),{compareSchemas:$n.compareSchemas,compareFields:$n.compareFields,compareTypes:$n.compareTypes})})(Gm);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Union=t.StructRow=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.BufferType=t.UnionMode=t.Type=t.TimeUnit=t.Precision=t.MetadataVersion=t.MessageHeader=t.IntervalUnit=t.DateUnit=void 0,t.LargeBinaryBuilder=t.BinaryBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.makeBuilder=t.Builder=t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableToIPC=t.tableFromIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.tableFromJSON=t.vectorFromArray=t.makeVector=t.Vector=t.Visitor=t.Field=t.Schema=t.tableFromArrays=t.makeTable=t.Table=t.MapRow=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=t.DenseUnion=void 0,t.LargeUtf8Builder=t.Utf8Builder=t.SparseUnionBuilder=t.DenseUnionBuilder=t.UnionBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=t.TimeBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.StructBuilder=t.NullBuilder=t.MapBuilder=t.ListBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeListBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.BoolBuilder=void 0;const e=sa,n=he,r=vt,i=dn,s=zf,o=Wo,a=$f,l=Hf;e.default.toDOMStream=s.toDOMStream,n.Builder.throughDOM=o.builderThroughDOMStream,r.RecordBatchReader.throughDOM=a.recordBatchReaderThroughDOMStream,r.RecordBatchFileReader.throughDOM=a.recordBatchReaderThroughDOMStream,r.RecordBatchStreamReader.throughDOM=a.recordBatchReaderThroughDOMStream,i.RecordBatchWriter.throughDOM=l.recordBatchWriterThroughDOMStream,i.RecordBatchFileWriter.throughDOM=l.recordBatchWriterThroughDOMStream,i.RecordBatchStreamWriter.throughDOM=l.recordBatchWriterThroughDOMStream;var u=Gm;Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return u.DateUnit}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return u.IntervalUnit}}),Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return u.MessageHeader}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return u.MetadataVersion}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return u.Precision}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return u.TimeUnit}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return u.Type}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return u.UnionMode}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return u.BufferType}}),Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return u.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return u.makeData}}),Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return u.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return u.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return u.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return u.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return u.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return u.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return u.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return u.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return u.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return u.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return u.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return u.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return u.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return u.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return u.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return u.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return u.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return u.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return u.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return u.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return u.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return u.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return u.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return u.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return u.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return u.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return u.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return u.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return u.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return u.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return u.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return u.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return u.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return u.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return u.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return u.Struct}}),Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return u.StructRow}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return u.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return u.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return u.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return u.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return u.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return u.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return u.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return u.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return u.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return u.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return u.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return u.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return u.Map_}}),Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return u.MapRow}}),Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return u.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return u.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return u.tableFromArrays}}),Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return u.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return u.Field}}),Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return u.Visitor}}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return u.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return u.makeVector}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return u.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return u.tableFromJSON}}),Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return u.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return u.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return u.AsyncByteQueue}}),Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return u.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return u.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return u.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return u.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return u.AsyncRecordBatchStreamReader}}),Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return u.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return u.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return u.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return u.RecordBatchJSONWriter}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return u.tableFromIPC}}),Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return u.tableToIPC}}),Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return u.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return u.JSONMessageReader}}),Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return u.Message}}),Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return u.RecordBatch}}),Object.defineProperty(t,"util",{enumerable:!0,get:function(){return u.util}}),Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return u.Builder}}),Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return u.makeBuilder}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return u.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return u.builderThroughAsyncIterable}});var c=Gm;Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return c.BinaryBuilder}}),Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return c.LargeBinaryBuilder}}),Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return c.BoolBuilder}}),Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return c.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return c.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return c.DateMillisecondBuilder}}),Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return c.DecimalBuilder}}),Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return c.DictionaryBuilder}}),Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return c.FixedSizeBinaryBuilder}}),Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return c.FixedSizeListBuilder}}),Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return c.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return c.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return c.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return c.Float64Builder}}),Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return c.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return c.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return c.IntervalYearMonthBuilder}}),Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return c.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return c.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return c.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return c.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return c.DurationNanosecondBuilder}}),Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return c.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return c.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return c.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return c.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return c.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return c.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return c.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return c.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return c.Uint64Builder}}),Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return c.ListBuilder}}),Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return c.MapBuilder}}),Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return c.NullBuilder}}),Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return c.StructBuilder}}),Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return c.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return c.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return c.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return c.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return c.TimestampNanosecondBuilder}}),Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return c.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return c.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return c.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return c.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return c.TimeNanosecondBuilder}}),Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return c.UnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return c.DenseUnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return c.SparseUnionBuilder}}),Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return c.Utf8Builder}}),Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return c.LargeUtf8Builder}})})(cf);var LF=Object.create,Wf=Object.defineProperty,UF=Object.getOwnPropertyDescriptor,xF=Object.getOwnPropertyNames,VF=Object.getPrototypeOf,zF=Object.prototype.hasOwnProperty,$F=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),HF=(t,e)=>{for(var n in e)Wf(t,n,{get:e[n],enumerable:!0})},eO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xF(e))!zF.call(t,i)&&i!==n&&Wf(t,i,{get:()=>e[i],enumerable:!(r=UF(e,i))||r.enumerable});return t},xg=(t,e,n)=>(n=t!=null?LF(VF(t)):{},eO(!t||!t.__esModule?Wf(n,"default",{value:t,enumerable:!0}):n,t)),WF=t=>eO(Wf({},"__esModule",{value:!0}),t),KF=$F((t,e)=>{e.exports=Worker}),tO={};HF(tO,{AsyncDuckDB:()=>eP,AsyncDuckDBConnection:()=>uO,AsyncDuckDBDispatcher:()=>tP,AsyncPreparedStatement:()=>cO,AsyncResultStreamIterator:()=>Vg,ConsoleLogger:()=>JF,DuckDBAccessMode:()=>nO,DuckDBDataProtocol:()=>gO,LogEvent:()=>oO,LogLevel:()=>iO,LogOrigin:()=>aO,LogTopic:()=>sO,PACKAGE_NAME:()=>hO,PACKAGE_VERSION:()=>pO,PACKAGE_VERSION_MAJOR:()=>oP,PACKAGE_VERSION_MINOR:()=>aP,PACKAGE_VERSION_PATCH:()=>lP,StatusCode:()=>lO,TokenType:()=>rO,VoidLogger:()=>qF,WorkerRequestType:()=>dO,WorkerResponseType:()=>fO,WorkerTask:()=>ae,createWorker:()=>pP,getJsDelivrBundles:()=>dP,getLogEventLabel:()=>YF,getLogLevelLabel:()=>GF,getLogOriginLabel:()=>XF,getLogTopicLabel:()=>QF,getPlatformFeatures:()=>yO,isFirefox:()=>uP,isNode:()=>Hg,isSafari:()=>cP,selectBundle:()=>fP});var Kf=WF(tO),nO=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(nO||{}),rO=(t=>(t[t.IDENTIFIER=0]="IDENTIFIER",t[t.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",t[t.STRING_CONSTANT=2]="STRING_CONSTANT",t[t.OPERATOR=3]="OPERATOR",t[t.KEYWORD=4]="KEYWORD",t[t.COMMENT=5]="COMMENT",t))(rO||{}),iO=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(iO||{}),sO=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(sO||{}),oO=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(oO||{}),aO=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(aO||{}),qF=class{log(t){}},JF=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}};function GF(t){switch(t){case 0:return"NONE";case 1:return"DEBUG";case 2:return"INFO";case 3:return"WARNING";case 4:return"ERROR";default:return"?"}}function YF(t){switch(t){case 0:return"NONE";case 1:return"OK";case 2:return"ERROR";case 3:return"START";case 4:return"RUN";case 5:return"CAPTURE";default:return"?"}}function QF(t){switch(t){case 1:return"CONNECT";case 2:return"DISCONNECT";case 5:return"INSTANTIATE";case 3:return"OPEN";case 4:return"QUERY";default:return"?"}}function XF(t){switch(t){case 0:return"NONE";case 1:return"WEB WORKER";case 2:return"NODE WORKER";case 3:return"DUCKDB BINDINGS";case 4:return"DUCKDB";default:return"?"}}var lO=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(lO||{}),rs=xg(cf),uO=class{constructor(t,e){this._bindings=t,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.runQuery(this._conn,t),n=rs.RecordBatchReader.from(e);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new rs.Table(n)}async send(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.startPendingQuery(this._conn,t);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let n=new Vg(this._bindings,this._conn,e),r=await rs.RecordBatchReader.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let e=await this._bindings.createPrepared(this._conn,t);return new cO(this._bindings,this._conn,e)}async insertArrowTable(t,e){let n=rs.tableToIPC(t,"stream");await this.insertArrowFromIPCStream(n,e)}async insertArrowFromIPCStream(t,e){await this._bindings.insertArrowFromIPCStream(this._conn,t,e)}async insertCSVFromPath(t,e){await this._bindings.insertCSVFromPath(this._conn,t,e)}async insertJSONFromPath(t,e){await this._bindings.insertJSONFromPath(this._conn,t,e)}},Vg=class{constructor(t,e,n){this.db=t,this.conn=e,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t;return this._inFlight!=null?(t=await this._inFlight,this._inFlight=null):t=await this.db.fetchQueryResults(this.conn),this._depleted=t.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:t}}[Symbol.asyncIterator](){return this}},cO=class{constructor(t,e,n){this.bindings=t,this.connectionId=e,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,t),n=rs.RecordBatchReader.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new rs.Table(n)}async send(...t){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),n=new Vg(this.bindings,this.connectionId,e),r=await rs.RecordBatchReader.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},dO=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(dO||{}),fO=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(fO||{}),ae=class{constructor(t,e){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=e,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}},oe=xg(cf);function Uc(t){switch(t.typeId){case oe.Type.Binary:return{sqlType:"binary"};case oe.Type.Bool:return{sqlType:"bool"};case oe.Type.Date:return{sqlType:"date"};case oe.Type.DateDay:return{sqlType:"date32[d]"};case oe.Type.DateMillisecond:return{sqlType:"date64[ms]"};case oe.Type.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case oe.Type.Float:return{sqlType:"float"};case oe.Type.Float16:return{sqlType:"float16"};case oe.Type.Float32:return{sqlType:"float32"};case oe.Type.Float64:return{sqlType:"float64"};case oe.Type.Int:return{sqlType:"int32"};case oe.Type.Int16:return{sqlType:"int16"};case oe.Type.Int32:return{sqlType:"int32"};case oe.Type.Int64:return{sqlType:"int64"};case oe.Type.Uint16:return{sqlType:"uint16"};case oe.Type.Uint32:return{sqlType:"uint32"};case oe.Type.Uint64:return{sqlType:"uint64"};case oe.Type.Uint8:return{sqlType:"uint8"};case oe.Type.IntervalDayTime:return{sqlType:"interval[dt]"};case oe.Type.IntervalYearMonth:return{sqlType:"interval[m]"};case oe.Type.List:return{sqlType:"list",valueType:Uc(t.valueType)};case oe.Type.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case oe.Type.Null:return{sqlType:"null"};case oe.Type.Utf8:return{sqlType:"utf8"};case oe.Type.Struct:return{sqlType:"struct",fields:t.children.map(e=>Ym(e.name,e.type))};case oe.Type.Map:{let e=t;return{sqlType:"map",keyType:Uc(e.keyType),valueType:Uc(e.valueType)}}case oe.Type.Time:return{sqlType:"time[s]"};case oe.Type.TimeMicrosecond:return{sqlType:"time[us]"};case oe.Type.TimeMillisecond:return{sqlType:"time[ms]"};case oe.Type.TimeNanosecond:return{sqlType:"time[ns]"};case oe.Type.TimeSecond:return{sqlType:"time[s]"};case oe.Type.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case oe.Type.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case oe.Type.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case oe.Type.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case oe.Type.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(t.toString()))}function Ym(t,e){let n=Uc(e);return n.name=t,n}var ZF=new TextEncoder,eP=class{constructor(t,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,n)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,t),this._worker.postMessage({messageId:n,type:t.type,data:t.data},e),await t.promise}onMessage(t){var e;let n=t.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let i=new Error(n.data.message);i.name=n.data.name,(e=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&e.writable&&(i.stack=n.data.stack),r.promiseRejecter(i);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(t){console.error(t),console.error("error in duckdb worker: ".concat(t.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let t=new ae("RESET",null);return await this.postTask(t)}async ping(){let t=new ae("PING",null);await this.postTask(t)}async dropFile(t){let e=new ae("DROP_FILE",t);return await this.postTask(e)}async dropFiles(){let t=new ae("DROP_FILES",null);return await this.postTask(t)}async flushFiles(){let t=new ae("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,e=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new ae("INSTANTIATE",[t,e]);return await this.postTask(r)}async getVersion(){let t=new ae("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new ae("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){let e=new ae("OPEN",t);await this.postTask(e)}async tokenize(t){let e=new ae("TOKENIZE",t);return await this.postTask(e)}async connectInternal(){let t=new ae("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new uO(this,t)}async disconnect(t){let e=new ae("DISCONNECT",t);await this.postTask(e)}async runQuery(t,e){let n=new ae("RUN_QUERY",[t,e]);return await this.postTask(n)}async startPendingQuery(t,e){let n=new ae("START_PENDING_QUERY",[t,e]);return await this.postTask(n)}async pollPendingQuery(t){let e=new ae("POLL_PENDING_QUERY",t);return await this.postTask(e)}async cancelPendingQuery(t){let e=new ae("CANCEL_PENDING_QUERY",t);return await this.postTask(e)}async fetchQueryResults(t){let e=new ae("FETCH_QUERY_RESULTS",t);return await this.postTask(e)}async getTableNames(t,e){let n=new ae("GET_TABLE_NAMES",[t,e]);return await this.postTask(n)}async createPrepared(t,e){let n=new ae("CREATE_PREPARED",[t,e]);return await this.postTask(n)}async closePrepared(t,e){let n=new ae("CLOSE_PREPARED",[t,e]);await this.postTask(n)}async runPrepared(t,e,n){let r=new ae("RUN_PREPARED",[t,e,n]);return await this.postTask(r)}async sendPrepared(t,e,n){let r=new ae("SEND_PREPARED",[t,e,n]);return await this.postTask(r)}async globFiles(t){let e=new ae("GLOB_FILE_INFOS",t);return await this.postTask(e)}async registerFileText(t,e){let n=ZF.encode(e);await this.registerFileBuffer(t,n)}async registerFileURL(t,e,n,r){e===void 0&&(e=t);let i=new ae("REGISTER_FILE_URL",[t,e,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(t){}async registerFileBuffer(t,e){let n=new ae("REGISTER_FILE_BUFFER",[t,e]);await this.postTask(n,[e.buffer])}async registerFileHandle(t,e,n,r){let i=new ae("REGISTER_FILE_HANDLE",[t,e,n,r]);await this.postTask(i,[])}async collectFileStatistics(t,e){let n=new ae("COLLECT_FILE_STATISTICS",[t,e]);await this.postTask(n,[])}async exportFileStatistics(t){let e=new ae("EXPORT_FILE_STATISTICS",t);return await this.postTask(e,[])}async copyFileToBuffer(t){let e=new ae("COPY_FILE_TO_BUFFER",t);return await this.postTask(e)}async copyFileToPath(t,e){let n=new ae("COPY_FILE_TO_PATH",[t,e]);await this.postTask(n)}async insertArrowFromIPCStream(t,e,n){if(e.length==0)return;let r=new ae("INSERT_ARROW_FROM_IPC_STREAM",[t,e,n]);await this.postTask(r,[e.buffer])}async insertCSVFromPath(t,e,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Ym(s,o))}n.columnsFlat=i,delete n.columns}let r=new ae("IMPORT_CSV_FROM_PATH",[t,e,n]);await this.postTask(r)}async insertJSONFromPath(t,e,n){if(n.columns!==void 0){let i=[];for(let s in n.columns){let o=n.columns[s];i.push(Ym(s,o))}n.columnsFlat=i,delete n.columns}let r=new ae("IMPORT_JSON_FROM_PATH",[t,e,n]);await this.postTask(r)}},tP=class{constructor(){this._bindings=null,this._nextMessageId=0}log(t){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:t},[])}sendOK(t){this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"OK",data:null},[])}failWith(t,e){let n={name:e.name,message:e.message,stack:e.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"ERROR",data:n},[])}async onMessage(t){switch(t.type){case"PING":this.sendOK(t);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(t,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(t.data[0],t.data[1],e=>{this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"INSTANTIATE_PROGRESS",data:e},[])}),this.sendOK(t)}catch(e){console.log(e),this._bindings=null,this.failWith(t,e)}return}if(!this._bindings)return this.failWith(t,new Error("duckdb is not initialized"));try{switch(t.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(t);break;case"OPEN":this._bindings.open(t.data),this.sendOK(t);break;case"DROP_FILE":this._bindings.dropFile(t.data),this.sendOK(t);break;case"DROP_FILES":this._bindings.dropFiles(),this.sendOK(t);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(t);break;case"CONNECT":{let e=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"CONNECTION_INFO",data:e.useUnsafe((n,r)=>r)},[]);break}case"DISCONNECT":this._bindings.disconnect(t.data),this.sendOK(t);break;case"CREATE_PREPARED":{let e=this._bindings.createPrepared(t.data[0],t.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"PREPARED_STATEMENT_ID",data:e},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(t.data[0],t.data[1]),this.sendOK(t);break}case"RUN_PREPARED":{let e=this._bindings.runPrepared(t.data[0],t.data[1],t.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT",data:e},[e.buffer]);break}case"RUN_QUERY":{let e=this._bindings.runQuery(t.data[0],t.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT",data:e},[e.buffer]);break}case"SEND_PREPARED":{let e=this._bindings.sendPrepared(t.data[0],t.data[1],t.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT_HEADER",data:e},[e.buffer]);break}case"START_PENDING_QUERY":{let e=this._bindings.startPendingQuery(t.data[0],t.data[1]),n=[];e&&n.push(e.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:e},n);break}case"POLL_PENDING_QUERY":{let e=this._bindings.pollPendingQuery(t.data),n=[];e&&n.push(e.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:e},n);break}case"CANCEL_PENDING_QUERY":{let e=this._bindings.cancelPendingQuery(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"SUCCESS",data:e},[]);break}case"FETCH_QUERY_RESULTS":{let e=this._bindings.fetchQueryResults(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT_CHUNK",data:e},[e.buffer]);break}case"GET_TABLE_NAMES":{let e=this._bindings.getTableNames(t.data[0],t.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"TABLE_NAMES",data:e},[]);break}case"GLOB_FILE_INFOS":{let e=this._bindings.globFiles(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FILE_INFOS",data:e},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(t.data[0],t.data[1],t.data[2],t.data[3]),this.sendOK(t);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(t.data[0],t.data[1]),this.sendOK(t);break;case"REGISTER_FILE_HANDLE":this._bindings.registerFileHandle(t.data[0],t.data[1],t.data[2],t.data[3]),this.sendOK(t);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(t.data[0],t.data[1]),this.sendOK(t);break;case"COPY_FILE_TO_BUFFER":{let e=this._bindings.copyFileToBuffer(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FILE_BUFFER",data:e},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(t.data[0],t.data[1]),this.sendOK(t);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(t.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(t.data[0],t.data[1],t.data[2]),this.sendOK(t);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(t.data[0],t.data[1],t.data[2]),this.sendOK(t);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(t.data[0],t.data[1],t.data[2]),this.sendOK(t);break}case"TOKENIZE":{let e=this._bindings.tokenize(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"SCRIPT_TOKENS",data:e},[]);break}}}catch(e){return console.log(e),this.failWith(t,e)}}},nP=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),rP=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),iP=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),sP=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),zg={name:"@duckdb/duckdb-wasm",version:"1.28.1-dev211.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^15.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.2",eslint:"^8.57.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^22.8.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.7",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-node-blocking.d.ts",import:"./dist/duckdb-node-blocking.mjs",require:"./dist/duckdb-node-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},hO=zg.name,pO=zg.version,$g=zg.version.split("."),oP=$g[0],aP=$g[1],lP=$g[2],Hg=()=>typeof navigator>"u",mO=()=>Hg()?"node":navigator.userAgent,uP=()=>mO().includes("Firefox"),cP=()=>/^((?!chrome|android).)*safari/i.test(mO());function dP(){let t="https://cdn.jsdelivr.net/npm/".concat(hO,"@").concat(pO,"/dist/");return{mvp:{mainModule:"".concat(t,"duckdb-mvp.wasm"),mainWorker:"".concat(t,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(t,"duckdb-eh.wasm"),mainWorker:"".concat(t,"duckdb-browser-eh.worker.js")}}}var rp=null,ip=null,sp=null,op=null,ap=null;async function yO(){return rp==null&&(rp=typeof BigInt64Array<"u"),ip==null&&(ip=await rP()),sp==null&&(sp=await sP()),op==null&&(op=await iP()),ap==null&&(ap=await nP()),{bigInt64Array:rp,crossOriginIsolated:Hg()||globalThis.crossOriginIsolated||!1,wasmExceptions:ip,wasmSIMD:op,wasmThreads:sp,wasmBulkMemory:ap}}async function fP(t){let e=await yO();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}var hP=xg(KF());async function pP(t){let e=new Request(t),n=await fetch(e),r=URL.createObjectURL(await n.blob());return new hP.default(r)}function mP(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}mP();var gO=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(gO||{});function qo(){return qo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qo.apply(this,arguments)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function yP(t,e){try{var n=t()}catch(r){return e(!0,r)}return n&&n.then?n.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var gP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?te.useLayoutEffect:te.useEffect,_P=function(e){var n=te.useRef(e);return gP(function(){n.current=e}),te.useCallback(function(){return n.current},[n])},bP={status:"not-requested",loading:!1,result:void 0,error:void 0},_O={status:"loading",loading:!0,result:void 0,error:void 0},vP=function(e){return _O},SP=function(e,n){return{status:"success",loading:!1,result:e,error:void 0}},wP=function(e,n){return{status:"error",loading:!1,result:void 0,error:e}},nv=function(){},TP={initialState:function(e){return e&&e.executeOnMount?_O:bP},executeOnMount:!0,executeOnUpdate:!0,setLoading:vP,setResult:SP,setError:wP,onSuccess:nv,onError:nv},IP=function(e){return qo({},TP,{},e)},OP=function(e){var n=te.useState(function(){return e.initialState(e)}),r=n[0],i=n[1],s=te.useCallback(function(){return i(e.initialState(e))},[i,e]),o=te.useCallback(function(){return i(e.setLoading(r))},[r,i]),a=te.useCallback(function(c){return i(e.setResult(c,r))},[r,i]),l=te.useCallback(function(c){return i(e.setError(c,r))},[r,i]),u=te.useCallback(function(c){return i(qo({},r,{},c))},[r,i]);return{value:r,set:i,merge:u,reset:s,setLoading:o,setResult:a,setError:l}},BP=function(){var e=te.useRef(!1);return te.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),function(){return e.current}},MP=function(){var e=te.useRef(null);return{set:function(r){return e.current=r},get:function(){return e.current},is:function(r){return e.current===r}}},bO=function(e,n,r){!n&&(n=[]);var i=IP(r),s=te.useState(null),o=s[0],a=s[1],l=OP(i),u=BP(),c=MP(),f=function(p){return u()&&c.is(p)},d=function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];var S=function(){try{return Promise.resolve(e.apply(void 0,g))}catch(T){return Promise.reject(T)}}();return a(g),c.set(S),l.setLoading(),S.then(function(T){f(S)&&l.setResult(T),i.onSuccess(T,{isCurrent:function(){return c.is(S)}})},function(T){f(S)&&l.setError(T),i.onError(T,{isCurrent:function(){return c.is(S)}})}),S},h=_P(d),m=te.useCallback(function(){return h().apply(void 0,arguments)},[h]),b=!u();return te.useEffect(function(){var _=function(){return h().apply(void 0,n)};b&&i.executeOnMount&&_(),!b&&i.executeOnUpdate&&_()},n),qo({},l.value,{set:l.set,merge:l.merge,reset:l.reset,execute:m,currentPromise:c.get(),currentParams:o})};function vO(t,e,n){return bO(t,e,n)}var kP=function(e,n,r){var i=te.useRef(),s=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];try{i.current&&i.current.abort();var c=new AbortController;return i.current=c,Promise.resolve(yP(function(){return Promise.resolve(e.apply(void 0,[c.signal].concat(l)))},function(f,d){if(i.current===c&&(i.current=void 0),f)throw d;return d}))}catch(f){return Promise.reject(f)}};return vO(s,n,r)},EP=function(e,n){return bO(e,[],qo({},n,{executeOnMount:!1,executeOnUpdate:!1}))};const DP=Object.freeze(Object.defineProperty({__proto__:null,useAsync:vO,useAsyncAbortable:kP,useAsyncCallback:EP},Symbol.toStringTag,{value:"Module"})),SO=wy(DP);var rv={},Wg=Object.defineProperty,AP=Object.getOwnPropertyDescriptor,NP=Object.getOwnPropertyNames,RP=Object.prototype.hasOwnProperty,CP=(t,e)=>{for(var n in e)Wg(t,n,{get:e[n],enumerable:!0})},FP=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of NP(e))!RP.call(t,i)&&i!==n&&Wg(t,i,{get:()=>e[i],enumerable:!(r=AP(e,i))||r.enumerable});return t},PP=t=>FP(Wg({},"__esModule",{value:!0}),t),wO={};CP(wO,{AssertionError:()=>MO,Environment:()=>TO,HttpError:()=>UP,addLogger:()=>JP,assertError:()=>kO,assertTrue:()=>xP,formatElapsedTime:()=>NO,getEnvironment:()=>Kg,isArray:()=>zP,isBrowser:()=>BO,isDebug:()=>OO,isDevelopment:()=>IO,isModKey:()=>WP,isNotNull:()=>HP,isProduction:()=>jP,isRecord:()=>$P,isServer:()=>LP,isString:()=>VP,isValidUrl:()=>ZP,logElapsedTime:()=>XP,logError:()=>GP,modKey:()=>KP,normalizeUrl:()=>ej});var qf=PP(wO),TO=(t=>(t.Production="production",t.Development="development",t))(TO||{}),Kg=()=>{switch("production"){case"development":return"development";case"production":return"production";default:throw new Error("Unknown environment")}},IO=()=>Kg()==="development",jP=()=>Kg()==="production",OO=()=>IO()&&(rv.NEXT_PUBLIC_DEBUG==="true"||rv.DEBUG==="true"),BO=()=>typeof window<"u",LP=()=>!BO(),UP=class extends Error{constructor(t,e=500,n){super(t),this.status=e,this.headers=n}},MO=class extends Error{};function kO(t){throw new MO(t)}function xP(t,e){t||kO(e)}var VP=t=>typeof t=="string",zP=t=>Array.isArray(t),$P=t=>typeof t=="object"&&t!==null&&!Array.isArray(t),HP=t=>t!==null,qg=typeof navigator=="object"?navigator.platform:"",EO=qg==="Win32",DO=qg.startsWith("Mac"),AO=qg==="Linux",WP=t=>DO?t.metaKey:EO||AO?t.ctrlKey:!1,KP=t=>{if(DO)return`${t}`;if(EO||AO)return`Ctrl+${t}`},qP=(t,e)=>{OO()&&(e?(console.error(t),console.error(e)):console.error(t))},Qm=[qP],JP=t=>{Qm.includes(t)||Qm.push(t)},GP=(t,e)=>{Qm.forEach(n=>{n(t,e)})},YP="\x1B[31m",QP="\x1B[0m",NO=(t,e,n=void 0)=>{const i=(n??performance.now())-e;let s;switch(!0){case i>=1e3:s=`${(i/1e3).toFixed(1)}s`;break;case i>=1:s=`${i.toFixed(0)}ms`;break;default:s=`${i.toFixed(3)}ms`;break}return`${YP}[${s}] ${QP}${t}`},XP=(t,e,n=void 0)=>{console.debug(NO(t,e,n))},ZP=t=>{try{return new URL(t),!0}catch{return!1}},ej=t=>{!t.startsWith("http://")&&!t.startsWith("https://")&&(t="http://"+t);try{const e=new URL(t);return e.pathname=e.pathname.replace(/\/+$/,""),e.toString()}catch{return null}},tj=Object.create,Jf=Object.defineProperty,nj=Object.getOwnPropertyDescriptor,rj=Object.getOwnPropertyNames,ij=Object.getPrototypeOf,sj=Object.prototype.hasOwnProperty,oj=(t,e)=>{for(var n in e)Jf(t,n,{get:e[n],enumerable:!0})},RO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of rj(e))!sj.call(t,i)&&i!==n&&Jf(t,i,{get:()=>e[i],enumerable:!(r=nj(e,i))||r.enumerable});return t},CO=(t,e,n)=>(n=t!=null?tj(ij(t)):{},RO(!t||!t.__esModule?Jf(n,"default",{value:t,enumerable:!0}):n,t)),aj=t=>RO(Jf({},"__esModule",{value:!0}),t),je=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),FO={};oj(FO,{ARROW_MIME_TYPE:()=>xO,AsyncDuckDB:()=>uj.AsyncDuckDB,CSV_MIME_TYPE:()=>$O,InsertFileError:()=>Jo,PARQUET_MIME_TYPE:()=>HO,arrayBufferToArrow:()=>Gg,arrowToArrayBuffer:()=>zO,arrowToJSON:()=>Sj,cardinalities:()=>bj,drop:()=>_j,exportArrow:()=>wj,exportCsv:()=>Tj,exportParquet:()=>Ij,getDuckDB:()=>jO,getTempFilename:()=>ju,initializeDuckDb:()=>PO,insertArrow:()=>ey,insertArrowTable:()=>KO,insertCSV:()=>Zm,insertFile:()=>Ej,insertParquet:()=>ty,isArrow:()=>vj,isArrowFile:()=>VO,isParquetFile:()=>WO,runQuery:()=>vn,useDuckDb:()=>LO,useDuckDbQuery:()=>yj});var lj=aj(FO),uj=Kf,cj=SO,yc=CO(Kf),dj=Kf,fj=qf,Ad,pl;function PO(t){return je(this,null,function*(){const{debug:e=!1,config:n}=t||{};return Ad=e,pl===void 0&&(pl=hj(n)),pl})}var hj=t=>je(void 0,null,function*(){const e=performance.now(),n=yc.getJsDelivrBundles(),r=yield yc.selectBundle(n),i=URL.createObjectURL(new Blob([`importScripts("${r.mainWorker}");`],{type:"text/javascript"})),s=new Worker(i),o=Ad?new yc.ConsoleLogger:new yc.VoidLogger,a=new dj.AsyncDuckDB(o,s);if(yield a.instantiate(r.mainModule,r.pthreadWorker),URL.revokeObjectURL(i),t){if(t.path){const u=yield(yield fetch(t.path)).arrayBuffer(),c=t.path.match(/[^/]*$/);c&&(t.path=c[0]),yield a.registerFileBuffer(t.path,new Uint8Array(u))}yield a.open(t)}return Ad&&((0,fj.logElapsedTime)("DuckDB initialized",e),t&&console.debug(`DuckDbConfig: ${JSON.stringify(t,null,2)}`)),a}),jO=()=>je(void 0,null,function*(){return pl||(yield PO())}),LO=()=>{const{result:t,loading:e,error:n}=(0,cj.useAsync)(()=>je(void 0,null,function*(){return yield jO()}),[]);return{db:t,loading:e,error:n}},pj=SO,mj=qf,vn=(t,e)=>je(void 0,null,function*(){const n=performance.now(),r=yield t.connect(),i=yield r.query(e);return yield r.close(),Ad&&(0,mj.logElapsedTime)(`Run query: ${e}`,n),i}),yj=t=>{const{db:e}=LO(),{result:n,loading:r,error:i}=(0,pj.useAsync)(()=>je(void 0,null,function*(){return!e||!t?void 0:yield vn(e,t)}),[e,t]);return{arrow:n,loading:r,error:i}},Xm=qf,gj=(t,e)=>je(void 0,null,function*(){const n=yield vn(t,`select table_type from information_schema.tables where table_name = '${e}'`);if(n.numRows===1){const r=n.get(0),i=r==null?void 0:r.toArray()[0];switch(i){case"BASE TABLE":return"Table";case"VIEW":return"View";default:throw new Xm.AssertionError(`Unexpected table type: ${i}`)}}else return}),_j=(t,e)=>je(void 0,null,function*(){const n=yield gj(t,e);n==="Table"?yield vn(t,`drop table if exists "${e}"`):n==="View"&&(yield vn(t,`drop view if exists "${e}"`))}),UO=(t,e)=>je(void 0,null,function*(){const n=yield vn(t,`select column_name, data_type from information_schema.columns where table_name = '${e}'`),r=new Map;for(let i=0;i<n.numRows;i++){const s=n.get(i);if(s){const[o,a]=s.toArray();r.set(o,a)}}return r}),bj=(t,e)=>je(void 0,null,function*(){const n=yield UO(t,e),r=Array.from(n.keys()),s=(yield vn(t,`select count(distinct columns(*)) from "${e}"`)).get(0);if(!s)throw new Xm.AssertionError(`Expected a single row of cardinalities: ${e}`);const o=s.toArray();if(o.length!==r.length)throw new Xm.AssertionError(`Unexpected length mismatch: ${e}`);const a={};for(let l=0;l<r.length;l++)a[r[l]]=o[l];return a}),ju=()=>{const t=Date.now().toString(),e=Math.random().toString(36).substring(2);return`file-${t}-${e}`},Jg=cf,xO="application/vnd.apache.arrow.file",vj=t=>t instanceof Jg.Table,VO=t=>je(void 0,null,function*(){try{const e=yield t.arrayBuffer();return Gg(e),!0}catch{}return!1}),Gg=t=>(0,Jg.tableFromIPC)(new Uint8Array(t)),zO=t=>(0,Jg.tableToIPC)(t,"file").buffer;function Sj(t){const e=[];for(let n=0;n<t.numRows;n++){const r=t.get(n);r&&e.push(r.toJSON())}return e}var $O="text/csv",HO="application/vnd.apache.parquet",WO=t=>je(void 0,null,function*(){return(yield t.slice(0,4).text()).startsWith("PAR1")}),wj=(t,e,n)=>je(void 0,null,function*(){n=n||Yg(e,"arrow");const r=yield vn(t,`SELECT * FROM '${e}'`),i=zO(r);return new File([i],n,{type:xO})}),Tj=(t,e,n,r=",")=>je(void 0,null,function*(){n=n||Yg(e,"csv");const i=ju();yield vn(t,`COPY '${e}' TO '${i}' WITH (HEADER 1, DELIMITER '${r}')`);const s=yield t.copyFileToBuffer(i);return yield t.dropFile(i),new File([s],n,{type:$O})}),Ij=(t,e,n,r="zstd")=>je(void 0,null,function*(){n=n||Yg(e,"parquet");const i=ju();yield vn(t,`COPY '${e}' TO '${i}' (FORMAT PARQUET, COMPRESSION ${r})`);const s=yield t.copyFileToBuffer(i);return yield t.dropFile(i),new File([s],n,{type:HO})}),Oj=(t,e)=>{const n=t.split("."),r=n.length>1?n.pop():"",i=n.join(".");return e.includes(r)?i:t},Yg=(t,e)=>Oj(t,["arrow","csv","parquet"])+"."+e,Bj=CO(Kf),Mj=qf,kj=(t,e)=>je(void 0,null,function*(){const n=yield UO(t,e),r=Array.from(n.keys());for(let i=0;i<r.length;i++){const s=r[i];s.toLowerCase().includes("year")&&(yield vn(t,`ALTER TABLE "${e}" ALTER COLUMN "${s}" SET DATA TYPE VARCHAR`))}}),Jo=class extends Error{constructor(t,e){super(e),this.title=t,this.name="InsertFileError"}},Ej=(t,e,n,r=!1)=>je(void 0,null,function*(){const i=performance.now();yield Dj(t,e,n),r&&(0,Mj.logElapsedTime)(`Imported ${e.name}`,i)}),Dj=(t,e,n)=>je(void 0,null,function*(){try{if(n=n||e.name,yield WO(e)){yield ty(t,e,n);return}if(yield VO(e)){yield ey(t,e,n);return}switch(e.name.toLowerCase().split(".").at(-1)){case"arrow":yield ey(t,e,n);return;case"parquet":yield ty(t,e,n);return;case"csv":yield Zm(t,e,n);return}return yield Zm(t,e,n)}catch(r){throw console.error(r),r instanceof Jo?r:new Jo("Invalid file type","Only CSV, Parquet, or Arrow files are supported")}}),Zm=(t,e,n)=>je(void 0,null,function*(){try{const r=yield e.text(),i=ju();yield t.registerFileText(i,r);const s=yield t.connect();yield s.insertCSVFromPath(i,{name:n,schema:"main",detect:!0}),yield s.close(),t.dropFile(i),yield kj(t,n)}catch(r){throw console.error(r),e.type==="text/csv"||e.name.toLowerCase().endsWith(".csv")?new Jo("CSV import failed","Sorry, we couldn't import that CSV. Please try again."):r}}),ey=(t,e,n)=>je(void 0,null,function*(){try{const r=yield e.arrayBuffer(),i=Gg(r);yield KO(t,i,n)}catch(r){throw console.error(r),new Jo("Arrow import failed","Sorry, we couldn't import that file")}}),KO=(t,e,n)=>je(void 0,null,function*(){const r=yield t.connect();yield r.insertArrowTable(e,{name:n}),yield r.close()}),ty=(t,e,n)=>je(void 0,null,function*(){try{const r=ju()+".parquet";yield t.registerFileHandle(r,e,Bj.DuckDBDataProtocol.BROWSER_FILEREADER,!0),yield vn(t,`CREATE TABLE '${n}' AS SELECT * FROM '${r}'`),yield t.dropFile(r)}catch(r){throw console.error(r),new Jo("Parquet import failed","Sorry, we couldn't import that file")}});function nt(t){this.content=t}nt.prototype={constructor:nt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new nt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new nt(n)},addToStart:function(t,e){return new nt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new nt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new nt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=nt.from(t),t.size?new nt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=nt.from(t),t.size?new nt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=nt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};nt.from=function(t){if(t instanceof nt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new nt(e)};function qO(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=qO(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function JO(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let u=0,c=Math.min(o.text.length,a.text.length);for(;u<c&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let u=JO(o.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class P{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new P(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new P(r,i)}cutByIndex(e,n){return e==n?P.empty:e==0&&n==this.content.length?this:new P(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new P(i,s)}addToStart(e){return new P([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new P(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return qO(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return JO(this,e,n,r)}findIndex(e,n=-1){if(e==0)return gc(0,e);if(e==this.size)return gc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?gc(r+1,o):gc(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return P.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new P(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return P.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new P(n||e,r)}static from(e){if(!e)return P.empty;if(e instanceof P)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new P([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}P.empty=new P([],0);const lp={index:0,offset:0};function gc(t,e){return lp.index=t,lp.offset=e,lp}function Nd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Nd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Nd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ye=class ny{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Nd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ny.none;if(e instanceof ny)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ye.none=[];class Rd extends Error{}class z{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=YO(this.content,e+this.openStart,n);return r&&new z(r,this.openStart,this.openEnd)}removeBetween(e,n){return new z(GO(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return z.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new z(P.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new z(e,r,i)}}z.empty=new z(P.empty,0,0);function GO(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(GO(s.content,e-i-1,n-i-1)))}function YO(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=YO(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function Aj(t,e,n){if(n.openStart>t.depth)throw new Rd("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Rd("Inconsistent open depths");return QO(t,e,n,0)}function QO(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=QO(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return fs(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Nj(n,t);return fs(s,ZO(t,o,a,e,r))}else return fs(s,Cd(t,e,r))}function XO(t,e){if(!e.type.compatibleContent(t.type))throw new Rd("Cannot join "+e.type.name+" onto "+t.type.name)}function ry(t,e,n){let r=t.node(n);return XO(r,e.node(n)),r}function ds(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ml(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(ds(t.nodeAfter,r),s++));for(let a=s;a<o;a++)ds(i.child(a),r);e&&e.depth==n&&e.textOffset&&ds(e.nodeBefore,r)}function fs(t,e){return t.type.checkContent(e),t.copy(e)}function ZO(t,e,n,r,i){let s=t.depth>i&&ry(t,e,i+1),o=r.depth>i&&ry(n,r,i+1),a=[];return ml(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(XO(s,o),ds(fs(s,ZO(t,e,n,r,i+1)),a)):(s&&ds(fs(s,Cd(t,e,i+1)),a),ml(e,n,i,a),o&&ds(fs(o,Cd(n,r,i+1)),a)),ml(r,null,i,a),new P(a)}function Cd(t,e,n){let r=[];if(ml(null,t,n,r),t.depth>n){let i=ry(t,e,n+1);ds(fs(i,Cd(t,e,n+1)),r)}return ml(e,null,n,r),new P(r)}function Nj(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(P.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class $l{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ye.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Fd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(r.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new $l(n,r,s)}static resolveCached(e,n){for(let i=0;i<up.length;i++){let s=up[i];if(s.pos==n&&s.doc==e)return s}let r=up[cp]=$l.resolve(e,n);return cp=(cp+1)%Rj,r}}let up=[],cp=0,Rj=12;class Fd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Cj=Object.create(null);let hs=class iy{constructor(e,n,r,i=ye.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||P.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Nd(this.attrs,n||e.defaultAttrs||Cj)&&ye.sameSet(this.marks,r||ye.none)}copy(e=null){return e==this.content?this:new iy(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new iy(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return z.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new z(u,i.depth-o,s.depth-o)}replace(e,n,r){return Aj(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return $l.resolveCached(this,e)}resolveNoCache(e){return $l.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),eB(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=P.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ye.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!ye.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=P.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};hs.prototype.text=void 0;class Pd extends hs{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):eB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Pd(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Pd(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function eB(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ks{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Fj(e,n);if(r.next==null)return ks.empty;let i=tB(r);r.next&&r.err("Unexpected trailing text");let s=zj(Vj(i));return $j(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return P.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:f}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=s(f,a.concat(c));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ks.empty=new ks(!0);class Fj{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function tB(t){let e=[];do e.push(Pj(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Pj(t){let e=[];do e.push(jj(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function jj(t){let e=xj(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Lj(t,e);else break;return e}function iv(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Lj(t,e){let n=iv(t),r=n;return t.eat(",")&&(t.next!="}"?r=iv(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Uj(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function xj(t){if(t.eat("(")){let e=tB(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Uj(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Vj(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let c=n();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let c=n();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function nB(t,e){return e-t}function sv(t,e){let n=[];return r(e),n.sort(nB);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function zj(t){let e=Object.create(null);return n(sv(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);sv(t,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let s=e[r.join(",")]=new ks(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(nB);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function $j(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function rB(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function iB(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function sB(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Hj(t[n]);return e}let ov=class oB{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=sB(r.attrs),this.defaultAttrs=rB(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ks.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:iB(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new hs(this,this.computeAttrs(e),P.from(n),ye.setFrom(r))}createChecked(e=null,n,r){return n=P.from(n),this.checkContent(n),new hs(this,this.computeAttrs(e),n,ye.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=P.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(P.empty,!0);return s?new hs(this,e,n.append(s),ye.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ye.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new oB(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class Hj{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Gf{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=sB(i.attrs),this.excluded=null;let s=rB(this.attrs);this.instance=s?new ye(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ye(this,iB(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Gf(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class Wj{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=nt.from(e.nodes),n.marks=nt.from(e.marks||{}),this.nodes=ov.compile(this.spec.nodes,this),this.marks=Gf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ks.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?av(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:av(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ov){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Pd(r,r.defaultAttrs,e,ye.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return hs.fromJSON(this,e)}markFromJSON(e){return ye.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function av(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Kj(t){return t.tag!=null}function qj(t){return t.style!=null}class Go{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{Kj(r)?this.tags.push(r):qj(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new uv(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new uv(this,n,!0);return r.addAll(e,n.from,n.to),z.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Yj(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=cv(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=cv(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Go(e,Go.schemaRules(e)))}}const aB={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Jj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lB={ol:!0,ul:!0},jd=1,Ld=2,yl=4;function lv(t,e,n){return e!=null?(e?jd:0)|(e==="full"?Ld:0):t&&t.whitespace=="pre"?jd|Ld:n&~yl}class _c{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=ye.none,this.stashMarks=[],this.match=o||(a&yl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(P.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&jd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=P.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(P.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):Qj(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!aB.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class uv{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=lv(null,n.preserveWhitespace,0)|(r?yl:0);i?s=new _c(i.type,i.attrs,ye.none,ye.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new _c(null,null,ye.none,ye.none,!0,null,o):s=new _c(e.schema.topNodeType,null,ye.none,ye.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.style;if(!r||!r.length)return n();let i=this.readStyles(e.style);if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Ld||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&jd)r.options&Ld?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;lB.hasOwnProperty(r)&&this.parser.normalizeLists&&Gj(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:Jj.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(aB.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ye.none,r=ye.none;for(let i=0,s=e.length;i<s;i++){let o=e.item(i);for(let a=void 0;;){let l=this.parser.matchStyle(o,e.getPropertyValue(o),this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(u=>{l.clearMark(u)&&(r=u.addToSet(r))}):n=this.parser.schema.marks[l.mark].create(l.attrs).addToSet(n),l.consuming===!1)a=l;else break}}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=lv(e,i,s.options);s.options&yl&&s.content.length==0&&(o|=yl),this.nodes.push(new _c(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=Xj(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function Gj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&lB.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Yj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function cv(t){let e={};for(let n in t)e[n]=t[n];return e}function Qj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}function Xj(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class er{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=dp(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],c=this.serializeMark(u,o.isInline,n);c&&(s.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=er.renderSpec(dp(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&er.renderSpec(dp(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(let c in l)if(l[c]!=null){let f=c.indexOf(" ");f>0?a.setAttributeNS(c.slice(0,f),c.slice(f+1),l[c]):a.setAttribute(c,l[c])}}for(let c=u;c<n.length;c++){let f=n[c];if(f===0){if(c<n.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:h}=er.renderSpec(e,f,r);if(a.appendChild(d),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new er(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=dv(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return dv(e.marks)}}function dv(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function dp(t){return t.document||window.document}const uB=65535,cB=Math.pow(2,16);function Zj(t,e){return t+e*cB}function fv(t){return t&uB}function eL(t){return(t-(t&uB))/cB}const dB=1,fB=2,xc=4,hB=8;class sy{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&hB)>0}get deletedBefore(){return(this.delInfo&(dB|xc))>0}get deletedAfter(){return(this.delInfo&(fB|xc))>0}get deletedAcross(){return(this.delInfo&xc)>0}}class qt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&qt.empty)return qt.empty}recover(e){let n=0,r=fv(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+eL(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],c=this.ranges[a+o],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:n:n,h=l+i+(d<0?0:c);if(r)return h;let m=e==(n<0?l:f)?null:Zj(a/3,e-l),b=e==l?fB:e==f?dB:xc;return(n<0?e!=l:e!=f)&&(b|=hB),new sy(h,b,m)}i+=c-u}return r?e+i:new sy(e+i,0,null)}touches(e,n){let r=0,i=fv(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+s],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+n],c=this.ranges[i+r];e(a,a+u,l,l+c),s+=c-u}}invert(){return new qt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?qt.empty:new qt(e<0?[0,-e,0]:[0,0,e])}}qt.empty=new qt([]);class ko{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new ko(this.maps,this.mirror,e,n)}copy(){return new ko(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new ko;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new sy(e,i,null)}}const fp=Object.create(null);class yt{getMap(){return qt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=fp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in fp)throw new RangeError("Duplicate use of step JSON ID "+e);return fp[e]=n,n.prototype.jsonID=e,n}}class $e{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new $e(e,null)}static fail(e){return new $e(null,e)}static fromReplace(e,n,r,i){try{return $e.ok(e.replace(n,r,i))}catch(s){if(s instanceof Rd)return $e.fail(s.message);throw s}}}function Qg(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Qg(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return P.fromArray(r)}class di extends yt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new z(Qg(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return $e.fromReplace(e,this.from,this.to,s)}invert(){return new tr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new di(n.pos,r.pos,this.mark)}merge(e){return e instanceof di&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new di(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new di(n.from,n.to,e.markFromJSON(n.mark))}}yt.jsonID("addMark",di);class tr extends yt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new z(Qg(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return $e.fromReplace(e,this.from,this.to,r)}invert(){return new di(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new tr(n.pos,r.pos,this.mark)}merge(e){return e instanceof tr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new tr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new tr(n.from,n.to,e.markFromJSON(n.mark))}}yt.jsonID("removeMark",tr);class fi extends yt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return $e.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return $e.fromReplace(e,this.pos,this.pos+1,new z(P.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new fi(this.pos,n.marks[i]);return new fi(this.pos,this.mark)}}return new Yo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new fi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new fi(n.pos,e.markFromJSON(n.mark))}}yt.jsonID("addNodeMark",fi);class Yo extends yt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return $e.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return $e.fromReplace(e,this.pos,this.pos+1,new z(P.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new fi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Yo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yo(n.pos,e.markFromJSON(n.mark))}}yt.jsonID("removeNodeMark",Yo);class Ge extends yt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&oy(e,this.from,this.to)?$e.fail("Structure replace would overwrite content"):$e.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new qt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ge(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ge(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ge)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?z.empty:new z(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ge(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?z.empty:new z(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ge(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ge(n.from,n.to,z.fromJSON(e,n.slice),!!n.structure)}}yt.jsonID("replace",Ge);class Qe extends yt{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(oy(e,this.from,this.gapFrom)||oy(e,this.gapTo,this.to)))return $e.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return $e.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?$e.fromReplace(e,this.from,this.to,r):$e.fail("Content does not fit in gap")}getMap(){return new qt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Qe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Qe(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Qe(n.from,n.to,n.gapFrom,n.gapTo,z.fromJSON(e,n.slice),n.insert,!!n.structure)}}yt.jsonID("replaceAround",Qe);function oy(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function tL(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),h=Math.min(u+l.nodeSize,n),m=r.addToSet(f);for(let b=0;b<f.length;b++)f[b].isInSet(m)||(o&&o.to==d&&o.mark.eq(f[b])?o.to=h:i.push(o=new tr(d,h,f[b])));a&&a.to==d?a.to=h:s.push(a=new di(d,h,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function nL(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Gf){let u=o.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let f=l[c],d;for(let h=0;h<i.length;h++){let m=i[h];m.step==s-1&&f.eq(i[h].style)&&(d=m)}d?(d.to=u,d.step=s):i.push({style:f,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>t.step(new tr(o.from,o.to,o.style)))}function pB(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),c=a+u.nodeSize,f=r.matchType(u.type);if(!f)o.push(new Ge(a,c,z.empty));else{r=f;for(let d=0;d<u.marks.length;d++)n.allowsMarkType(u.marks[d].type)||t.step(new tr(a,c,u.marks[d]));if(i&&u.isText&&n.whitespace!="pre"){let d,h=/\r?\n|\r/g,m;for(;d=h.exec(u.text);)m||(m=new z(P.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new Ge(a+d.index,a+d.index+d[0].length,m))}}a=c}if(!r.validEnd){let l=r.fillBefore(P.empty,!0);t.replace(a,a,new z(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function rL(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ma(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!rL(i,s,o))break}return null}function iL(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,u=a,c=P.empty,f=0;for(let m=s,b=!1;m>n;m--)b||r.index(m)>0?(b=!0,c=P.from(r.node(m).copy(c)),f++):l--;let d=P.empty,h=0;for(let m=s,b=!1;m>n;m--)b||i.after(m+1)<i.end(m)?(b=!0,d=P.from(i.node(m).copy(d)),h++):u++;t.step(new Qe(l,u,o,a,new z(c.append(d),f,h),c.size-f,!0))}function Xg(t,e,n=null,r=t){let i=sL(t,e),s=i&&oL(r,e);return s?i.map(hv).concat({type:e,attrs:n}).concat(s.map(hv)):null}function hv(t){return{type:t,attrs:null}}function sL(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function oL(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:o}function aL(t,e,n){let r=P.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=P.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Qe(i,s,i,s,new z(r,0,0),n.length,!0))}function lL(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&dL(t.doc,t.mapping.slice(s).map(a),r)){let l=null;if(r.schema.linebreakReplacement){let d=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);d&&!h?l=!1:!d&&h&&(l=!0)}l===!1&&cL(t,o,a,s),pB(t,t.mapping.slice(s).map(a,1),r,void 0,l===null);let u=t.mapping.slice(s),c=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new Qe(c,f,c+1,f-1,new z(P.from(r.create(i,null,o.marks)),0,0),1,!0)),l===!0&&uL(t,o,a,s),!1}})}function uL(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function cL(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function dL(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function fL(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Qe(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new z(P.from(o),0,0),1,!0))}function Eo(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>s;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),m=r&&r[c+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let b=r&&r[c]||f;if(!f.canReplace(d+1,f.childCount)||!b.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function hL(t,e,n=1,r){let i=t.doc.resolve(e),s=P.empty,o=P.empty;for(let a=i.depth,l=i.depth-n,u=n-1;a>l;a--,u--){s=P.from(i.node(a).copy(s));let c=r&&r[u];o=P.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}t.step(new Ge(e,e,new z(s.append(o),n,n),!0))}function Pi(t,e){let n=t.resolve(e),r=n.index();return mB(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function mB(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Yf(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&mB(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function pL(t,e,n){let r=new Ge(e-n,e+n,z.empty,!0);t.step(r)}function mL(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function yB(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),u=r.node(o),c=!1;if(s==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Qf(t,e,n=e,r=z.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return gB(i,s,r)?new Ge(e,n,r):new yL(i,s,r).fit()}function gB(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class yL{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=P.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=P.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new z(s,o,a);return e>-1?new Qe(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ge(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=hp(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,f=null;if(n==1&&(o?u.matchType(o.type)||(f=u.fillBefore(P.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:f};if(n==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=hp(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new z(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=hp(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new z(nl(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new z(nl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)c.push(i.child(b));f=f.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let b=a.child(u),_=f.matchType(b.type);if(!_)break;u++,(u>1||l==0||b.content.size)&&(f=_,c.push(_B(b.mark(d.allowedMarks(b.marks)),u==1?l:0,u==a.childCount?h:-1)))}let m=u==a.childCount;m||(h=-1),this.placed=rl(this.placed,n,P.from(c)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,_=a;b<h;b++){let p=_.lastChild;this.frontier.push({type:p.type,match:p.contentMatchAt(p.childCount)}),_=p.content}this.unplaced=m?e==0?z.empty:new z(nl(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new z(nl(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!pp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=pp(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=pp(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=rl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=rl(this.placed,this.depth,P.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(P.empty,!0);n.childCount&&(this.placed=rl(this.placed,this.frontier.length,n))}}function nl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(nl(t.firstChild.content,e-1,n)))}function rl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(rl(t.lastChild.content,e-1,n)))}function hp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function _B(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,_B(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(P.empty,!0)))),t.copy(r)}function pp(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!gL(n,s.content,o)?a:null}function gL(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function _L(t){return t.spec.defining||t.spec.definingForContent}function bL(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(gB(i,s,r))return t.step(new Ge(e,n,r));let o=vB(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let m=i.node(d).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==h&&o.splice(1,0,-d)}let l=o.indexOf(a),u=[],c=r.openStart;for(let d=r.content,h=0;;h++){let m=d.firstChild;if(u.push(m),h==r.openStart)break;d=m.content}for(let d=c-1;d>=0;d--){let h=u[d],m=_L(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=d;else if(m||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+c+1)%(r.openStart+1),m=u[h];if(m)for(let b=0;b<o.length;b++){let _=o[(b+l)%o.length],p=!0;_<0&&(p=!1,_=-_);let g=i.node(_-1),y=i.index(_-1);if(g.canReplaceWith(y,y,m.type,m.marks))return t.replace(i.before(_),p?s.after(_):n,new z(bB(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=o[d];h<0||(e=i.before(h),n=s.after(h))}}function bB(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(bB(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(P.empty,!0))}return t}function vL(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=mL(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new z(P.from(r),0,0))}function SL(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=vB(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function vB(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Do extends yt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return $e.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return $e.fromReplace(e,this.pos,this.pos+1,new z(P.from(i),0,n.isLeaf?0:1))}getMap(){return qt.empty}invert(e){return new Do(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Do(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Do(n.pos,n.attr,n.value)}}yt.jsonID("attr",Do);class Hl extends yt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return $e.ok(r)}getMap(){return qt.empty}invert(e){return new Hl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Hl(n.attr,n.value)}}yt.jsonID("docAttr",Hl);let Qo=class extends Error{};Qo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Qo.prototype=Object.create(Error.prototype);Qo.prototype.constructor=Qo;Qo.prototype.name="TransformError";class wL{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ko}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Qo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=z.empty){let i=Qf(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new z(P.from(r),0,0))}delete(e,n){return this.replace(e,n,z.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return bL(this,e,n,r),this}replaceRangeWith(e,n,r){return vL(this,e,n,r),this}deleteRange(e,n){return SL(this,e,n),this}lift(e,n){return iL(this,e,n),this}join(e,n=1){return pL(this,e,n),this}wrap(e,n){return aL(this,e,n),this}setBlockType(e,n=e,r,i=null){return lL(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return fL(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Do(e,n,r)),this}setDocAttribute(e,n){return this.step(new Hl(e,n)),this}addNodeMark(e,n){return this.step(new fi(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ye)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Yo(e,n)),this}split(e,n=1,r){return hL(this,e,n,r),this}addMark(e,n,r){return tL(this,e,n,r),this}removeMark(e,n,r){return nL(this,e,n,r),this}clearIncompatible(e,n,r){return pB(this,e,n,r),this}}const mp=Object.create(null);class re{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new TL(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=z.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],c=e.mapping.slice(s);e.replaceRange(c.map(l.pos),c.map(u.pos),a?z.empty:n),a==0&&yv(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),u=l.map(o.pos),c=l.map(a.pos);s?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),yv(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Z(e):eo(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?eo(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):eo(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ln(e.node(0))}static atStart(e){return eo(e,e,0,0,1)||new Ln(e)}static atEnd(e){return eo(e,e,e.content.size,e.childCount,-1)||new Ln(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=mp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in mp)throw new RangeError("Duplicate use of selection JSON ID "+e);return mp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Z.between(this.$anchor,this.$head).getBookmark()}}re.prototype.visible=!0;class TL{constructor(e,n){this.$from=e,this.$to=n}}let pv=!1;function mv(t){!pv&&!t.parent.inlineContent&&(pv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Z extends re{constructor(e,n=e){mv(e),mv(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return re.near(r);let i=e.resolve(n.map(this.anchor));return new Z(i.parent.inlineContent?i:r,r)}replace(e,n=z.empty){if(super.replace(e,n),n==z.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Z&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Xf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Z(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=re.findFrom(n,r,!0)||re.findFrom(n,-r,!0);if(s)n=s.$head;else return re.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(re.findFrom(e,-r,!0)||re.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Z(e,n)}}re.jsonID("text",Z);class Xf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Xf(e.map(this.anchor),e.map(this.head))}resolve(e){return Z.between(e.resolve(this.anchor),e.resolve(this.head))}}class G extends re{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?re.near(s):new G(s)}content(){return new z(P.from(this.node),0,0)}eq(e){return e instanceof G&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zg(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new G(e.resolve(n.anchor))}static create(e,n){return new G(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}G.prototype.visible=!1;re.jsonID("node",G);class Zg{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Xf(r,r):new Zg(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&G.isSelectable(r)?new G(n):re.near(n)}}class Ln extends re{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=z.empty){if(n==z.empty){e.delete(0,e.doc.content.size);let r=re.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ln(e)}map(e){return new Ln(e)}eq(e){return e instanceof Ln}getBookmark(){return IL}}re.jsonID("all",Ln);const IL={map(){return this},resolve(t){return new Ln(t)}};function eo(t,e,n,r,i,s=!1){if(e.inlineContent)return Z.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&G.isSelectable(a))return G.create(t,n-(i<0?a.nodeSize:0))}else{let l=eo(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function yv(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ge||i instanceof Qe))return;let s=t.mapping.maps[r],o;s.forEach((a,l,u,c)=>{o==null&&(o=c)}),t.setSelection(re.near(t.doc.resolve(o),n))}const gv=1,bc=2,_v=4;class OL extends wL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|gv)&~bc,this.storedMarks=null,this}get selectionSet(){return(this.updated&gv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=bc,this}ensureMarks(e){return ye.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&bc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~bc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ye.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(re.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_v,this}get scrolledIntoView(){return(this.updated&_v)>0}}function bv(t,e){return!e||!t?t:t.bind(e)}class il{constructor(e,n,r){this.name=e,this.init=bv(n.init,r),this.apply=bv(n.apply,r)}}const BL=[new il("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new il("selection",{init(t,e){return t.selection||re.atStart(e.doc)},apply(t){return t.selection}}),new il("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new il("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class yp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=BL.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new il(r.key,r.spec.state,r))})}}class bo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new bo(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new OL(this)}static create(e){let n=new yp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new bo(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new yp(this.schema,e.plugins),r=n.fields,i=new bo(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new yp(e.schema,e.plugins),s=new bo(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=hs.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=re.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=u.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function SB(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=SB(i,e,{})),n[r]=i}return n}class wn{constructor(e){this.spec=e,this.props={},e.props&&SB(e.props,this,this.props),this.key=e.key?e.key.key:wB("plugin")}getState(e){return e[this.key]}}const gp=Object.create(null);function wB(t){return t in gp?t+"$"+ ++gp[t]:(gp[t]=0,t+"$")}class ji{constructor(e="key"){this.key=wB(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const rt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Wl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let ay=null;const gr=function(t,e,n){let r=ay||(ay=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},ML=function(){ay=null},Es=function(t,e,n,r){return n&&(vv(t,e,n,r,-1)||vv(t,e,n,r,1))},kL=/^(img|br|input|textarea|hr)$/i;function vv(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Zn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Lu(t)||kL.test(t.nodeName)||t.contentEditable=="false")return!1;e=rt(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Zn(t):0}else return!1}}function Zn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function EL(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Zn(t)}else if(t.parentNode&&!Lu(t))e=rt(t),t=t.parentNode;else return null}}function DL(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Lu(t))e=rt(t)+1,t=t.parentNode;else return null}}function AL(t,e,n){for(let r=e==0,i=e==Zn(t);r||i;){if(t==n)return!0;let s=rt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Zn(t)}}function Lu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Zf=function(t){return t.focusNode&&Es(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Xi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function NL(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function RL(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const sr=typeof navigator<"u"?navigator:null,Sv=typeof document<"u"?document:null,Li=sr&&sr.userAgent||"",ly=/Edge\/(\d+)/.exec(Li),TB=/MSIE \d/.exec(Li),uy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Li),Lt=!!(TB||uy||ly),Ti=TB?document.documentMode:uy?+uy[1]:ly?+ly[1]:0,Vn=!Lt&&/gecko\/(\d+)/i.test(Li);Vn&&+(/Firefox\/(\d+)/.exec(Li)||[0,0])[1];const cy=!Lt&&/Chrome\/(\d+)/.exec(Li),St=!!cy,CL=cy?+cy[1]:0,Tt=!Lt&&!!sr&&/Apple Computer/.test(sr.vendor),Xo=Tt&&(/Mobile\/\w+/.test(Li)||!!sr&&sr.maxTouchPoints>2),an=Xo||(sr?/Mac/.test(sr.platform):!1),FL=sr?/Win/.test(sr.platform):!1,Dn=/Android \d/.test(Li),Uu=!!Sv&&"webkitFontSmoothing"in Sv.documentElement.style,PL=Uu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function jL(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function pr(t,e){return typeof t=="number"?t:t[e]}function LL(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function wv(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Wl(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,u=l?jL(s):LL(a),c=0,f=0;if(e.top<u.top+pr(r,"top")?f=-(u.top-e.top+pr(i,"top")):e.bottom>u.bottom-pr(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+pr(i,"top")-u.top:e.bottom-u.bottom+pr(i,"bottom")),e.left<u.left+pr(r,"left")?c=-(u.left-e.left+pr(i,"left")):e.right>u.right-pr(r,"right")&&(c=e.right-u.right+pr(i,"right")),c||f)if(l)s.defaultView.scrollBy(c,f);else{let d=a.scrollLeft,h=a.scrollTop;f&&(a.scrollTop+=f),c&&(a.scrollLeft+=c);let m=a.scrollLeft-d,b=a.scrollTop-h;e={left:e.left-m,top:e.top-b,right:e.right-m,bottom:e.bottom-b}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function UL(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:IB(t.dom)}}function IB(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Wl(r));return e}function xL({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;OB(n,r==0?0:r-e)}function OB(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ks=null;function VL(t){if(t.setActive)return t.setActive();if(Ks)return t.focus(Ks);let e=IB(t);t.focus(Ks==null?{get preventScroll(){return Ks={preventScroll:!0},!0}}:void 0),Ks||(Ks=!1,OB(e,0))}function BB(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,u;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=gr(c).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let b=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(b<r){n=c,r=b,i=b&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,c.nodeType==1&&b&&(s=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=c,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=f+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?zL(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:BB(n,i)}function zL(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=qr(r,1);if(s.top!=s.bottom&&e_(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function e_(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function $L(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function HL(t,e,n){let{node:r,offset:i}=BB(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function WL(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function MB(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(e_(e,u))return MB(o,e,u)}}if((s=(s+1)%r)==i)break}return t}function KL(t,e){let n=t.dom.ownerDocument,r,i=0,s=RL(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!e_(e,u)||(o=MB(t.dom,e,u),!o))return null}if(Tt)for(let u=o;r&&u;u=Wl(u))u.draggable&&(r=void 0);if(o=$L(o,e),r){if(Vn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;Uu&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=WL(t,r,i,e))}a==null&&(a=HL(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Tv(t){return t.top<t.bottom||t.left<t.right}function qr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Tv(r))return r}return Array.prototype.find.call(n,Tv)||t.getBoundingClientRect()}const qL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function kB(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Uu||Vn;if(r.nodeType==3)if(o&&(qL.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=qr(gr(r,i,i),n);if(Vn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=qr(gr(r,i-1,i-1),-1);if(u.top==l.top){let c=qr(gr(r,i,i+1),-1);if(c.top!=l.top)return $a(c,c.left<u.left)}}return l}else{let l=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:u++,$a(qr(gr(r,l,u),c),c<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Zn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return _p(l.getBoundingClientRect(),!1)}if(s==null&&i<Zn(r)){let l=r.childNodes[i];if(l.nodeType==1)return _p(l.getBoundingClientRect(),!0)}return _p(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Zn(r))){let l=r.childNodes[i-1],u=l.nodeType==3?gr(l,Zn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return $a(qr(u,1),!1)}if(s==null&&i<Zn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?gr(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return $a(qr(u,-1),!0)}return $a(qr(r.nodeType==3?gr(r):r,-n),n>=0)}function $a(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function _p(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function EB(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function JL(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return EB(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=kB(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=gr(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const GL=/[\u0590-\u08ac]/;function YL(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!GL.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:EB(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:b}=t.domSelectionRange(),_=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==b;try{a.collapse(c,f),l&&(l!=c||u!=f)&&a.extend&&a.extend(l,u)}catch{}return d!=null&&(a.caretBidiLevel=d),_})}let Iv=null,Ov=null,Bv=!1;function QL(t,e,n){return Iv==e&&Ov==n?Bv:(Iv=e,Ov=n,Bv=n=="up"||n=="down"?JL(t,e,n):YL(t,e,n))}const yn=0,Mv=1,is=2,or=3;class xu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=yn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>rt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof AB){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof DB&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?rt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?rt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let c=o+l.border;if(e>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=o;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=rt(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>n||a==this.children.length-1)){n=u;for(let c=a+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=rt(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,h=0;d<this.children.length;d++){let m=this.children[d],b=h+m.size;if(s>h&&o<b)return m.setSelection(e-h-m.border,n-h-m.border,r,i);h=b}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),u=r.getSelection(),c=!1;if((Vn||Tt)&&e==n){let{node:d,offset:h}=a;if(d.nodeType==3){if(c=!!(h&&d.nodeValue[h-1]==`
`),c&&h==d.nodeValue.length)for(let m=d,b;m;m=m.parentNode){if(b=m.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:rt(b)+1});break}let _=m.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let m=d.childNodes[h-1];c=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Vn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&Tt)&&Es(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Es(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==n)&&!c){u.collapse(a.node,a.offset);try{e!=n&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let h=a;a=l,l=h}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?is:Mv,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=or:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?is:or}r=o}this.dirty=is}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?is:Mv;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class DB extends xu{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==yn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class XL extends xu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ds extends xu{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=er.renderSpec(document,n.type.spec.toDOM(n,r))),new Ds(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&or||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=or&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=yn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=yn}}slice(e,n,r){let i=Ds.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=hy(s,n,o,r)),e>0&&(s=hy(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class Ii extends xu{constructor(e,n,r,i,s,o,a,l,u){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,u=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=er.renderSpec(document,n.type.spec.toDOM(n)));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let d=c;return c=CB(c,r,n),u?l=new ZL(e,n,r,i,c,f||null,d,u,s,o+1):n.isText?new eh(e,n,r,i,c,d,s):new Ii(e,n,r,i,c,f||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>P.empty)}return e}matchesNode(e,n,r){return this.dirty==yn&&e.eq(this.node)&&fy(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new t2(this,o&&o.node,e);i2(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?ye.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,f,d)=>{l.syncToMarks(u.marks,r,e);let h;l.findNodeMatch(u,c,f,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,c,f,h,e)||l.updateNextNode(u,c,f,e,d,i)||l.addNode(u,c,f,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==is)&&(o&&this.protectLocalComposition(e,o),NB(this.contentDOM,this.children,e),Xo&&s2(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Z)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=o2(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new XL(this,s,n,i);e.input.compositionNodes.push(o),this.children=hy(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==or||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=yn}updateOuterDeco(e){if(fy(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=RB(this.dom,this.nodeDOM,dy(this.outerDeco,this.node,n),dy(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function kv(t,e,n,r,i){CB(r,e,t);let s=new Ii(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class eh extends Ii{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==or||this.dirty!=yn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=yn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=yn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new eh(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=or)}get domAtom(){return!1}isText(e){return this.node.text==e}}class AB extends xu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==yn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ZL extends Ii{constructor(e,n,r,i,s,o,a,l,u,c){super(e,n,r,i,s,o,a,u,c),this.spec=l}update(e,n,r,i){if(this.dirty==or)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function NB(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=Ev(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof Ds){let l=r?r.previousSibling:t.lastChild;NB(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Ev(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const gl=function(t){t&&(this.nodeName=t)};gl.prototype=Object.create(null);const ss=[new gl];function dy(t,e,n){if(t.length==0)return ss;let r=n?ss[0]:new gl,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new gl(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new gl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function RB(t,e,n,r){if(n==ss&&r==ss)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=ss[0]),i=l}e2(i,a||ss[0],o)}return i}function e2(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function CB(t,e,n){return RB(t,t,ss,dy(e,n,t.nodeType!=1))}function fy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ev(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class t2{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=n2(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=yn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ds.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==or&&o.dom==o.contentDOM&&(o.dirty=is),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ii){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let c=l.dom,f,d=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=or&&fy(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=is,f.updateChildren(i,o+1),f.dirty=yn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Ii.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Ii.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new DB(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Ds;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof eh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Tt||St)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new AB(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function n2(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof Ds)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function r2(t,e){return t.type.side-e.type.side}function i2(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(s,c),u),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let c,f;for(;o<i.length&&i[o].to==s;){let _=i[o++];_.widget&&(c?(f||(f=[c])).push(_):c=_)}if(c)if(f){f.sort(r2);for(let _=0;_<f.length;_++)n(f[_],u,!!l)}else n(c,u,!!l);let d,h;if(l)h=-1,d=l,l=null;else if(u<t.childCount)h=u,d=t.child(u++);else break;for(let _=0;_<a.length;_++)a[_].to<=s&&a.splice(_--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+d.nodeSize;if(d.isText){let _=m;o<i.length&&i[o].from<_&&(_=i[o].from);for(let p=0;p<a.length;p++)a[p].to<_&&(_=a[p].to);_<m&&(l=d.cut(_-s),d=d.cut(0,_-s),m=_,h=-1)}else for(;o<i.length&&i[o].to<m;)o++;let b=d.isInline&&!d.isLeaf?a.filter(_=>!_.inline):a.slice();r(d,b,e.forChild(s,d),h),s=m}}function s2(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function o2(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=n)return a+u;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function hy(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,c=a+=l.size;u>=n||c<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,r)),i&&(s.push(i),i=void 0),c>n&&s.push(l.slice(n-u,l.size,r)))}return s}function t_(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,u;if(Zf(n)){for(l=a;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&G.isSelectable(c)&&i.parent&&!(c.isInline&&AL(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new G(o==f?a:r.resolve(f))}}else{let c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null;l=r.resolve(c)}if(!u){let c=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;u=n_(t,l,a,c)}return u}function FB(t){return t.editable?t.hasFocus():jB(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Mr(t,e=!1){let n=t.state.selection;if(PB(t,n),!!FB(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&St){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Es(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)l2(t);else{let{anchor:r,head:i}=n,s,o;Dv&&!(n instanceof Z)&&(n.$from.parent.inlineContent||(s=Av(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Av(t,n.to))),t.docView.setSelection(r,i,t.root,e),Dv&&(s&&Nv(s),o&&Nv(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&a2(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Dv=Tt||St&&CL<63;function Av(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Tt&&i&&i.contentEditable=="false")return bp(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return bp(i);if(s)return bp(s)}}function bp(t){return t.contentEditable="true",Tt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Nv(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function a2(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!FB(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function l2(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,rt(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Lt&&Ti<=11&&(r.disabled=!0,r.disabled=!1)}function PB(t,e){if(e instanceof G){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Rv(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Rv(t)}function Rv(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function n_(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Z.between(e,n,r)}function Cv(t){return t.editable&&!t.hasFocus()?!1:jB(t)}function jB(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function u2(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Es(e.node,e.offset,n.anchorNode,n.anchorOffset)}function py(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&re.findFrom(s,e)}function ii(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Fv(t,e,n){let r=t.state.selection;if(r instanceof Z)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ii(t,new Z(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=py(t.state,e);return i&&i instanceof G?ii(t,i):!1}else if(!(an&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?G.isSelectable(s)?ii(t,new G(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Uu?ii(t,new Z(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof G&&r.node.isInline)return ii(t,new Z(e>0?r.$to:r.$from));{let i=py(t.state,e);return i?ii(t,i):!1}}}function Ud(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function _l(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function qs(t,e){return e<0?c2(t):d2(t)}function c2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Vn&&n.nodeType==1&&r<Ud(n)&&_l(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(_l(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(LB(n))break;{let a=n.previousSibling;for(;a&&_l(a,-1);)i=n.parentNode,s=rt(a),a=a.previousSibling;if(a)n=a,r=Ud(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?my(t,n,r):i&&my(t,i,s)}function d2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Ud(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(_l(a,1))s=n,o=++r;else break}else{if(LB(n))break;{let a=n.nextSibling;for(;a&&_l(a,1);)s=a.parentNode,o=rt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Ud(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&my(t,s,o)}function LB(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function f2(t,e){for(;t&&e==t.childNodes.length&&!Lu(t);)e=rt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function h2(t,e){for(;t&&!e&&!Lu(t);)e=rt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function my(t,e,n){if(e.nodeType!=3){let s,o;(o=f2(e,n))?(e=o,n=0):(s=h2(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(Zf(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Mr(t)},50)}function Pv(t,e){let n=t.state.doc.resolve(e);if(!(St||FL)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function jv(t,e,n){let r=t.state.selection;if(r instanceof Z&&!r.empty||n.indexOf("s")>-1||an&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=py(t.state,e);if(o&&o instanceof G)return ii(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Ln?re.near(o,e):re.findFrom(o,e);return a?ii(t,a):!1}return!1}function Lv(t,e){if(!(t.state.selection instanceof Z))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Uv(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function p2(t){if(!Tt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Uv(t,r,"true"),setTimeout(()=>Uv(t,r,"false"),20)}return!1}function m2(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function y2(t,e){let n=e.keyCode,r=m2(e);if(n==8||an&&n==72&&r=="c")return Lv(t,-1)||qs(t,-1);if(n==46&&!e.shiftKey||an&&n==68&&r=="c")return Lv(t,1)||qs(t,1);if(n==13||n==27)return!0;if(n==37||an&&n==66&&r=="c"){let i=n==37?Pv(t,t.state.selection.from)=="ltr"?-1:1:-1;return Fv(t,i,r)||qs(t,i)}else if(n==39||an&&n==70&&r=="c"){let i=n==39?Pv(t,t.state.selection.from)=="ltr"?1:-1:1;return Fv(t,i,r)||qs(t,i)}else{if(n==38||an&&n==80&&r=="c")return jv(t,-1,r)||qs(t,-1);if(n==40||an&&n==78&&r=="c")return p2(t)||jv(t,1,r)||qs(t,1);if(r==(an?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function UB(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||er.fromSchema(t.state.schema),a=WB(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let u=l.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=HB[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let m=a.createElement(c[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}function xB(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new z(P.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):z.empty;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)a=f;else{let d=i.marks(),{schema:h}=t.state,m=er.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let _=o.appendChild(document.createElement("p"));b&&_.appendChild(m.serializeNode(h.text(b,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),o=b2(n),Uu&&v2(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Go.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!g2.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)a=S2(xv(a,+c[1],+c[2]),c[4]);else if(a=z.maxOpen(_2(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;d<a.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);a=xv(a,f,d)}return t.someProp("transformPasted",f=>{a=f(a,t)}),a}const g2=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _2(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&zB(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=$B(o[o.length-1],s.length));let c=VB(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return P.from(o)}return t}function VB(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,P.from(t));return t}function zB(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=zB(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(P.from(VB(n,t,i+1))))}}function $B(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,$B(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(P.empty,!0);return t.copy(n.append(r))}function yy(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=yy(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(P.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function xv(t,e,n){return e<t.openStart&&(t=new z(yy(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new z(yy(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const HB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Vv=null;function WB(){return Vv||(Vv=document.implementation.createHTMLDocument("title"))}function b2(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=WB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&HB[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function v2(t){let e=t.querySelectorAll(St?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function S2(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=P.from(l.create(r[a+1],i)),s++,o++}return new z(i,s,o)}const It={},Ot={},w2={touchstart:!0,touchmove:!0};class T2{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function I2(t){for(let e in It){let n=It[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{B2(t,r)&&!r_(t,r)&&(t.editable||!(r.type in Ot))&&n(t,r)},w2[e]?{passive:!0}:void 0)}Tt&&t.dom.addEventListener("input",()=>null),gy(t)}function hi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function O2(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function gy(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>r_(t,r))})}function r_(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function B2(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function M2(t,e){!r_(t,e)&&It[e.type]&&(t.editable||!(e.type in Ot))&&It[e.type](t,e)}Ot.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!qB(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Dn&&St&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Xo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Xi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||y2(t,n)?n.preventDefault():hi(t,"key")};Ot.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ot.keypress=(t,e)=>{let n=e;if(qB(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||an&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Z)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function th(t){return{left:t.clientX,top:t.clientY}}function k2(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function i_(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Ao(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function E2(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&G.isSelectable(r)?(Ao(t,new G(n)),!0):!1}function D2(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof G&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(G.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Ao(t,G.create(t.state.doc,i)),!0):!1}function A2(t,e,n,r,i){return i_(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?D2(t,n):E2(t,n))}function N2(t,e,n,r){return i_(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function R2(t,e,n,r){return i_(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||C2(t,n,r)}function C2(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ao(t,Z.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Ao(t,Z.create(r,a+1,a+1+o.content.size));else if(G.isSelectable(o))Ao(t,G.create(r,a));else continue;return!0}}function s_(t){return xd(t)}const KB=an?"metaKey":"ctrlKey";It.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=s_(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&k2(n,t.input.lastClick)&&!n[KB]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(th(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new F2(t,o,n,!!r)):(s=="doubleClick"?N2:R2)(t,o.pos,o.inside,n)?n.preventDefault():hi(t,"pointer"))};class F2{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[KB],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let c=e.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof G&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Vn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),hi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Mr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(th(e))),this.updateAllowDefault(e),this.allowDefault||!n?hi(this.view,"pointer"):A2(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Tt&&this.mightDrag&&!this.mightDrag.node.isAtom||St&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ao(this.view,re.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):hi(this.view,"pointer")}move(e){this.updateAllowDefault(e),hi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}It.touchstart=t=>{t.input.lastTouch=Date.now(),s_(t),hi(t,"pointer")};It.touchmove=t=>{t.input.lastTouch=Date.now(),hi(t,"pointer")};It.contextmenu=t=>s_(t);function qB(t,e){return t.composing?!0:Tt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const P2=Dn?5e3:-1;Ot.compositionstart=Ot.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),xd(t,!0),t.markCursor=null;else if(xd(t),Vn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}JB(t,P2)};Ot.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,JB(t,20))};function JB(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>xd(t),e))}function GB(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=L2());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function j2(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=EL(e.focusNode,e.focusOffset),r=DL(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function L2(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function xd(t,e=!1){if(!(Dn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),GB(t),e||t.docView&&t.docView.dirty){let n=t_(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function U2(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Kl=Lt&&Ti<15||Xo&&PL<604;It.copy=Ot.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Kl?null:n.clipboardData,o=r.content(),{dom:a,text:l}=UB(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):U2(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function x2(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function V2(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ql(t,r.value,null,i,e):ql(t,r.textContent,r.innerHTML,i,e)},50)}function ql(t,e,n,r,i){let s=xB(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||z.empty)))return!0;if(!s)return!1;let o=x2(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function YB(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ot.paste=(t,e)=>{let n=e;if(t.composing&&!Dn)return;let r=Kl?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ql(t,YB(r),r.getData("text/html"),i,n)?n.preventDefault():V2(t,n)};class QB{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const XB=an?"altKey":"ctrlKey";It.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(th(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof G?i.to-1:i.to))){if(r&&r.mightDrag)o=G.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=G.create(t.state.doc,f.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:c}=UB(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(Kl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Kl||n.dataTransfer.setData("text/plain",u),t.dragging=new QB(c,!n[XB],o)};It.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ot.dragover=Ot.dragenter=(t,e)=>e.preventDefault();Ot.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(th(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",m=>{o=m(o,t)}):o=xB(t,YB(n.dataTransfer),Kl?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[XB]);if(t.someProp("handleDrop",m=>m(t,n,o||z.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?yB(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let u=t.state.tr;if(a){let{node:m}=r;m?m.replace(u):u.deleteSelection()}let c=u.mapping.map(l),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),u.doc.eq(d))return;let h=u.doc.resolve(c);if(f&&G.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new G(h));else{let m=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((b,_,p,g)=>m=g),u.setSelection(n_(t,h,u.doc.resolve(m)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};It.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Mr(t)},20))};It.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};It.beforeinput=(t,e)=>{if(St&&Dn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Xi(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ot)It[t]=Ot[t];function Jl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Vd{constructor(e,n){this.toDOM=e,this.spec=n||ps,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new fn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Vd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Jl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Oi{constructor(e,n){this.attrs=e,this.spec=n||ps}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new fn(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Oi&&Jl(this.attrs,e.attrs)&&Jl(this.spec,e.spec)}static is(e){return e.type instanceof Oi}destroy(){}}class o_{constructor(e,n){this.attrs=e,this.spec=n||ps}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new fn(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof o_&&Jl(this.attrs,e.attrs)&&Jl(this.spec,e.spec)}destroy(){}}class fn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new fn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new fn(e,e,new Vd(n,r))}static inline(e,n,r,i){return new fn(e,n,new Oi(r,i))}static node(e,n,r,i){return new fn(e,n,new o_(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Oi}get widget(){return this.type instanceof Vd}}const to=[],ps={};class We{constructor(e,n){this.local=e.length?e:to,this.children=n.length?n:to}static create(e,n){return n.length?zd(n,e,0,ps):dt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==dt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ps)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?z2(this.children,o||[],e,n,r,i,s):o?new We(o.sort(ms),to):dt}add(e,n){return n.length?this==dt?We.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let u=l+r,c;if(c=eM(n,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,u+1):i.splice(s,0,l,l+a.nodeSize,zd(c,a,u+1,ps)),s+=3}});let o=ZB(s?tM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new We(o.length?this.local.concat(o).sort(ms):this.local,i||this.children)}remove(e){return e.length==0||this==dt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>a&&f.to<l&&(e[c]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,a+1);u!=dt?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new We(i,r):dt}forChild(e,n){if(this==dt)return this;if(n.isLeaf)return We.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Oi){let u=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new We(i.sort(ms),to);return r?new li([a,r]):a}return r||dt}eq(e){if(this==e)return!0;if(!(e instanceof We)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return a_(this.localsInner(e))}localsInner(e){if(this==dt)return to;if(e.inlineContent||!this.local.some(Oi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Oi||n.push(this.local[r]);return n}}We.empty=new We([],[]);We.removeOverlap=a_;const dt=We.empty;class li{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ps));return li.from(r)}forChild(e,n){if(n.isLeaf)return We.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=dt&&(s instanceof li?r=r.concat(s.members):r.push(s))}return li.from(r)}eq(e){if(!(e instanceof li)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?a_(r?n:n.sort(ms)):to}static from(e){switch(e.length){case 0:return dt;case 1:return e[0];default:return new li(e.every(n=>n instanceof We)?e:e.reduce((n,r)=>n.concat(r instanceof We?r:r.members),[]))}}}function z2(t,e,n,r,i,s,o){let a=t.slice();for(let u=0,c=s;u<n.maps.length;u++){let f=0;n.maps[u].forEach((d,h,m,b)=>{let _=b-m-(h-d);for(let p=0;p<a.length;p+=3){let g=a[p+1];if(g<0||d>g+c-f)continue;let y=a[p]+c-f;h>=y?a[p+1]=d<=y?-2:-1:d>=c&&_&&(a[p]+=_,a[p+1]+=_)}f+=_}),c=n.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=n.map(t[u]+s),f=c-i;if(f<0||f>=r.content.size){l=!0;continue}let d=n.map(t[u+1]+s,-1),h=d-i,{index:m,offset:b}=r.content.findIndex(f),_=r.maybeChild(m);if(_&&b==f&&b+_.nodeSize==h){let p=a[u+2].mapInner(n,_,c+1,t[u]+s+1,o);p!=dt?(a[u]=f,a[u+1]=h,a[u+2]=p):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=$2(a,t,e,n,i,s,o),c=zd(u,r,0,o);e=c.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let h=c.children[f];for(;d<a.length&&a[d]<h;)d+=3;a.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new We(e.sort(ms),a)}function ZB(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new fn(i.from+e,i.to+e,i.type))}return n}function $2(t,e,n,r,i,s,o){function a(l,u){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,i,u);f?n.push(f):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function eM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function tM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function zd(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let u=eM(t,a,l+n);if(u){s=!0;let c=zd(u,a,n+l+1,r);c!=dt&&i.push(l,l+a.nodeSize,c)}});let o=ZB(s?tM(t):t,-n).sort(ms);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new We(o,i):dt}function ms(t,e){return t.from-e.from||t.to-e.to}function a_(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),zv(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),zv(e,i,r.copy(s.from,r.to)));break}}}return e}function zv(t,e,n){for(;e<t.length&&ms(n,t[e])>0;)e++;t.splice(e,0,n)}function vp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=dt&&e.push(r)}),t.cursorWrapper&&e.push(We.create(t.state.doc,[t.cursorWrapper.deco])),li.from(e)}const H2={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},W2=Lt&&Ti<=11;class K2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class q2{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new K2,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Lt&&Ti<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),W2&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,H2)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Cv(this.view)){if(this.suppressingSelectionUpdates)return Mr(this.view);if(Lt&&Ti<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Es(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Wl(s))n.add(s);for(let s=e.anchorNode;s;s=Wl(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Cv(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let c=0;c<n.length;c++){let f=this.registerMutation(n[c],l);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(a=!0))}if(Vn&&l.length){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,d]=c;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of c){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||Y2(e,f)!=h)&&d.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Zf(r)&&(u=t_(e))&&u.eq(re.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Mr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),J2(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Mr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)n.push(e.addedNodes[c]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Lt&&Ti<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?rt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?rt(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let $v=new WeakMap,Hv=!1;function J2(t){if(!$v.has(t)&&($v.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Vn,Hv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Hv=!0}}function Wv(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Es(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function G2(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Wv(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Wv(t,n):null}function Y2(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Q2(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],Zf(l)||u.push({node:l.focusNode,offset:l.focusOffset})),St&&t.input.lastKeyCode===8)for(let _=s;_>i;_--){let p=r.childNodes[_-1],g=p.pmViewDesc;if(p.nodeName=="BR"&&!g){s=_;break}if(!g||g.size)break}let f=t.state.doc,d=t.someProp("domParser")||Go.fromSchema(t.state.schema),h=f.resolve(o),m=null,b=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:X2,context:h});if(u&&u[0].pos!=null){let _=u[0].pos,p=u[1]&&u[1].pos;p==null&&(p=_),m={anchor:_+o,head:p+o}}return{doc:b,sel:m,from:o,to:a}}function X2(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Tt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Tt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Z2=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function eU(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let F=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,C=t_(t,F);if(C&&!t.state.selection.eq(C)){if(St&&Dn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",X=>X(t,Xi(13,"Enter"))))return;let V=t.state.tr.setSelection(C);F=="pointer"?V.setMeta("pointer",!0):F=="key"&&V.scrollIntoView(),s&&V.setMeta("composition",s),t.dispatch(V)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,u=Q2(t,e,n),c=t.state.doc,f=c.slice(u.from,u.to),d,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,h="end"):(d=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=rU(f.content,u.doc.content,u.from,d,h);if((Xo&&t.input.lastIOSEnter>Date.now()-225||Dn)&&i.some(F=>F.nodeType==1&&!Z2.test(F.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",F=>F(t,Xi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Z&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let F=Kv(t,t.state.doc,u.sel);if(F&&!F.eq(t.state.selection)){let C=t.state.tr.setSelection(F);s&&C.setMeta("composition",s),t.dispatch(C)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Z&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Lt&&Ti<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let b=u.doc.resolveNoCache(m.start-u.from),_=u.doc.resolveNoCache(m.endB-u.from),p=c.resolve(m.start),g=b.sameParent(_)&&b.parent.inlineContent&&p.end()>=m.endA,y;if((Xo&&t.input.lastIOSEnter>Date.now()-225&&(!g||i.some(F=>F.nodeName=="DIV"||F.nodeName=="P"))||!g&&b.pos<u.doc.content.size&&!b.sameParent(_)&&(y=re.findFrom(u.doc.resolve(b.pos+1),1,!0))&&y.head==_.pos)&&t.someProp("handleKeyDown",F=>F(t,Xi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&nU(c,m.start,m.endA,b,_)&&t.someProp("handleKeyDown",F=>F(t,Xi(8,"Backspace")))){Dn&&St&&t.domObserver.suppressSelectionUpdates();return}St&&Dn&&m.endB==m.start&&(t.input.lastAndroidDelete=Date.now()),Dn&&!g&&b.start()!=_.start()&&_.parentOffset==0&&b.depth==_.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,_=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(F){return F(t,Xi(13,"Enter"))})},20));let S=m.start,T=m.endA,v,w,M;if(g){if(b.pos==_.pos)Lt&&Ti<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Mr(t),20)),v=t.state.tr.delete(S,T),w=c.resolve(m.start).marksAcross(c.resolve(m.endA));else if(m.endA==m.endB&&(M=tU(b.parent.content.cut(b.parentOffset,_.parentOffset),p.parent.content.cut(p.parentOffset,m.endA-p.start()))))v=t.state.tr,M.type=="add"?v.addMark(S,T,M.mark):v.removeMark(S,T,M.mark);else if(b.parent.child(b.index()).isText&&b.index()==_.index()-(_.textOffset?0:1)){let F=b.parent.textBetween(b.parentOffset,_.parentOffset);if(t.someProp("handleTextInput",C=>C(t,S,T,F)))return;v=t.state.tr.insertText(F,S,T)}}if(v||(v=t.state.tr.replace(S,T,u.doc.slice(m.start-u.from,m.endB-u.from))),u.sel){let F=Kv(t,v.doc,u.sel);F&&!(St&&Dn&&t.composing&&F.empty&&(m.start!=m.endB||t.input.lastAndroidDelete<Date.now()-100)&&(F.head==S||F.head==v.mapping.map(T)-1)||Lt&&F.empty&&F.head==S)&&v.setSelection(F)}w&&v.ensureMarks(w),s&&v.setMeta("composition",s),t.dispatch(v.scrollIntoView())}function Kv(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:n_(t,e.resolve(n.anchor),e.resolve(n.head))}function tU(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(P.from(u).eq(t))return{mark:a,type:o}}function nU(t,e,n,r,i){if(n-e<=i.pos-r.pos||Sp(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Sp(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Sp(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Sp(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function rU(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&qv(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&qv(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function qv(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class iU{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new T2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Xv),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Yv(this),Gv(this),this.nodeViews=Qv(this),this.docView=kv(this.state.doc,Jv(this),vp(this),this.dom,this),this.domObserver=new q2(this,(r,i,s,o)=>eU(this,r,i,s,o)),this.domObserver.start(),I2(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&gy(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Xv),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(GB(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Qv(this);oU(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&gy(this),this.editable=Yv(this),Gv(this);let l=vp(this),u=Jv(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,u,l);(f||!e.selection.eq(i.selection))&&(o=!0);let d=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&UL(this);if(o){this.domObserver.stop();let h=f&&(Lt||St)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&sU(i.selection,e.selection);if(f){let m=St?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=j2(this)),(s||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=kv(e.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&u2(this))?Mr(this,h):(PB(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&xL(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof G){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&wv(this,n.getBoundingClientRect(),e)}else wv(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new QB(e.slice,e.move,i<0?void 0:G.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Lt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&VL(this.dom),Mr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return KL(this,e)}coordsAtPos(e,n=1){return kB(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return QL(this,n||this.state,e)}pasteHTML(e,n){return ql(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ql(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(O2(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ML())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return M2(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return Tt&&this.root.nodeType===11&&NL(this.dom.ownerDocument)==this.dom&&G2(this,e)||e}domSelection(){return this.root.getSelection()}}function Jv(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[fn.node(0,t.state.doc.content.size,e)]}function Gv(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:fn.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Yv(t){return!t.someProp("editable",e=>e(t.state)===!1)}function sU(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Qv(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function oU(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Xv(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Di={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$d={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aU=typeof navigator<"u"&&/Mac/.test(navigator.platform),lU=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var it=0;it<10;it++)Di[48+it]=Di[96+it]=String(it);for(var it=1;it<=24;it++)Di[it+111]="F"+it;for(var it=65;it<=90;it++)Di[it]=String.fromCharCode(it+32),$d[it]=String.fromCharCode(it);for(var wp in Di)$d.hasOwnProperty(wp)||($d[wp]=Di[wp]);function uU(t){var e=aU&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||lU&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?$d:Di)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const cU=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function dU(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))cU?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function fU(t){let e=Object.create(null);for(let n in t)e[dU(n)]=t[n];return e}function Tp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function hU(t){return new wn({props:{handleKeyDown:nM(t)}})}function nM(t){let e=fU(t);return function(n,r){let i=uU(r),s,o=e[Tp(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Tp(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Di[r.keyCode])&&s!=i){let a=e[Tp(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const pU=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function rM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const mU=(t,e,n)=>{let r=rM(t,n);if(!r)return!1;let i=l_(r);if(!i){let o=r.blockRange(),a=o&&Ma(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&aM(t,i,e))return!0;if(r.parent.content.size==0&&(Zo(s,"end")||G.isSelectable(s))){let o=Qf(t.doc,r.before(),r.after(),z.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Zo(s,"end")?re.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):G.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},yU=(t,e,n)=>{let r=rM(t,n);if(!r)return!1;let i=l_(r);return i?iM(t,i,e):!1},gU=(t,e,n)=>{let r=sM(t,n);if(!r)return!1;let i=u_(r);return i?iM(t,i,e):!1};function iM(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=Qf(t.doc,s,l,z.empty);if(!u||u.from!=s||u instanceof Ge&&u.slice.size>=l-s)return!1;if(n){let c=t.tr.step(u);c.setSelection(Z.create(c.doc,s)),n(c.scrollIntoView())}return!0}function Zo(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const _U=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=l_(r)}let o=s&&s.nodeBefore;return!o||!G.isSelectable(o)?!1:(e&&e(t.tr.setSelection(G.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function l_(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function sM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const bU=(t,e,n)=>{let r=sM(t,n);if(!r)return!1;let i=u_(r);if(!i)return!1;let s=i.nodeAfter;if(aM(t,i,e))return!0;if(r.parent.content.size==0&&(Zo(s,"start")||G.isSelectable(s))){let o=Qf(t.doc,r.before(),r.after(),z.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Zo(s,"start")?re.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):G.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},vU=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=u_(r)}let o=s&&s.nodeAfter;return!o||!G.isSelectable(o)?!1:(e&&e(t.tr.setSelection(G.create(t.doc,s.pos)).scrollIntoView()),!0)};function u_(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const SU=(t,e)=>{let n=t.selection,r=n instanceof G,i;if(r){if(n.node.isTextblock||!Pi(t.doc,n.from))return!1;i=n.from}else if(i=Yf(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(G.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},wU=(t,e)=>{let n=t.selection,r;if(n instanceof G){if(n.node.isTextblock||!Pi(t.doc,n.to))return!1;r=n.to}else if(r=Yf(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},TU=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Ma(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},IU=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function oM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const OU=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=oM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(re.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},BU=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Ln||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=oM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Z.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},MU=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Eo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ma(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},kU=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(G.create(t.doc,i))),!0)};function EU(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Pi(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function aM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(EU(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,d=P.empty;for(let b=s.length-1;b>=0;b--)d=P.from(s[b].create(null,d));d=P.from(r.copy(d));let h=t.tr.step(new Qe(e.pos-1,f,e.pos,f,new z(d,1,0),s.length,!0)),m=f+2*s.length;Pi(h.doc,m)&&h.join(m),n(h.scrollIntoView())}return!0}let l=re.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),c=u&&Ma(u);if(c!=null&&c>=e.depth)return n&&n(t.tr.lift(u,c).scrollIntoView()),!0;if(a&&Zo(i,"start",!0)&&Zo(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,m=1;for(;!h.isTextblock;h=h.firstChild)m++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(n){let b=P.empty;for(let p=d.length-1;p>=0;p--)b=P.from(d[p].copy(b));let _=t.tr.step(new Qe(e.pos-d.length,e.pos+i.nodeSize,e.pos+m,e.pos+i.nodeSize-m,new z(b,d.length,0),0,!0));n(_.scrollIntoView())}return!0}}return!1}function lM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Z.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const DU=lM(-1),AU=lM(1);function NU(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&Xg(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Zv(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let c=n.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function RU(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let c=n.doc.resolve(o.start-2);l=new Fd(c,c,o.depth),o.endIndex<o.parent.childCount&&(o=new Fd(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let u=Xg(l,t,e,o);return u?(r&&r(CU(n.tr,o,u,a,t).scrollIntoView()),!0):!1}}function CU(t,e,n,r,i){let s=P.empty;for(let c=n.length-1;c>=0;c--)s=P.from(n[c].type.create(n[c].attrs,s));t.step(new Qe(e.start-(r?2:0),e.end,e.start,e.end,new z(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let a=n.length-o,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&Eo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function FU(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?PU(e,n,t,s):jU(e,n,s):!0:!1}}function PU(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Qe(s-1,o,s,o,new z(P.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Fd(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Ma(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Pi(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function jU(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,b=n.startIndex;m>b;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,u=s.node(-1),c=s.index(-1);if(!u.canReplace(c+(a?0:1),c+1,o.content.append(l?P.empty:P.from(i))))return!1;let f=s.pos,d=f+o.nodeSize;return r.step(new Qe(f-(a?1:0),d+(l?1:0),f+1,d-1,new z((a?P.empty:P.from(i.copy(P.empty))).append(l?P.empty:P.from(i.copy(P.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function LU(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=P.from(u?t.create():null),f=new z(P.from(t.create(null,P.from(a.type.create(null,c)))),u?3:1,0),d=s.start,h=s.end;n(e.tr.step(new Qe(d-(u?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function nh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class rh{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const f=l(...c)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,u=e||s.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...b)=>{const _=this.buildProps(u,n),p=h(...b)(_);return a.push(p),f}])),run:c};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:nh({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}}class UU{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function W(t,e,n){return t.config[e]===void 0&&t.parent?W(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?W(t.parent,e,n):null}):t.config[e]}function ih(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function uM(t){const e=[],{nodeExtensions:n,markExtensions:r}=ih(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=W(o,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...s,...h}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=W(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,f])=>{const d={...s,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:c,attribute:d})})}),e}function et(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function qe(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],u=a.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function _y(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>qe(n,r),{})}function cM(t){return typeof t=="function"}function ne(t,e=void 0,...n){return cM(t)?e?t.bind(e)(...n):t(...n):t}function xU(t={}){return Object.keys(t).length===0&&t.constructor===Object}function VU(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function e1(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):VU(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function t1(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&xU(n)?!1:n!=null))}function zU(t,e){var n;const r=uM(t),{nodeExtensions:i,markExtensions:s}=ih(t),o=(n=i.find(u=>W(u,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(u=>{const c=r.filter(p=>p.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=t.reduce((p,g)=>{const y=W(g,"extendNodeSchema",f);return{...p,...y?y(u):{}}},{}),h=t1({...d,content:ne(W(u,"content",f)),marks:ne(W(u,"marks",f)),group:ne(W(u,"group",f)),inline:ne(W(u,"inline",f)),atom:ne(W(u,"atom",f)),selectable:ne(W(u,"selectable",f)),draggable:ne(W(u,"draggable",f)),code:ne(W(u,"code",f)),defining:ne(W(u,"defining",f)),isolating:ne(W(u,"isolating",f)),attrs:Object.fromEntries(c.map(p=>{var g;return[p.name,{default:(g=p==null?void 0:p.attribute)===null||g===void 0?void 0:g.default}]}))}),m=ne(W(u,"parseHTML",f));m&&(h.parseDOM=m.map(p=>e1(p,c)));const b=W(u,"renderHTML",f);b&&(h.toDOM=p=>b({node:p,HTMLAttributes:_y(p,c)}));const _=W(u,"renderText",f);return _&&(h.toText=_),[u.name,h]})),l=Object.fromEntries(s.map(u=>{const c=r.filter(_=>_.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=t.reduce((_,p)=>{const g=W(p,"extendMarkSchema",f);return{..._,...g?g(u):{}}},{}),h=t1({...d,inclusive:ne(W(u,"inclusive",f)),excludes:ne(W(u,"excludes",f)),group:ne(W(u,"group",f)),spanning:ne(W(u,"spanning",f)),code:ne(W(u,"code",f)),attrs:Object.fromEntries(c.map(_=>{var p;return[_.name,{default:(p=_==null?void 0:_.attribute)===null||p===void 0?void 0:p.default}]}))}),m=ne(W(u,"parseHTML",f));m&&(h.parseDOM=m.map(_=>e1(_,c)));const b=W(u,"renderHTML",f);return b&&(h.toDOM=_=>b({mark:_,HTMLAttributes:_y(_,c)})),[u.name,h]}));return new Wj({topNode:o,nodes:a,marks:l})}function Ip(t,e){return e.nodes[t]||e.marks[t]||null}function n1(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const $U=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,u;const c=((u=(l=i.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=c.slice(0,Math.max(0,r-s))}),n};function c_(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class sh{constructor(e){this.find=e.find,this.handler=e.handler}}const HU=(t,e)=>{if(c_(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function vc(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let c=!1;const f=$U(u)+s;return o.forEach(d=>{if(c)return;const h=HU(f,d.find);if(!h)return;const m=l.state.tr,b=nh({state:l.state,transaction:m}),_={from:r-(h[0].length-s.length),to:i},{commands:p,chain:g,can:y}=new rh({editor:n,state:b});d.handler({state:b,range:_,match:h,commands:p,chain:g,can:y})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:i,text:s}),l.dispatch(m),c=!0)}),c}function WU(t){const{editor:e,rules:n}=t,r=new wn({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:u,text:c}=a,f=u+c.length;vc({editor:e,from:u,to:f,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return vc({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&vc({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?vc({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function KU(t){return typeof t=="number"}class qU{constructor(e){this.find=e.find,this.handler=e.handler}}const JU=(t,e,n)=>{if(c_(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function GU(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:c}=new rh({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const b=Math.max(r,m),_=Math.min(i,m+h.content.size),p=h.textBetween(b-m,_-m,void 0,"");JU(p,s.find,o).forEach(y=>{if(y.index===void 0)return;const S=b+y.index+1,T=S+y[0].length,v={from:n.tr.mapping.map(S),to:n.tr.mapping.map(T)},w=s.handler({state:n,range:v,match:y,commands:l,chain:u,can:c,pasteEvent:o,dropEvent:a});f.push(w)})}),f.every(h=>h!==null)}const YU=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function QU(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:c,from:f,to:d,rule:h,pasteEvt:m})=>{const b=c.tr,_=nh({state:c,transaction:b});if(!(!GU({editor:e,state:_,from:Math.max(f-1,0),to:d.b-1,rule:h,pasteEvent:m,dropEvent:a})||!b.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b};return n.map(c=>new wn({view(f){const d=h=>{var m;r=!((m=f.dom.parentElement)===null||m===void 0)&&m.contains(h.target)?f.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(f,d)=>(s=r===f.dom.parentElement,a=d,!1),paste:(f,d)=>{var h;const m=(h=d.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=d,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,d,h)=>{const m=f[0],b=m.getMeta("uiEvent")==="paste"&&!i,_=m.getMeta("uiEvent")==="drop"&&!s,p=m.getMeta("applyPasteRules"),g=!!p;if(!b&&!_&&!g)return;if(g){const{from:T,text:v}=p,w=T+v.length,M=YU(v);return l({rule:c,state:h,from:T,to:{b:w},pasteEvt:M})}const y=d.doc.content.findDiffStart(h.doc.content),S=d.doc.content.findDiffEnd(h.doc.content);if(!(!KU(y)||!S||y===S.b))return l({rule:c,state:h,from:y,to:S,pasteEvt:o})}}))}function XU(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class vo{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=vo.resolve(e),this.schema=zU(this.extensions,n),this.setupExtensions()}static resolve(e){const n=vo.sort(vo.flatten(e)),r=XU(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=W(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=W(r,"priority")||100,o=W(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ip(n.name,this.schema)},i=W(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=vo.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Ip(o.name,this.schema)},l=[],u=W(o,"addKeyboardShortcuts",a);let c={};if(o.type==="mark"&&o.config.exitable&&(c.ArrowRight=()=>ar.handleExit({editor:e,mark:o})),u){const b=Object.fromEntries(Object.entries(u()).map(([_,p])=>[_,()=>p({editor:e})]));c={...c,...b}}const f=hU(c);l.push(f);const d=W(o,"addInputRules",a);n1(o,e.options.enableInputRules)&&d&&r.push(...d());const h=W(o,"addPasteRules",a);n1(o,e.options.enablePasteRules)&&h&&i.push(...h());const m=W(o,"addProseMirrorPlugins",a);if(m){const b=m();l.push(...b)}return l}).flat();return[WU({editor:e,rules:r}),...QU({editor:e,rules:i}),...s]}get attributes(){return uM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=ih(this.extensions);return Object.fromEntries(n.filter(r=>!!W(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:et(r.name,this.schema)},o=W(r,"addNodeView",s);if(!o)return[];const a=(l,u,c,f)=>{const d=_y(l,i);return o()({editor:e,node:l,getPos:c,decorations:f,HTMLAttributes:d,extension:r})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ip(e.name,this.schema)};e.type==="mark"&&(!((n=ne(W(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=W(e,"onBeforeCreate",r),s=W(e,"onCreate",r),o=W(e,"onUpdate",r),a=W(e,"onSelectionUpdate",r),l=W(e,"onTransaction",r),u=W(e,"onFocus",r),c=W(e,"onBlur",r),f=W(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}}function ZU(t){return Object.prototype.toString.call(t).slice(8,-1)}function Op(t){return ZU(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function oh(t,e){const n={...t};return Op(t)&&Op(e)&&Object.keys(e).forEach(r=>{Op(e[r])?r in t?n[r]=oh(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class Qt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(W(this,"addOptions",{name:this.name}))),this.storage=ne(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Qt(e)}configure(e={}){const n=this.extend();return n.parent=this.parent,n.options=oh(this.options,e),n.storage=ne(W(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Qt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ne(W(n,"addOptions",{name:n.name})),n.storage=ne(W(n,"addStorage",{name:n.name,options:n.options})),n}}function dM(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,u,c,f)=>{var d;l.isBlock&&u>r&&(a+=s);const h=o==null?void 0:o[l.type.name];if(h)return c&&(a+=h({node:l,pos:u,parent:c,index:f,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(r,u)-u,i-u))}),a}function fM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const e3=Qt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new wn({key:new ji("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=fM(n);return dM(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),t3=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),n3=(t=!1)=>({commands:e})=>e.setContent("",t),r3=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const m=Ma(h);if(a.type.isTextblock){const{defaultType:b}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,b)}(m||m===0)&&e.lift(h,m)})}),!0},i3=t=>e=>t(e),s3=()=>({state:t,dispatch:e})=>BU(t,e),o3=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Z(r.doc.resolve(o-1))),!0},a3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},l3=t=>({tr:e,state:n,dispatch:r})=>{const i=et(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),u=s.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},u3=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},c3=()=>({state:t,dispatch:e})=>pU(t,e),d3=()=>({commands:t})=>t.keyboardShortcut("Enter"),f3=()=>({state:t,dispatch:e})=>OU(t,e);function Hd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:c_(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function by(t,e,n={}){return t.find(r=>r.type===e&&Hd(r.attrs,n))}function h3(t,e,n={}){return!!by(t,e,n)}function d_(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=by([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(by([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&h3([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Ui(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const p3=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Ui(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:u,to:c}=a;if(i){const f=d_(l,s,e);if(f&&f.from<=u&&f.to>=c){const d=Z.create(o,f.from,f.to);n.setSelection(d)}}return!0},m3=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function hM(t){return t instanceof Z}function as(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function pM(t,e=null){if(!e)return null;const n=re.atStart(t),r=re.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Z.create(t,as(0,i,s),as(t.content.size,i,s)):Z.create(t,as(e,i,s),as(e,i,s))}function f_(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const y3=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{f_()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!hM(n.state.selection))return o(),!0;const a=pM(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},g3=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),_3=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),mM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&mM(r)}return t};function r1(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return mM(n)}function Wd(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{return Array.isArray(t)&&t.length>0?P.fromArray(t.map(o=>e.nodeFromJSON(o))):e.nodeFromJSON(t)}catch(s){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Wd("",e,n)}if(i){const s=Go.fromSchema(e);return n.slice?s.parseSlice(r1(t),n.parseOptions).content:s.parse(r1(t),n.parseOptions)}return Wd("",e,n)}function b3(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ge||i instanceof Qe))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,u,c)=>{o===0&&(o=c)}),t.setSelection(re.near(t.doc.resolve(o),n))}const v3=t=>t.toString().startsWith("<"),S3=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const o=Wd(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,c=!0;if((v3(o)?o:[o]).forEach(h=>{h.check(),u=u?h.isText&&h.marks.length===0:!1,c=c?h.isBlock:!1}),a===l&&c){const{parent:h}=r.doc.resolve(a);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(a-=1,l+=1)}let d;u?(Array.isArray(e)?d=e.map(h=>h.text||"").join(""):typeof e=="object"&&e&&e.text?d=e.text:d=e,r.insertText(d,a,l)):(d=o,r.replaceWith(a,l,d)),n.updateSelection&&b3(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:d}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:d})}return!0},w3=()=>({state:t,dispatch:e})=>SU(t,e),T3=()=>({state:t,dispatch:e})=>wU(t,e),I3=()=>({state:t,dispatch:e})=>mU(t,e),O3=()=>({state:t,dispatch:e})=>bU(t,e),B3=()=>({tr:t,state:e,dispatch:n})=>{try{const r=Yf(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},M3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Yf(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},k3=()=>({state:t,dispatch:e})=>yU(t,e),E3=()=>({state:t,dispatch:e})=>gU(t,e);function yM(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function D3(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))f_()||yM()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const A3=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=D3(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Gl(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?et(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),m=Math.min(i,d+f.nodeSize);a.push({node:f,from:h,to:m})});const l=i-r,u=a.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Hd(f.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}const N3=(t,e={})=>({state:n,dispatch:r})=>{const i=et(t,n.schema);return Gl(n,i,e)?TU(n,r):!1},R3=()=>({state:t,dispatch:e})=>MU(t,e),C3=t=>({state:e,dispatch:n})=>{const r=et(t,e.schema);return FU(r)(e,n)},F3=()=>({state:t,dispatch:e})=>IU(t,e);function ah(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function i1(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const P3=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=ah(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=et(t,r.schema)),a==="mark"&&(o=Ui(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{s&&s===u.type&&n.setNodeMarkup(c,void 0,i1(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&n.addMark(c,c+u.nodeSize,o.create(i1(f.attrs,e)))})})}),!0):!1},j3=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),L3=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),U3=()=>({state:t,dispatch:e})=>_U(t,e),x3=()=>({state:t,dispatch:e})=>vU(t,e),V3=()=>({state:t,dispatch:e})=>kU(t,e),z3=()=>({state:t,dispatch:e})=>AU(t,e),$3=()=>({state:t,dispatch:e})=>DU(t,e);function gM(t,e,n={}){return Wd(t,e,{slice:!1,parseOptions:n})}const H3=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=gM(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function lh(t,e){const n=Ui(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function W3(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function K3(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function h_(t){return e=>K3(e.$from,t)}function q3(t,e){const n=er.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function J3(t,e){const n={from:0,to:t.content.size};return dM(t,n,e)}function G3(t,e){const n=et(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function Y3(t,e){const n=ah(typeof e=="string"?e:e.name,t.schema);return n==="node"?G3(t,e):n==="mark"?lh(t,e):{}}function _M(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=d_(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Vc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function vy(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Ui(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>Hd(f.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,m=d.pos;t.doc.nodesBetween(h,m,(b,_)=>{if(!b.isText&&!b.marks.length)return;const p=Math.max(h,_),g=Math.min(m,_+b.nodeSize),y=g-p;o+=y,a.push(...b.marks.map(S=>({mark:S,from:p,to:g})))})}),o===0)return!1;const l=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>Hd(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=o}function Q3(t,e,n={}){if(!e)return Gl(t,null,n)||vy(t,null,n);const r=ah(e,t.schema);return r==="node"?Gl(t,e,n):r==="mark"?vy(t,e,n):!1}function s1(t,e){const{nodeExtensions:n}=ih(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ne(W(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function X3(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function Z3(t,e,n){var r;const{selection:i}=e;let s=null;if(hM(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){const h=!d||d.type.allowsMarkType(n),m=!!n.isInSet(c.marks)||!c.marks.some(b=>b.type.excludes(n));u=h&&m}return!u}),u})}const ex=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Ui(t,r.schema);if(i)if(o){const u=lh(r,l);n.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,h)=>{const m=Math.max(h,c),b=Math.min(h+d.nodeSize,f);d.marks.find(p=>p.type===l)?d.marks.forEach(p=>{l===p.type&&n.addMark(m,b,l.create({...p.attrs,...e}))}):n.addMark(m,b,l.create(e))})});return Z3(r,n,l)},tx=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),nx=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=et(t,n.schema);return s.isTextblock?i().command(({commands:o})=>Zv(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>Zv(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},rx=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=as(t,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},ix=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Z.atStart(r).from,a=Z.atEnd(r).to,l=as(i,o,a),u=as(s,o,a),c=Z.create(r,l,u);e.setSelection(c)}return!0},sx=t=>({state:e,dispatch:n})=>{const r=et(t,e.schema);return LU(r)(e,n)};function o1(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const ox=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,u=i.extensionManager.attributes,c=Vc(u,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!Eo(o,a.pos)?!1:(r&&(t&&o1(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;s instanceof Z&&e.deleteSelection();const d=a.depth===0?void 0:W3(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:c}]:void 0,m=Eo(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!m&&Eo(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(m=!0,h=d?[{type:d,attrs:c}]:void 0),m&&(e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const b=e.mapping.map(a.before()),_=e.doc.resolve(b);a.node(-1).canReplaceWith(_.index(),_.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&o1(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},ax=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=et(t,n.schema),{$from:a,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==o)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let _=P.empty;const p=a.index(-1)?1:a.index(-2)?2:3;for(let w=a.depth-p;w>=a.depth-3;w-=1)_=P.from(a.node(w).copy(_));const g=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,y=Vc(f,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(y))||void 0;_=_.append(P.from(o.createAndFill(null,S)||void 0));const T=a.before(a.depth-(p-1));e.replace(T,a.after(-g),new z(_,4-p,0));let v=-1;e.doc.nodesBetween(T,e.doc.content.size,(w,M)=>{if(v>-1)return!1;w.isTextblock&&w.content.size===0&&(v=M+1)}),v>-1&&e.setSelection(Z.near(e.doc.resolve(v))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,h=Vc(f,c.type.name,c.attrs),m=Vc(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const b=d?[{type:o,attrs:h},{type:d,attrs:m}]:[{type:o,attrs:h}];if(!Eo(e.doc,a.pos,2))return!1;if(r){const{selection:_,storedMarks:p}=n,{splittableMarks:g}=i.extensionManager,y=p||_.$to.parentOffset&&_.$from.marks();if(e.split(a.pos,2,b).scrollIntoView(),!y||!r)return!0;const S=y.filter(T=>g.includes(T.type.name));e.ensureMarks(S)}return!0},Bp=(t,e)=>{const n=h_(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Pi(t.doc,n.pos)&&t.join(n.pos),!0},Mp=(t,e)=>{const n=h_(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Pi(t.doc,r)&&t.join(r),!0},lx=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=et(t,o.schema),m=et(e,o.schema),{selection:b,storedMarks:_}=o,{$from:p,$to:g}=b,y=p.blockRange(g),S=_||b.$to.parentOffset&&b.$from.marks();if(!y)return!1;const T=h_(v=>s1(v.type.name,f))(b);if(y.depth>=1&&T&&y.depth-T.depth<=1){if(T.node.type===h)return u.liftListItem(m);if(s1(T.node.type.name,f)&&h.validContent(T.node.content)&&a)return l().command(()=>(s.setNodeMarkup(T.pos,h),!0)).command(()=>Bp(s,h)).command(()=>Mp(s,h)).run()}return!n||!S||!a?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>Bp(s,h)).command(()=>Mp(s,h)).run():l().command(()=>{const v=c().wrapInList(h,r),w=S.filter(M=>d.includes(M.type.name));return s.ensureMarks(w),v?!0:u.clearNodes()}).wrapInList(h,r).command(()=>Bp(s,h)).command(()=>Mp(s,h)).run()},ux=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Ui(t,r.schema);return vy(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},cx=(t,e,n={})=>({state:r,commands:i})=>{const s=et(t,r.schema),o=et(e,r.schema);return Gl(r,s,n)?i.setNode(o):i.setNode(s,n)},dx=(t,e={})=>({state:n,commands:r})=>{const i=et(t,n.schema);return Gl(n,i,e)?r.lift(i):r.wrapIn(i,e)},fx=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},hx=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},px=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Ui(t,r.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&o){let{from:d,to:h}=a;const m=(s=u.marks().find(_=>_.type===l))===null||s===void 0?void 0:s.attrs,b=d_(u,l,m);b&&(d=b.from,h=b.to),n.removeMark(d,h,l)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},mx=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=ah(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=et(t,r.schema)),a==="mark"&&(o=Ui(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(f,d)=>{s&&s===f.type&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(h=>{if(o===h.type){const m=Math.max(d,u),b=Math.min(d+f.nodeSize,c);n.addMark(m,b,o.create({...h.attrs,...e}))}})})}),!0):!1},yx=(t,e={})=>({state:n,dispatch:r})=>{const i=et(t,n.schema);return NU(i,e)(n,r)},gx=(t,e={})=>({state:n,dispatch:r})=>{const i=et(t,n.schema);return RU(i,e)(n,r)};var _x=Object.freeze({__proto__:null,blur:t3,clearContent:n3,clearNodes:r3,command:i3,createParagraphNear:s3,cut:o3,deleteCurrentNode:a3,deleteNode:l3,deleteRange:u3,deleteSelection:c3,enter:d3,exitCode:f3,extendMarkRange:p3,first:m3,focus:y3,forEach:g3,insertContent:_3,insertContentAt:S3,joinUp:w3,joinDown:T3,joinBackward:I3,joinForward:O3,joinItemBackward:B3,joinItemForward:M3,joinTextblockBackward:k3,joinTextblockForward:E3,keyboardShortcut:A3,lift:N3,liftEmptyBlock:R3,liftListItem:C3,newlineInCode:F3,resetAttributes:P3,scrollIntoView:j3,selectAll:L3,selectNodeBackward:U3,selectNodeForward:x3,selectParentNode:V3,selectTextblockEnd:z3,selectTextblockStart:$3,setContent:H3,setMark:ex,setMeta:tx,setNode:nx,setNodeSelection:rx,setTextSelection:ix,sinkListItem:sx,splitBlock:ox,splitListItem:ax,toggleList:lx,toggleMark:ux,toggleNode:cx,toggleWrap:dx,undoInputRule:fx,unsetAllMarks:hx,unsetMark:px,updateAttributes:mx,wrapIn:yx,wrapInList:gx});const bx=Qt.create({name:"commands",addCommands(){return{..._x}}}),vx=Qt.create({name:"editable",addProseMirrorPlugins(){return[new wn({key:new ji("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Sx=Qt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new wn({key:new ji("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),wx=Qt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:h}=f,m=f.parent.isTextblock&&d>0?a.doc.resolve(d-1):f,b=m.parent.type.spec.isolating,_=f.pos-f.parentOffset,p=b&&m.parent.childCount===1?_===f.pos:re.atStart(u).from===d;return!c||!h.type.isTextblock||h.textContent.length||!p||p&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return f_()||yM()?s:i},addProseMirrorPlugins(){return[new wn({key:new ji("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(m=>m.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=re.atStart(e.doc).from,l=re.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const f=n.tr,d=nh({state:n,transaction:f}),{commands:h}=new rh({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}}),Tx=Qt.create({name:"tabindex",addProseMirrorPlugins(){return[new wn({key:new ji("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Zi{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Zi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Zi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Zi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+1,o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new Zi(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Zi(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const Ix=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Ox(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let Bx=class extends UU{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Ox(Ix,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=cM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[vx,e3.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),bx,Sx,wx,Tx]:[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new vo(i,this)}createCommandManager(){this.commandManager=new rh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=gM(this.options.content,this.schema,this.options.parseOptions),n=pM(e,this.options.autofocus);this.view=new iU(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:bo.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Y3(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return Q3(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return q3(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return J3(this.state.doc,{blockSeparator:n,textSerializers:{...fM(this.schema),...r}})}get isEmpty(){return X3(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Zi(n,this)}get $doc(){return this.$pos(0)}};function ea(t){return new sh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ne(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),u=n.from+a.indexOf(o),c=u+o.length;if(_M(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(b=>b===t.type&&b!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&s.delete(c,n.to),u>n.from&&s.delete(n.from+l,u);const d=n.from+l+o.length;s.addMark(n.from+l,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function Mx(t){return new sh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ne(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=o+u;c>a?c=a:a=c+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,o+r[0].length-1),s.replaceWith(c,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function Sy(t){return new sh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=ne(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Yl(t){return new sh({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=ne(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),u=l&&Xg(l,t.type,s);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=t.editor.extensionManager,m=d||f.$to.parentOffset&&f.$from.marks();if(m){const b=m.filter(_=>h.includes(_.type.name));o.ensureMarks(b)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&Pi(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&o.join(n.from-1)}})}class ar{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(W(this,"addOptions",{name:this.name}))),this.storage=ne(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ar(e)}configure(e={}){const n=this.extend();return n.options=oh(this.options,e),n.storage=ne(W(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new ar({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ne(W(n,"addOptions",{name:n.name})),n.storage=ne(W(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class pt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(W(this,"addOptions",{name:this.name}))),this.storage=ne(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pt(e)}configure(e={}){const n=this.extend();return n.options=oh(this.options,e),n.storage=ne(W(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new pt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ne(W(n,"addOptions",{name:n.name})),n.storage=ne(W(n,"addStorage",{name:n.name,options:n.options})),n}}function ta(t){return new qU({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=ne(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let u=n.to;if(a){const c=l.search(/\S/),f=n.from+l.indexOf(a),d=f+a.length;if(_M(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(_=>_===t.type&&_!==m.mark.type)).filter(m=>m.to>f).length)return null;d<n.to&&o.delete(d,n.to),f>n.from&&o.delete(n.from+c,f),u=n.from+c+a.length,o.addMark(n.from+c,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const kx=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Ex=({renderers:t})=>At.createElement(At.Fragment,null,Object.entries(t).map(([e,n])=>QE.createPortal(n.reactElement,n.element,e)));class Dx extends At.Component{constructor(e){super(e),this.editorContentRef=At.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?gg.flushSync(e):e()}setRenderer(e,n){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:n}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:n})=>{const r={...n};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return At.createElement(At.Fragment,null,At.createElement("div",{ref:kx(n,this.editorContentRef),...r}),At.createElement(Ex,{renderers:this.state.renderers}))}}const Ax=te.forwardRef((t,e)=>{const n=At.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return At.createElement(Dx,{key:n,innerRef:e,...t})}),Nx=At.memo(Ax);class Rx extends Bx{constructor(){super(...arguments),this.contentComponent=null}}const Cx=(t={},e=[])=>{const n=te.useRef(null),[,r]=te.useState({}),{onBeforeCreate:i,onBlur:s,onCreate:o,onDestroy:a,onFocus:l,onSelectionUpdate:u,onTransaction:c,onUpdate:f}=t,d=te.useRef(i),h=te.useRef(s),m=te.useRef(o),b=te.useRef(a),_=te.useRef(l),p=te.useRef(u),g=te.useRef(c),y=te.useRef(f);return te.useEffect(()=>{n.current&&(i&&(n.current.off("beforeCreate",d.current),n.current.on("beforeCreate",i),d.current=i),s&&(n.current.off("blur",h.current),n.current.on("blur",s),h.current=s),o&&(n.current.off("create",m.current),n.current.on("create",o),m.current=o),a&&(n.current.off("destroy",b.current),n.current.on("destroy",a),b.current=a),l&&(n.current.off("focus",_.current),n.current.on("focus",l),_.current=l),u&&(n.current.off("selectionUpdate",p.current),n.current.on("selectionUpdate",u),p.current=u),c&&(n.current.off("transaction",g.current),n.current.on("transaction",c),g.current=c),f&&(n.current.off("update",y.current),n.current.on("update",f),y.current=f))},[i,s,o,a,l,u,c,f,n.current]),te.useEffect(()=>{let S=!0;const T=new Rx(t);return n.current=T,n.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{S&&r({})})})}),()=>{S=!1,T.destroy()}},e),n.current},Fx=te.createContext({editor:null});Fx.Consumer;const Px=te.createContext({onDragStart:void 0}),jx=()=>te.useContext(Px);At.forwardRef((t,e)=>{const{onDragStart:n}=jx(),r=t.as||"div";return At.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const Lx=/^\s*>\s$/,Ux=pt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Yl({find:Lx,type:this.type})]}}),xx=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Vx=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,zx=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$x=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Hx=ar.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ea({find:xx,type:this.type}),ea({find:zx,type:this.type})]},addPasteRules(){return[ta({find:Vx,type:this.type}),ta({find:$x,type:this.type})]}}),Wx=pt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qe(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),a1=ar.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=lh(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),l1=/^\s*([-+*])\s$/,Kx=pt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Wx.name,this.editor.getAttributes(a1.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Yl({find:l1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Yl({find:l1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(a1.name),editor:this.editor})),[t]}}),qx=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,Jx=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Gx=ar.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ea({find:qx,type:this.type})]},addPasteRules(){return[ta({find:Jx,type:this.type})]}}),Yx=/^```([a-z]+)?[\s\n]$/,Qx=/^~~~([a-z]+)?[\s\n]$/,Xx=pt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",qe(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[Sy({find:Yx,type:this.type,getAttributes:t=>({language:t[1]})}),Sy({find:Qx,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new wn({key:new ji("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return t.state.selection.from===t.state.doc.nodeSize-(1+t.state.selection.$to.depth*2)?o.insert(t.state.selection.from-1,this.type.create({language:s})):o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Z.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Zx=pt.create({name:"doc",topNode:!0,content:"block+"});function eV(t={}){return new wn({view(e){return new tV(e,t)}})}class tV{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let u=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(u){let c=u.getBoundingClientRect(),f=a?c.bottom:c.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=yB(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const nV=Qt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[eV(this.options)]}});class Fe extends re{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Fe.valid(r)?new Fe(r):re.near(r)}content(){return z.empty}eq(e){return e instanceof Fe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Fe(e.resolve(n.pos))}getBookmark(){return new p_(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!rV(e)||!iV(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Fe.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Fe.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!G.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Fe.valid(a))return a}return null}}}Fe.prototype.visible=!1;Fe.findFrom=Fe.findGapCursorFrom;re.jsonID("gapcursor",Fe);class p_{constructor(e){this.pos=e}map(e){return new p_(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Fe.valid(n)?new Fe(n):re.near(n)}}function rV(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function iV(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function sV(){return new wn({props:{decorations:uV,createSelectionBetween(t,e,n){return e.pos==n.pos&&Fe.valid(n)?new Fe(n):null},handleClick:aV,handleKeyDown:oV,handleDOMEvents:{beforeinput:lV}}})}const oV=nM({ArrowLeft:Sc("horiz",-1),ArrowRight:Sc("horiz",1),ArrowUp:Sc("vert",-1),ArrowDown:Sc("vert",1)});function Sc(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Z){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Fe.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new Fe(u))),!0):!1}}function aV(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Fe.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&G.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Fe(r))),!0)}function lV(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Fe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=P.empty;for(let o=r.length-1;o>=0;o--)i=P.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new z(i,0,0));return s.setSelection(Z.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function uV(t){if(!(t.selection instanceof Fe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",We.create(t.doc,[fn.widget(t.selection.head,e,{key:"gapcursor"})])}const cV=Qt.create({name:"gapCursor",addProseMirrorPlugins(){return[sV()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ne(W(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),dV=pt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",qe(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&o){const f=l.filter(d=>a.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),fV=pt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,qe(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Sy({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Kd=200,Xe=function(){};Xe.prototype.append=function(e){return e.length?(e=Xe.from(e),!this.length&&e||e.length<Kd&&this.leafAppend(e)||this.length<Kd&&e.leafPrepend(this)||this.appendInner(e)):this};Xe.prototype.prepend=function(e){return e.length?Xe.from(e).append(this):this};Xe.prototype.appendInner=function(e){return new hV(this,e)};Xe.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Xe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Xe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Xe.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Xe.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Xe.from=function(e){return e instanceof Xe?e:e&&e.length?new bM(e):Xe.empty};var bM=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Kd)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Kd)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Xe);Xe.empty=new bM([]);var hV=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Xe);const pV=500;class Nn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,c.push(f);return}if(i){c.push(new Gn(f.map));let h=f.step.map(i.slice(s)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],u.push(new Gn(m,void 0,void 0,u.length+c.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(s)):f.selection,l=new Nn(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new Gn(e.mapping.maps[c],f,n),h;(h=l&&l.merge(d))&&(d=h,c?s.pop():a=a.slice(0,a.length-1)),s.push(d),n&&(o++,n=void 0),i||(l=d)}let u=o-r.depth;return u>yV&&(a=mV(a,u),o-=u),new Nn(a.append(s),o)}remapping(e,n){let r=new ko;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Nn(this.items.append(e.map(n=>new Gn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let m=s.maps[h];if(d.step){let b=e.steps[h].invert(e.docs[h]),_=d.selection&&d.selection.map(s.slice(l+1,h));_&&a++,r.push(new Gn(m,b,_))}else r.push(new Gn(m))},i);let u=[];for(let d=n;d<o;d++)u.push(new Gn(s.maps[d]));let c=this.items.slice(0,i).append(u).append(r),f=new Nn(c,a);return f.emptyItemCount()>pV&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let f=new Gn(u.invert(),l,c),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else o.map&&r--},this.items.length,0),new Nn(Xe.from(i.reverse()),s)}}Nn.empty=new Nn(Xe.empty,0);function mV(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Gn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Gn(n.getMap().invert(),n,this.selection)}}}class si{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const yV=20;function gV(t,e,n,r){let i=n.getMeta(ys),s;if(i)return i.historyState;n.getMeta(vV)&&(t=new si(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(ys))return o.getMeta(ys).redo?new si(t.done.addTransform(n,void 0,r,zc(e)),t.undone,u1(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new si(t.done,t.undone.addTransform(n,void 0,r,zc(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!_V(n,t.prevRanges)),u=o?kp(t.prevRanges,n.mapping):u1(n.mapping.maps[n.steps.length-1]);return new si(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,zc(e)),Nn.empty,u,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new si(t.done.rebased(n,s),t.undone.rebased(n,s),kp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new si(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),kp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function _V(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function u1(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function kp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function bV(t,e,n){let r=zc(e),i=ys.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new si(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(ys,{redo:n,historyState:l})}let Ep=!1,c1=null;function zc(t){let e=t.plugins;if(c1!=e){Ep=!1,c1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ep=!0;break}}return Ep}const ys=new ji("history"),vV=new ji("closeHistory");function SV(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new wn({key:ys,state:{init(){return new si(Nn.empty,Nn.empty,null,0,-1)},apply(e,n,r){return gV(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?SM:r=="historyRedo"?wM:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function vM(t,e){return(n,r)=>{let i=ys.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=bV(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const SM=vM(!1,!0),wM=vM(!0,!0),wV=Qt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>SM(t,e),redo:()=>({state:t,dispatch:e})=>wM(t,e)}},addProseMirrorPlugins(){return[SV(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),TV=pt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",qe(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Z.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(G.create(i.doc,a.pos)):i.setSelection(Z.create(i.doc,a.pos));else{const u=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();u&&(i.insert(l,u),i.setSelection(Z.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Mx({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),IV=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,OV=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,BV=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,MV=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,kV=ar.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ea({find:IV,type:this.type}),ea({find:BV,type:this.type})]},addPasteRules(){return[ta({find:OV,type:this.type}),ta({find:MV,type:this.type})]}}),EV=pt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qe(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),DV=pt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qe(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),d1=ar.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=lh(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),f1=/^(\d+)\.\s$/,AV=pt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",qe(this.options.HTMLAttributes,n),0]:["ol",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(DV.name,this.editor.getAttributes(d1.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Yl({find:f1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Yl({find:f1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(d1.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),NV=pt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),RV=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,CV=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,FV=ar.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",qe(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ea({find:RV,type:this.type})]},addPasteRules(){return[ta({find:CV,type:this.type})]}}),PV=pt.create({name:"text",group:"inline"}),jV=Qt.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,u,c,f,d,h,m,b,_,p;const g=[];return this.options.blockquote!==!1&&g.push(Ux.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&g.push(Hx.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&g.push(Kx.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&g.push(Gx.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&g.push(Xx.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&g.push(Zx.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&g.push(nV.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&g.push(cV.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&g.push(dV.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&g.push(fV.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&g.push(wV.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&g.push(TV.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&g.push(kV.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&g.push(EV.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&g.push(AV.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&g.push(NV.configure((b=this.options)===null||b===void 0?void 0:b.paragraph)),this.options.strike!==!1&&g.push(FV.configure((_=this.options)===null||_===void 0?void 0:_.strike)),this.options.text!==!1&&g.push(PV.configure((p=this.options)===null||p===void 0?void 0:p.text)),g}}),LV=()=>{const{db:t}=lj.useDuckDb(),[e,n]=te.useState([]),[r,i]=te.useState(null),[s,o]=te.useState(!1),a=Cx({extensions:[jV],content:`
      SELECT * FROM rows;
    `});te.useEffect(()=>{async function c(){if(t)try{const f=await t.connect(),d=await fetch("/masterq/data.json");if(!d.ok)throw new Error("Network response was not ok");const h=new Uint8Array(await d.arrayBuffer());await t.registerFileBuffer("rows.json",h),await f.insertJSONFromPath("rows.json",{name:"rows"}),await f.close(),o(!0)}catch(f){f instanceof Error?i(f.message):i("An unknown error occurred")}}c()},[t]);const l=async c=>{if(t&&c)try{const f=await t.connect(),h=(await f.query(c)).toArray().map(m=>m.toJSON());n(h),i(null),await f.close()}catch(f){f instanceof Error?i(f.message):i("An unknown error occurred")}};te.useEffect(()=>{s&&l("SELECT * FROM rows;")},[s]);const u=()=>{if(a){const c=a.getText();l(c)}};return On.jsxs("div",{children:[On.jsx(Nx,{editor:a}),On.jsx("button",{onClick:u,children:"Run Query"}),r&&On.jsxs("div",{style:{color:"red"},children:[On.jsx("h3",{children:"Error:"}),On.jsx("pre",{children:r})]}),e.length>0&&On.jsxs("div",{children:[On.jsx("h3",{children:"Query Result:"}),On.jsx("pre",{children:JSON.stringify(e,null,2)})]})]})},h1=document.getElementById("root");h1&&Dp.createRoot(h1).render(On.jsx(At.StrictMode,{children:On.jsx(LV,{})}));
